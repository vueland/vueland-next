{"version":3,"sources":["../../../../src/components/VList/VListGroup.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VListGroup.scss'\n\n// Vue API\nimport {\n  h,\n  ref,\n  computed,\n  provide,\n  inject,\n  withDirectives,\n  defineComponent,\n  onBeforeUnmount,\n  vShow,\n} from 'vue'\n\n// Effects\nimport { useColors } from '../../effects/use-colors'\nimport { elevationProps, useElevation } from '../../effects/use-elevation'\n\n// Components\nimport { VIcon } from '../VIcon'\nimport { VListItem } from './VListItem'\nimport { VListItemIcon } from './index'\nimport { VExpandTransition } from '../transitions'\n\n// Types\nimport { VNode, ComponentPublicInstance } from 'vue'\nimport { ListGroup } from '../../../types'\n\n// Services\nimport { FaIcons } from '../../services/icons'\nimport { Sizes } from '../../services/sizes'\n\nexport const VListGroup = defineComponent({\n  name: 'v-list-group',\n  props: {\n    activeClass: {\n      type: String,\n      default: '',\n    },\n    appendIcon: {\n      type: String,\n      default: FaIcons.$expand,\n    },\n    prependIcon: {\n      type: String,\n      default: '',\n    },\n    color: {\n      type: String,\n    },\n    disabled: Boolean,\n    group: String,\n    expanded: Boolean,\n    noAction: Boolean,\n    subGroup: Boolean,\n    ...elevationProps(),\n  } as any,\n\n  setup(props, { slots }) {\n    const { setTextColor } = useColors()\n    const { elevationClasses } = useElevation(props)\n\n    const refGroup = ref<ComponentPublicInstance<HTMLDivElement> | null>(null)\n    const isActive = ref<boolean>(false)\n    const children = ref<ListGroup[]>([])\n    const { groups, register, unRegister, listClick }: any = inject('groups')\n\n    provide('subgroups', children)\n\n    const subgroups: any = props.subGroup && inject('subgroups')\n\n    const listGroup = {\n      ref: refGroup,\n      active: isActive,\n    }\n\n    if (groups) register(listGroup)\n    if (subgroups) subgroups.value.push(listGroup)\n    if (!props.noAction && props.expanded) {\n      requestAnimationFrame(onClick)\n    }\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-list-group': true,\n      'v-list-group__sub-group': props.subGroup,\n      'v-list-group--expanded': isActive.value && !props.noAction,\n      [props.activeClass]: isActive.value,\n      ...elevationClasses.value,\n    }))\n\n    function onClick() {\n      if (props.noAction) return\n\n      groups?.value.length && listClick(refGroup)\n      children.value.length &&\n        children.value.forEach((it: any) => (it.active = false))\n    }\n\n    function genIcon(icon: string): VNode {\n      const propsData = {\n        size: Sizes.small,\n      }\n\n      return h(VIcon, propsData, {\n        default: () => icon,\n      })\n    }\n\n    function genAppendIcon(): VNode | null {\n      const slotIcon = slots.appendIcon && slots.appendIcon()\n      const icon = !props.subGroup && !props.noAction ? props.appendIcon : false\n\n      if ((!icon && !slotIcon) || (!props.subGroup && props.noAction))\n        return null\n\n      const propsData = {\n        class: 'v-list-group__append-icon',\n      }\n\n      return h(VListItemIcon, propsData, {\n        default: () => slotIcon || genIcon(icon as string),\n      })\n    }\n\n    function genPrependIcon(): VNode | null {\n      const icon =\n        props.subGroup && !props.noAction\n          ? FaIcons.$subgroup\n          : props.prependIcon\n\n      const slotIcon = slots.prependIcon && slots.prependIcon()\n\n      if (!icon && !slotIcon) return null\n\n      const propsData = {\n        class: 'v-list-group__prepend-icon',\n      }\n\n      return h(VListItemIcon, propsData, {\n        default: () => slotIcon || genIcon(icon as string),\n      })\n    }\n\n    function genGroupHeader(): VNode {\n      const propsData = {\n        class: {\n          'v-list-group__header': !props.subGroup,\n          'v-list-group__header--sub-group': props.subGroup,\n        },\n        onClick,\n      }\n\n      return h(VListItem, propsData, {\n        default: () => [\n          genPrependIcon(),\n          slots.title && slots.title(),\n          genAppendIcon(),\n        ],\n      })\n    }\n\n    function genItems(): VNode {\n      const propsData = {\n        class: 'v-list-group__items',\n      }\n\n      return withDirectives(\n        h('div', propsData, slots.default && slots.default()),\n        [[vShow, isActive.value]]\n      )\n    }\n\n    function genPropsData() {\n      return {\n        class: classes.value,\n        ref: refGroup,\n      }\n    }\n\n    onBeforeUnmount(() => {\n      unRegister(refGroup)\n    })\n\n    return () => {\n      const items = slots.default && VExpandTransition(genItems())\n      const header = slots.title && genGroupHeader()\n\n      const propsData = props.color\n        ? setTextColor(props.color, genPropsData())\n        : genPropsData()\n\n      const children = [header, items]\n\n      return h('div', propsData, children)\n    }\n  },\n})\n"],"sourceRoot":"","file":"VListGroup.js"}