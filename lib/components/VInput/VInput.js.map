{"version":3,"sources":["../../../../src/components/VInput/VInput.ts"],"names":[],"mappings":"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","sourcesContent":["// Style\nimport './VInput.scss'\n\n// Vue API\nimport {\n  h,\n  watch,\n  computed,\n  defineComponent,\n  inject,\n  onBeforeUnmount\n} from 'vue'\n\n// Components\nimport { VLabel } from '../VLabel'\nimport { VIcon } from '../VIcon'\n\n// Types\nimport { VNode, PropType, Ref } from 'vue'\n\n// Effects\nimport { useTransition } from '../../effects/use-transition'\nimport { colorProps, useColors } from '../../effects/use-colors'\nimport { useIcons } from '../../effects/use-icons'\nimport { themeProps } from '../../effects/use-theme'\nimport { validateProps, useValidate } from '@/effects/use-validate'\n\nimport { Transitions } from '../../services/transitions'\n\nexport const VInput = defineComponent({\n  name: 'v-input',\n  inheritAttrs: false,\n  props: {\n    inputSlotRef: Object as PropType<Ref<null>>,\n    focused: Boolean,\n    hasState: Boolean,\n    disabled: Boolean,\n    clearable: Boolean,\n    label: String,\n    prependIcon: String,\n    appendIcon: String,\n    type: {\n      type: String,\n      default: 'text'\n    },\n    modelValue: [ String, Number, Object ],\n    ...colorProps(),\n    ...themeProps(),\n    ...validateProps()\n  } as any,\n\n  emits: [ 'clear', 'focus' ],\n\n  setup(props, { slots, emit, attrs }): () => VNode {\n    const { setTextColor } = useColors()\n    const { icons, iconSize } = useIcons('md')\n    const {\n      validate,\n      dirty,\n      errorState,\n      validationState\n    } = useValidate(props)\n\n    const fields: Ref<any[]> | undefined = props.rules && inject('fields')\n\n    if (fields?.value && props.rules?.length) {\n      fields.value.push(validateValue)\n    }\n\n    const isValid = computed<boolean>(() => {\n      return errorState.isDirty && props.hasState && !errorState.innerError\n    })\n\n    const isNotValid = computed<boolean>(() => {\n      return errorState.isDirty && !!errorState.innerError\n    })\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-input': true,\n      'v-input--disabled': props.disabled,\n      'v-input--dirty': errorState.isDirty,\n      'v-input--valid': isValid.value,\n      'v-input--not-valid': isNotValid.value,\n      'v-input--focused': props.focused\n    }))\n\n    watch(() => props.value, () => requestAnimationFrame(validateValue))\n\n    watch(\n      () => props.focused,\n      (to) => !to && requestAnimationFrame(validateValue)\n    )\n\n    function onClick() {\n      dirty()\n      emit('focus')\n    }\n\n    function validateValue() {\n      return props.rules?.length && validate(props.value)\n    }\n\n    function genLabel(): VNode {\n      const propsData = {\n        absolute: true,\n        onField: true,\n        hasState: props.hasState,\n        disabled: props.disabled,\n        focused: props.focused,\n        color: validationState.value\n      }\n\n      return h(VLabel, propsData, {\n        default: () => props.label\n      })\n    }\n\n    function genIcon(iconName, clickable = false) {\n      return h(VIcon, {\n        color: validationState.value,\n        dark: props.dark,\n        icon: iconName,\n        size: iconSize,\n        disabled: props.disabled,\n        clickable\n      })\n    }\n\n    function genPrependIcon() {\n      return h(\n        'div',\n        { class: 'v-input__prepend-icon' },\n        genIcon(props.prependIcon)\n      )\n    }\n\n    function genAppendIcon() {\n      const propsData = { class: 'v-input__append-icon' }\n      return h('div', propsData, genIcon(props.appendIcon))\n    }\n\n    function genClearIcon() {\n      const propsData = {\n        class: 'v-input__clear',\n        onClick: () => {\n          !props.disabled && props.hasState && emit('clear')\n        }\n      }\n      return h('div', propsData, genIcon(icons.$close, true))\n    }\n\n    function genInputSlot() {\n      const propsData = {\n        class: 'v-input__slot',\n        onClick\n      }\n      return h('div', setTextColor(validationState.value!, propsData), [\n        genSlotContent(),\n        genStatus()\n      ])\n    }\n\n    function genSlotContent(): VNode {\n      const propsData = {\n        class: {\n          'v-input__field-slot': true\n        }\n      }\n\n      return h('div', propsData, [\n        props.prependIcon && genPrependIcon(),\n        !props.clearable && props.appendIcon && genAppendIcon(),\n        props.clearable && genClearIcon(),\n        genLabel(),\n        slots.textField && slots.textField()\n      ])\n    }\n\n    function genStatusMessage(): VNode {\n      const propsData = {\n        class: { 'v-input__status-message': true }\n      }\n\n      return h('span', propsData, errorState.innerErrorMessage!)\n    }\n\n    function genStatus(): VNode {\n      const transitionedMessage = useTransition(\n        errorState.innerErrorMessage! && (genStatusMessage() as VNode),\n        Transitions.FADE\n      )\n\n      const propsData = { class: 'v-input__status' }\n\n      return h('div', propsData, transitionedMessage)\n    }\n\n    onBeforeUnmount(() => {\n      if (fields?.value) {\n        fields!.value = fields!.value.filter((v) => v !== validateValue)\n      }\n    })\n\n    return () => {\n      const propsData = {\n        class: classes.value,\n        style: attrs.style\n      }\n      return h('div', propsData, genInputSlot())\n    }\n  }\n})\n"],"sourceRoot":"","file":"VInput.js"}