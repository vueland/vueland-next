import { defineComponent, h, computed } from 'vue';
import { useColors } from '../../composable/use-colors';
import { elevationProps, useElevation } from '../../composable/use-elevation';
import { usePosition } from '../../composable/use-position';
import { VProgressCircular } from '../VProgressCircular';
import { convertToUnit } from '../../helpers';
export default defineComponent({
    name: 'v-button',
    props: {
        disabled: Boolean,
        outlined: Boolean,
        rounded: Boolean,
        round: Boolean,
        absolute: Boolean,
        loading: Boolean,
        left: Boolean,
        right: Boolean,
        text: Boolean,
        dark: Boolean,
        label: String,
        width: [String, Number],
        height: [String, Number],
        color: {
            type: String,
            default: 'grey lighten-1',
        },
        ...elevationProps(),
    },
    emits: ['click'],
    setup(props, { slots, emit }) {
        const { setTextClassNameColor, setBackgroundClassNameColor, setBackgroundCssColor, setTextCssColor, } = useColors();
        const { elevationClasses } = useElevation(props);
        const { positionClasses } = usePosition(props);
        const isFlat = computed(() => {
            return props.text || props.outlined;
        });
        const isLoadable = computed(() => {
            return !props.text && !props.outlined && props.loading;
        });
        const isElevetable = computed(() => {
            return !isLoadable.value && !props.disabled;
        });
        const classes = computed(() => {
            const elevations = isElevetable.value ? elevationClasses.value : {};
            return {
                'v-button': true,
                'v-button--text': props.text || props.outlined,
                'v-button--outlined': props.outlined,
                'v-button--rounded': !props.round && props.rounded,
                'v-button--round': props.round,
                'v-button--disabled': props.disabled || isLoadable.value,
                'v-button--loading': props.loading,
                ...elevations,
                ...positionClasses.value,
                ...(props.color && isFlat.value
                    ? setTextClassNameColor(props.color)
                    : {}),
                ...(props.color && !isFlat.value
                    ? setBackgroundClassNameColor(props.color)
                    : {}),
            };
        });
        const styles = computed(() => {
            const width = props.width || 40;
            const height = props.round ? width : props.height ? props.height : '';
            console.log(height);
            return {
                width: (props.width || props.round) && convertToUnit(width),
                height: !!height && convertToUnit(height),
                ...(props.color && isFlat.value ? setTextCssColor(props.color) : {}),
                ...(props.color && !isFlat.value
                    ? setBackgroundCssColor(props.color)
                    : {}),
            };
        });
        const genLoader = () => {
            return h('span', {
                class: 'v-button__loader',
            }, (slots.loading && slots.loading()) ||
                h(VProgressCircular, {
                    indeterminate: true,
                    size: 23,
                    width: 2,
                }));
        };
        const genLabel = () => {
            return h('span', {
                class: 'v-button__label',
            }, props.label);
        };
        const genContent = () => {
            return h('div', { class: 'v-button__content' }, [(slots.default && slots.default()) || (props.label && genLabel())]);
        };
        return () => h('button', {
            class: classes.value,
            style: styles.value,
            onClick: () => !props.disabled && emit('click'),
        }, [genContent(), props.loading && genLoader()]);
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkJ1dHRvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1ZCdXR0b24vVkJ1dHRvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsZUFBZSxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxLQUFLLENBQUE7QUFHbEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDZCQUE2QixDQUFBO0FBQ3ZELE9BQU8sRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0NBQWdDLENBQUE7QUFDN0UsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLCtCQUErQixDQUFBO0FBRzNELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFBO0FBTXhELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFFN0MsZUFBZSxlQUFlLENBQUM7SUFDN0IsSUFBSSxFQUFFLFVBQVU7SUFDaEIsS0FBSyxFQUFFO1FBQ0wsUUFBUSxFQUFFLE9BQU87UUFDakIsUUFBUSxFQUFFLE9BQU87UUFDakIsT0FBTyxFQUFFLE9BQU87UUFDaEIsS0FBSyxFQUFFLE9BQU87UUFDZCxRQUFRLEVBQUUsT0FBTztRQUNqQixPQUFPLEVBQUUsT0FBTztRQUNoQixJQUFJLEVBQUUsT0FBTztRQUNiLEtBQUssRUFBRSxPQUFPO1FBQ2QsSUFBSSxFQUFFLE9BQU87UUFDYixJQUFJLEVBQUUsT0FBTztRQUNiLEtBQUssRUFBRSxNQUFNO1FBQ2IsS0FBSyxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztRQUN2QixNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3hCLEtBQUssRUFBRTtZQUNMLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLGdCQUFnQjtTQUMxQjtRQUNELEdBQUcsY0FBYyxFQUFFO0tBQ2I7SUFDUixLQUFLLEVBQUUsQ0FBQyxPQUFPLENBQUM7SUFFaEIsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7UUFDMUIsTUFBTSxFQUNKLHFCQUFxQixFQUNyQiwyQkFBMkIsRUFDM0IscUJBQXFCLEVBQ3JCLGVBQWUsR0FDaEIsR0FBRyxTQUFTLEVBQUUsQ0FBQTtRQUVmLE1BQU0sRUFBRSxnQkFBZ0IsRUFBRSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUVoRCxNQUFNLEVBQUUsZUFBZSxFQUFFLEdBQUcsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBRTlDLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBVSxHQUFHLEVBQUU7WUFDcEMsT0FBTyxLQUFLLENBQUMsSUFBSSxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUE7UUFDckMsQ0FBQyxDQUFDLENBQUE7UUFFRixNQUFNLFVBQVUsR0FBRyxRQUFRLENBQVUsR0FBRyxFQUFFO1lBQ3hDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQ3hELENBQUMsQ0FBQyxDQUFBO1FBRUYsTUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFVLEdBQUcsRUFBRTtZQUMxQyxPQUFPLENBQUMsVUFBVSxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUE7UUFDN0MsQ0FBQyxDQUFDLENBQUE7UUFFRixNQUFNLE9BQU8sR0FBRyxRQUFRLENBQTBCLEdBQUcsRUFBRTtZQUNyRCxNQUFNLFVBQVUsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtZQUVuRSxPQUFPO2dCQUNMLFVBQVUsRUFBRSxJQUFJO2dCQUNoQixnQkFBZ0IsRUFBRSxLQUFLLENBQUMsSUFBSSxJQUFJLEtBQUssQ0FBQyxRQUFRO2dCQUM5QyxvQkFBb0IsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDcEMsbUJBQW1CLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxPQUFPO2dCQUNsRCxpQkFBaUIsRUFBRSxLQUFLLENBQUMsS0FBSztnQkFDOUIsb0JBQW9CLEVBQUUsS0FBSyxDQUFDLFFBQVEsSUFBSSxVQUFVLENBQUMsS0FBSztnQkFDeEQsbUJBQW1CLEVBQUUsS0FBSyxDQUFDLE9BQU87Z0JBQ2xDLEdBQUcsVUFBVTtnQkFDYixHQUFHLGVBQWUsQ0FBQyxLQUFLO2dCQUN4QixHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxNQUFNLENBQUMsS0FBSztvQkFDN0IsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7b0JBQ3BDLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQ1AsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSztvQkFDOUIsQ0FBQyxDQUFDLDJCQUEyQixDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7b0JBQzFDLENBQUMsQ0FBQyxFQUFFLENBQUM7YUFDUixDQUFBO1FBQ0gsQ0FBQyxDQUFDLENBQUE7UUFFRixNQUFNLE1BQU0sR0FBRyxRQUFRLENBQXNCLEdBQUcsRUFBRTtZQUNoRCxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQTtZQUMvQixNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQTtZQUVwRSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBRW5CLE9BQU87Z0JBQ0wsS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksYUFBYSxDQUFDLEtBQUssQ0FBQztnQkFDM0QsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLElBQUksYUFBYSxDQUFDLE1BQU0sQ0FBQztnQkFDekMsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUNwRSxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLO29CQUM5QixDQUFDLENBQUMscUJBQXFCLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztvQkFDcEMsQ0FBQyxDQUFDLEVBQUUsQ0FBQzthQUNSLENBQUE7UUFDSCxDQUFDLENBQUMsQ0FBQTtRQUVGLE1BQU0sU0FBUyxHQUFHLEdBQVUsRUFBRTtZQUM1QixPQUFPLENBQUMsQ0FDTixNQUFNLEVBQ047Z0JBQ0UsS0FBSyxFQUFFLGtCQUFrQjthQUMxQixFQUNELENBQUMsS0FBSyxDQUFDLE9BQU8sSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ2xDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRTtvQkFDbkIsYUFBYSxFQUFFLElBQUk7b0JBQ25CLElBQUksRUFBRSxFQUFFO29CQUNSLEtBQUssRUFBRSxDQUFDO2lCQUNULENBQUMsQ0FDSCxDQUFBO1FBQ0gsQ0FBQyxDQUFBO1FBRUQsTUFBTSxRQUFRLEdBQUcsR0FBVSxFQUFFO1lBQzNCLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRTtnQkFDZixLQUFLLEVBQUUsaUJBQWlCO2FBQ3pCLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBQ2pCLENBQUMsQ0FBQTtRQUVELE1BQU0sVUFBVSxHQUFHLEdBQVUsRUFBRTtZQUM3QixPQUFPLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsRUFDNUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxJQUFJLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FDcEUsQ0FBQTtRQUNILENBQUMsQ0FBQTtRQUVELE9BQU8sR0FBRyxFQUFFLENBQ1YsQ0FBQyxDQUFDLFFBQVEsRUFBRTtZQUNSLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSztZQUNwQixLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUs7WUFDbkIsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDO1NBQ2hELEVBQ0QsQ0FBQyxVQUFVLEVBQUUsRUFBRSxLQUFLLENBQUMsT0FBTyxJQUFJLFNBQVMsRUFBRSxDQUFDLENBQzdDLENBQUE7SUFDTCxDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVnVlIEFQSVxuaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBoLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuLy8gQ29tcG9zYWJsZVxuaW1wb3J0IHsgdXNlQ29sb3JzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZS91c2UtY29sb3JzJ1xuaW1wb3J0IHsgZWxldmF0aW9uUHJvcHMsIHVzZUVsZXZhdGlvbiB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGUvdXNlLWVsZXZhdGlvbidcbmltcG9ydCB7IHVzZVBvc2l0aW9uIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZS91c2UtcG9zaXRpb24nXG5cbi8vIENvbXBvbmVudHNcbmltcG9ydCB7IFZQcm9ncmVzc0NpcmN1bGFyIH0gZnJvbSAnLi4vVlByb2dyZXNzQ2lyY3VsYXInXG5cbi8vIFR5cGVzXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3Z1ZSdcblxuLy8gSGVscGVyc1xuaW1wb3J0IHsgY29udmVydFRvVW5pdCB9IGZyb20gJy4uLy4uL2hlbHBlcnMnXG5cbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7XG4gIG5hbWU6ICd2LWJ1dHRvbicsXG4gIHByb3BzOiB7XG4gICAgZGlzYWJsZWQ6IEJvb2xlYW4sXG4gICAgb3V0bGluZWQ6IEJvb2xlYW4sXG4gICAgcm91bmRlZDogQm9vbGVhbixcbiAgICByb3VuZDogQm9vbGVhbixcbiAgICBhYnNvbHV0ZTogQm9vbGVhbixcbiAgICBsb2FkaW5nOiBCb29sZWFuLFxuICAgIGxlZnQ6IEJvb2xlYW4sXG4gICAgcmlnaHQ6IEJvb2xlYW4sXG4gICAgdGV4dDogQm9vbGVhbixcbiAgICBkYXJrOiBCb29sZWFuLFxuICAgIGxhYmVsOiBTdHJpbmcsXG4gICAgd2lkdGg6IFtTdHJpbmcsIE51bWJlcl0sXG4gICAgaGVpZ2h0OiBbU3RyaW5nLCBOdW1iZXJdLFxuICAgIGNvbG9yOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnZ3JleSBsaWdodGVuLTEnLFxuICAgIH0sXG4gICAgLi4uZWxldmF0aW9uUHJvcHMoKSxcbiAgfSBhcyBhbnksXG4gIGVtaXRzOiBbJ2NsaWNrJ10sXG5cbiAgc2V0dXAocHJvcHMsIHsgc2xvdHMsIGVtaXQgfSk6ICgpID0+IFZOb2RlIHtcbiAgICBjb25zdCB7XG4gICAgICBzZXRUZXh0Q2xhc3NOYW1lQ29sb3IsXG4gICAgICBzZXRCYWNrZ3JvdW5kQ2xhc3NOYW1lQ29sb3IsXG4gICAgICBzZXRCYWNrZ3JvdW5kQ3NzQ29sb3IsXG4gICAgICBzZXRUZXh0Q3NzQ29sb3IsXG4gICAgfSA9IHVzZUNvbG9ycygpXG5cbiAgICBjb25zdCB7IGVsZXZhdGlvbkNsYXNzZXMgfSA9IHVzZUVsZXZhdGlvbihwcm9wcylcblxuICAgIGNvbnN0IHsgcG9zaXRpb25DbGFzc2VzIH0gPSB1c2VQb3NpdGlvbihwcm9wcylcblxuICAgIGNvbnN0IGlzRmxhdCA9IGNvbXB1dGVkPGJvb2xlYW4+KCgpID0+IHtcbiAgICAgIHJldHVybiBwcm9wcy50ZXh0IHx8IHByb3BzLm91dGxpbmVkXG4gICAgfSlcblxuICAgIGNvbnN0IGlzTG9hZGFibGUgPSBjb21wdXRlZDxib29sZWFuPigoKSA9PiB7XG4gICAgICByZXR1cm4gIXByb3BzLnRleHQgJiYgIXByb3BzLm91dGxpbmVkICYmIHByb3BzLmxvYWRpbmdcbiAgICB9KVxuXG4gICAgY29uc3QgaXNFbGV2ZXRhYmxlID0gY29tcHV0ZWQ8Ym9vbGVhbj4oKCkgPT4ge1xuICAgICAgcmV0dXJuICFpc0xvYWRhYmxlLnZhbHVlICYmICFwcm9wcy5kaXNhYmxlZFxuICAgIH0pXG5cbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQ8UmVjb3JkPHN0cmluZywgYm9vbGVhbj4+KCgpID0+IHtcbiAgICAgIGNvbnN0IGVsZXZhdGlvbnMgPSBpc0VsZXZldGFibGUudmFsdWUgPyBlbGV2YXRpb25DbGFzc2VzLnZhbHVlIDoge31cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJ3YtYnV0dG9uJzogdHJ1ZSxcbiAgICAgICAgJ3YtYnV0dG9uLS10ZXh0JzogcHJvcHMudGV4dCB8fCBwcm9wcy5vdXRsaW5lZCxcbiAgICAgICAgJ3YtYnV0dG9uLS1vdXRsaW5lZCc6IHByb3BzLm91dGxpbmVkLFxuICAgICAgICAndi1idXR0b24tLXJvdW5kZWQnOiAhcHJvcHMucm91bmQgJiYgcHJvcHMucm91bmRlZCxcbiAgICAgICAgJ3YtYnV0dG9uLS1yb3VuZCc6IHByb3BzLnJvdW5kLFxuICAgICAgICAndi1idXR0b24tLWRpc2FibGVkJzogcHJvcHMuZGlzYWJsZWQgfHwgaXNMb2FkYWJsZS52YWx1ZSxcbiAgICAgICAgJ3YtYnV0dG9uLS1sb2FkaW5nJzogcHJvcHMubG9hZGluZyxcbiAgICAgICAgLi4uZWxldmF0aW9ucyxcbiAgICAgICAgLi4ucG9zaXRpb25DbGFzc2VzLnZhbHVlLFxuICAgICAgICAuLi4ocHJvcHMuY29sb3IgJiYgaXNGbGF0LnZhbHVlXG4gICAgICAgICAgPyBzZXRUZXh0Q2xhc3NOYW1lQ29sb3IocHJvcHMuY29sb3IpXG4gICAgICAgICAgOiB7fSksXG4gICAgICAgIC4uLihwcm9wcy5jb2xvciAmJiAhaXNGbGF0LnZhbHVlXG4gICAgICAgICAgPyBzZXRCYWNrZ3JvdW5kQ2xhc3NOYW1lQ29sb3IocHJvcHMuY29sb3IpXG4gICAgICAgICAgOiB7fSksXG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IHN0eWxlcyA9IGNvbXB1dGVkPFJlY29yZDxzdHJpbmcsIGFueT4+KCgpID0+IHtcbiAgICAgIGNvbnN0IHdpZHRoID0gcHJvcHMud2lkdGggfHwgNDBcbiAgICAgIGNvbnN0IGhlaWdodCA9IHByb3BzLnJvdW5kID8gd2lkdGg6IHByb3BzLmhlaWdodCA/IHByb3BzLmhlaWdodCA6ICcnXG5cbiAgICAgIGNvbnNvbGUubG9nKGhlaWdodClcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGg6IChwcm9wcy53aWR0aCB8fCBwcm9wcy5yb3VuZCkgJiYgY29udmVydFRvVW5pdCh3aWR0aCksXG4gICAgICAgIGhlaWdodDogISFoZWlnaHQgJiYgY29udmVydFRvVW5pdChoZWlnaHQpLFxuICAgICAgICAuLi4ocHJvcHMuY29sb3IgJiYgaXNGbGF0LnZhbHVlID8gc2V0VGV4dENzc0NvbG9yKHByb3BzLmNvbG9yKSA6IHt9KSxcbiAgICAgICAgLi4uKHByb3BzLmNvbG9yICYmICFpc0ZsYXQudmFsdWVcbiAgICAgICAgICA/IHNldEJhY2tncm91bmRDc3NDb2xvcihwcm9wcy5jb2xvcilcbiAgICAgICAgICA6IHt9KSxcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgZ2VuTG9hZGVyID0gKCk6IFZOb2RlID0+IHtcbiAgICAgIHJldHVybiBoKFxuICAgICAgICAnc3BhbicsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzczogJ3YtYnV0dG9uX19sb2FkZXInLFxuICAgICAgICB9LFxuICAgICAgICAoc2xvdHMubG9hZGluZyAmJiBzbG90cy5sb2FkaW5nKCkpIHx8XG4gICAgICAgIGgoVlByb2dyZXNzQ2lyY3VsYXIsIHtcbiAgICAgICAgICBpbmRldGVybWluYXRlOiB0cnVlLFxuICAgICAgICAgIHNpemU6IDIzLFxuICAgICAgICAgIHdpZHRoOiAyLFxuICAgICAgICB9KSxcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBnZW5MYWJlbCA9ICgpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnc3BhbicsIHtcbiAgICAgICAgY2xhc3M6ICd2LWJ1dHRvbl9fbGFiZWwnLFxuICAgICAgfSwgcHJvcHMubGFiZWwpXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuQ29udGVudCA9ICgpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2JywgeyBjbGFzczogJ3YtYnV0dG9uX19jb250ZW50JyB9LFxuICAgICAgICBbKHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpKSB8fCAocHJvcHMubGFiZWwgJiYgZ2VuTGFiZWwoKSldLFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoKSA9PlxuICAgICAgaCgnYnV0dG9uJywge1xuICAgICAgICAgIGNsYXNzOiBjbGFzc2VzLnZhbHVlLFxuICAgICAgICAgIHN0eWxlOiBzdHlsZXMudmFsdWUsXG4gICAgICAgICAgb25DbGljazogKCkgPT4gIXByb3BzLmRpc2FibGVkICYmIGVtaXQoJ2NsaWNrJyksXG4gICAgICAgIH0sXG4gICAgICAgIFtnZW5Db250ZW50KCksIHByb3BzLmxvYWRpbmcgJiYgZ2VuTG9hZGVyKCldLFxuICAgICAgKVxuICB9LFxufSlcbiJdfQ==