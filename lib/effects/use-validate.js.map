{"version":3,"sources":["../../../src/effects/use-validate.ts"],"names":[],"mappings":"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","sourcesContent":["import { reactive, computed } from 'vue'\n\nexport const validateProps = () => {\n  return {\n    rules: {\n      type: Array,\n      default: null,\n    },\n    value: [String, Number],\n  }\n}\n\nexport function useValidate(props) {\n  const errorState = reactive({\n    innerError: null,\n    innerErrorMessage: null,\n    isDirty: false,\n  })\n\n  const validateClasses = () => {\n    return {\n      'v-validatable': true,\n    }\n  }\n\n  const computedColor = computed<string | undefined>(() => {\n    if (props.disabled) return undefined\n    if (props.color) return props.color\n    if (props.dark) return 'white'\n  })\n\n  const validationState = computed<string | undefined>(() => {\n    if (errorState.innerError) return 'danger'\n    if (!errorState.innerError && errorState.innerError !== null)\n      return 'success'\n    return computedColor.value || 'primary'\n  })\n\n  const hasRules = computed<boolean>(() => {\n    return (\n      props.rules !== void 0 && props.rules !== null && props.rules.length > 0\n    )\n  })\n\n  const focused = () => {\n    errorState.isDirty = true\n  }\n\n  const update = (err, msg = null) => {\n    if (errorState.innerError !== err) {\n      errorState.innerError = err\n    }\n\n    if (msg && errorState.innerErrorMessage !== msg) {\n      errorState.innerErrorMessage = msg\n    }\n\n    if (!msg) errorState.innerErrorMessage = msg\n  }\n\n  const validate = (val = props.value): boolean | void => {\n    if (!hasRules.value) return true\n\n    focused()\n\n    for (let i = 0, len = props.rules.length; i < len; i += 1) {\n      const rule = props.rules[i]\n\n      let result\n\n      if (typeof rule === 'function') {\n        result = rule(val)\n      }\n\n      if (result === false || typeof result === 'string') {\n        update(true, result)\n        return false\n      }\n\n      if (result === true && i === len - 1) {\n        update(false)\n        return true\n      }\n    }\n  }\n\n  return {\n    validate,\n    focused,\n    update,\n    validateClasses,\n    computedColor,\n    validationState,\n    errorState,\n  }\n}\n"],"sourceRoot":"","file":"use-validate.js"}