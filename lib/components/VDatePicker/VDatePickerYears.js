import { h, ref, watchEffect, inject, computed, defineComponent } from 'vue';
import { genTableRows } from './helpers';
import { useTransition } from '../../composable/use-transition';
export const VDatePickerYears = defineComponent({
    name: 'v-date-picker-years',
    props: {
        year: [Number, String],
    },
    emits: ['update:year'],
    setup(props, { emit }) {
        const LIMIT = 100;
        const ON_TABLE = 20;
        const CELLS_IN_ROW = 4;
        const CURRENT_YEAR = new Date().getFullYear();
        const ANIMATION_TIMEOUT = 100;
        const years = ref([]);
        const onTableIndex = ref(0);
        const isListChanged = ref(false);
        const transition = ref('');
        const handlers = inject('handlers');
        watchEffect(() => isListChanged.value &&
            setTimeout(() => {
                isListChanged.value = false;
            }, ANIMATION_TIMEOUT));
        const computedYear = computed({
            get() {
                return +props.year || CURRENT_YEAR;
            },
            set(val) {
                emit('update:year', val);
            },
        });
        if (handlers?.value) {
            handlers.value = {
                onNext: () => changeYearsList(true),
                onPrev: () => changeYearsList(false),
            };
        }
        const setCurrentTransition = (isNext) => {
            transition.value = isNext ? 'fade-in-down' : 'fade-in-up';
        };
        const setTableIndex = () => {
            onTableIndex.value = years.value.findIndex((row) => {
                return row.find((year) => year === computedYear.value);
            });
        };
        const changeYearsList = (isNext) => {
            const max = years.value.length - 1;
            const val = isNext ? 1 : -1;
            if ((onTableIndex.value === max && val > 0) ||
                (onTableIndex.value === 0 && val < 0))
                return;
            setCurrentTransition(isNext);
            onTableIndex.value += val;
            isListChanged.value = true;
        };
        const genTableYears = () => {
            const fromYear = CURRENT_YEAR - LIMIT;
            const maxYears = LIMIT * 2;
            let yearsList = [];
            for (let i = 0; i <= maxYears; i += 1) {
                if (yearsList.length === ON_TABLE) {
                    years.value.push(yearsList);
                    yearsList = [];
                }
                yearsList.push(fromYear + i);
            }
        };
        const genYearCell = (year) => {
            const isSelected = year === computedYear.value;
            const propsData = {
                class: {
                    'v-date-picker-years__cell': true,
                    'v-date-picker-years__cell--selected': isSelected,
                    'v-date-picker-years__cell--current-year': year === CURRENT_YEAR,
                },
                onClick: () => (computedYear.value = year),
            };
            return h('div', propsData, year);
        };
        const genYearsRows = () => {
            const currentYears = years.value[onTableIndex.value];
            const yearsVNodes = currentYears.map(genYearCell);
            return genTableRows(yearsVNodes, 'v-date-picker-years__row', CELLS_IN_ROW);
        };
        const genYears = () => {
            const propsData = { class: 'v-date-picker-years__years' };
            return ((!isListChanged.value && h('div', propsData, genYearsRows())) || null);
        };
        genTableYears();
        setTableIndex();
        return () => {
            const content = useTransition(genYears(), transition.value);
            const propsData = { class: { 'v-date-picker-years': true } };
            return h('div', propsData, content);
        };
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkRhdGVQaWNrZXJZZWFycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1ZEYXRlUGlja2VyL1ZEYXRlUGlja2VyWWVhcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLE1BQU0sS0FBSyxDQUFBO0FBRzVFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxXQUFXLENBQUE7QUFPeEMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGlDQUFpQyxDQUFBO0FBRS9ELE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLGVBQWUsQ0FBQztJQUM5QyxJQUFJLEVBQUUscUJBQXFCO0lBRTNCLEtBQUssRUFBRTtRQUNMLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7S0FDaEI7SUFFUixLQUFLLEVBQUUsQ0FBQyxhQUFhLENBQUM7SUFFdEIsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRTtRQUNuQixNQUFNLEtBQUssR0FBRyxHQUFHLENBQUE7UUFDakIsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFBO1FBQ25CLE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBQTtRQUN0QixNQUFNLFlBQVksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFBO1FBQzdDLE1BQU0saUJBQWlCLEdBQUcsR0FBRyxDQUFBO1FBRTdCLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBa0IsRUFBRSxDQUFDLENBQUE7UUFDdEMsTUFBTSxZQUFZLEdBQUcsR0FBRyxDQUFTLENBQUMsQ0FBQyxDQUFBO1FBQ25DLE1BQU0sYUFBYSxHQUFHLEdBQUcsQ0FBVSxLQUFLLENBQUMsQ0FBQTtRQUN6QyxNQUFNLFVBQVUsR0FBRyxHQUFHLENBQVMsRUFBRSxDQUFDLENBQUE7UUFFbEMs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QUMsQ0FBQTtZQUNwRSxNQUFNLFNBQVMsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLHFCQUFxQixFQUFFLElBQUksRUFBRSxFQUFFLENBQUE7WUFFNUQsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUNyQyxDQUFDLENBQUE7SUFDSCxDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVlVlIEFQSVxuaW1wb3J0IHsgaCwgcmVmLCB3YXRjaEVmZmVjdCwgaW5qZWN0LCBjb21wdXRlZCwgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJ1xuXG4vLyBIZWxwZXJzXG5pbXBvcnQgeyBnZW5UYWJsZVJvd3MgfSBmcm9tICcuL2hlbHBlcnMnXG5cbi8vIFR5cGVzXG5pbXBvcnQgeyBWTm9kZSwgUmVmIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHsgRGF0ZVBpY2tlckJ0bkhhbmRsZXJzIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMnXG5cbi8vIEVmZmVjdHNcbmltcG9ydCB7IHVzZVRyYW5zaXRpb24gfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlL3VzZS10cmFuc2l0aW9uJ1xuXG5leHBvcnQgY29uc3QgVkRhdGVQaWNrZXJZZWFycyA9IGRlZmluZUNvbXBvbmVudCh7XG4gIG5hbWU6ICd2LWRhdGUtcGlja2VyLXllYXJzJyxcblxuICBwcm9wczoge1xuICAgIHllYXI6IFtOdW1iZXIsIFN0cmluZ10sXG4gIH0gYXMgYW55LFxuXG4gIGVtaXRzOiBbJ3VwZGF0ZTp5ZWFyJ10sXG5cbiAgc2V0dXAocHJvcHMsIHsgZW1pdCB9KSB7XG4gICAgY29uc3QgTElNSVQgPSAxMDBcbiAgICBjb25zdCBPTl9UQUJMRSA9IDIwXG4gICAgY29uc3QgQ0VMTFNfSU5fUk9XID0gNFxuICAgIGNvbnN0IENVUlJFTlRfWUVBUiA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IEFOSU1BVElPTl9USU1FT1VUID0gMTAwXG5cbiAgICBjb25zdCB5ZWFycyA9IHJlZjxBcnJheTxudW1iZXJbXT4+KFtdKVxuICAgIGNvbnN0IG9uVGFibGVJbmRleCA9IHJlZjxudW1iZXI+KDApXG4gICAgY29uc3QgaXNMaXN0Q2hhbmdlZCA9IHJlZjxib29sZWFuPihmYWxzZSlcbiAgICBjb25zdCB0cmFuc2l0aW9uID0gcmVmPHN0cmluZz4oJycpXG5cbiAgICBjb25zdCBoYW5kbGVycyA9IGluamVjdCgnaGFuZGxlcnMnKSBhcyBSZWY8RGF0ZVBpY2tlckJ0bkhhbmRsZXJzPlxuXG4gICAgd2F0Y2hFZmZlY3QoXG4gICAgICAoKSA9PlxuICAgICAgICBpc0xpc3RDaGFuZ2VkLnZhbHVlICYmXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlzTGlzdENoYW5nZWQudmFsdWUgPSBmYWxzZVxuICAgICAgICB9LCBBTklNQVRJT05fVElNRU9VVClcbiAgICApXG5cbiAgICBjb25zdCBjb21wdXRlZFllYXIgPSBjb21wdXRlZDxudW1iZXI+KHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuICtwcm9wcy55ZWFyISB8fCBDVVJSRU5UX1lFQVJcbiAgICAgIH0sXG4gICAgICBzZXQodmFsOiBudW1iZXIpIHtcbiAgICAgICAgZW1pdCgndXBkYXRlOnllYXInLCB2YWwpXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICBpZiAoaGFuZGxlcnM/LnZhbHVlKSB7XG4gICAgICBoYW5kbGVycy52YWx1ZSA9IHtcbiAgICAgICAgb25OZXh0OiAoKSA9PiBjaGFuZ2VZZWFyc0xpc3QodHJ1ZSksXG4gICAgICAgIG9uUHJldjogKCkgPT4gY2hhbmdlWWVhcnNMaXN0KGZhbHNlKSxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZXRDdXJyZW50VHJhbnNpdGlvbiA9IChpc05leHQpID0+IHtcbiAgICAgIHRyYW5zaXRpb24udmFsdWUgPSBpc05leHQgPyAnZmFkZS1pbi1kb3duJyA6ICdmYWRlLWluLXVwJ1xuICAgIH1cblxuICAgIGNvbnN0IHNldFRhYmxlSW5kZXggPSAoKSA9PiB7XG4gICAgICBvblRhYmxlSW5kZXgudmFsdWUgPSB5ZWFycy52YWx1ZS5maW5kSW5kZXgoKHJvdykgPT4ge1xuICAgICAgICByZXR1cm4gcm93LmZpbmQoKHllYXIpID0+IHllYXIgPT09IGNvbXB1dGVkWWVhci52YWx1ZSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlWWVhcnNMaXN0ID0gKGlzTmV4dCkgPT4ge1xuICAgICAgY29uc3QgbWF4ID0geWVhcnMudmFsdWUubGVuZ3RoIC0gMVxuICAgICAgY29uc3QgdmFsID0gaXNOZXh0ID8gMSA6IC0xXG5cbiAgICAgIGlmIChcbiAgICAgICAgKG9uVGFibGVJbmRleC52YWx1ZSA9PT0gbWF4ICYmIHZhbCA+IDApIHx8XG4gICAgICAgIChvblRhYmxlSW5kZXgudmFsdWUgPT09IDAgJiYgdmFsIDwgMClcbiAgICAgIClcbiAgICAgICAgcmV0dXJuXG5cbiAgICAgIHNldEN1cnJlbnRUcmFuc2l0aW9uKGlzTmV4dClcblxuICAgICAgb25UYWJsZUluZGV4LnZhbHVlICs9IHZhbFxuICAgICAgaXNMaXN0Q2hhbmdlZC52YWx1ZSA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBnZW5UYWJsZVllYXJzID0gKCkgPT4ge1xuICAgICAgY29uc3QgZnJvbVllYXIgPSBDVVJSRU5UX1lFQVIgLSBMSU1JVFxuICAgICAgY29uc3QgbWF4WWVhcnMgPSBMSU1JVCAqIDJcblxuICAgICAgbGV0IHllYXJzTGlzdDogbnVtYmVyW10gPSBbXVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBtYXhZZWFyczsgaSArPSAxKSB7XG4gICAgICAgIGlmICh5ZWFyc0xpc3QubGVuZ3RoID09PSBPTl9UQUJMRSkge1xuICAgICAgICAgIHllYXJzLnZhbHVlLnB1c2goeWVhcnNMaXN0KVxuICAgICAgICAgIHllYXJzTGlzdCA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgeWVhcnNMaXN0LnB1c2goZnJvbVllYXIgKyBpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGdlblllYXJDZWxsID0gKHllYXIpOiBWTm9kZSA9PiB7XG4gICAgICBjb25zdCBpc1NlbGVjdGVkID0geWVhciA9PT0gY29tcHV0ZWRZZWFyLnZhbHVlXG4gICAgICBjb25zdCBwcm9wc0RhdGEgPSB7XG4gICAgICAgIGNsYXNzOiB7XG4gICAgICAgICAgJ3YtZGF0ZS1waWNrZXIteWVhcnNfX2NlbGwnOiB0cnVlLFxuICAgICAgICAgICd2LWRhdGUtcGlja2VyLXllYXJzX19jZWxsLS1zZWxlY3RlZCc6IGlzU2VsZWN0ZWQsXG4gICAgICAgICAgJ3YtZGF0ZS1waWNrZXIteWVhcnNfX2NlbGwtLWN1cnJlbnQteWVhcic6IHllYXIgPT09IENVUlJFTlRfWUVBUixcbiAgICAgICAgfSxcbiAgICAgICAgb25DbGljazogKCkgPT4gKGNvbXB1dGVkWWVhci52YWx1ZSA9IHllYXIpLFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaCgnZGl2JywgcHJvcHNEYXRhLCB5ZWFyKVxuICAgIH1cblxuICAgIGNvbnN0IGdlblllYXJzUm93cyA9ICgpOiBWTm9kZVtdID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRZZWFycyA9IHllYXJzLnZhbHVlW29uVGFibGVJbmRleC52YWx1ZV1cbiAgICAgIGNvbnN0IHllYXJzVk5vZGVzID0gY3VycmVudFllYXJzLm1hcChnZW5ZZWFyQ2VsbClcblxuICAgICAgcmV0dXJuIGdlblRhYmxlUm93cyh5ZWFyc1ZOb2RlcywgJ3YtZGF0ZS1waWNrZXIteWVhcnNfX3JvdycsIENFTExTX0lOX1JPVylcbiAgICB9XG5cbiAgICBjb25zdCBnZW5ZZWFycyA9ICgpOiBWTm9kZSB8IG51bGwgPT4ge1xuICAgICAgY29uc3QgcHJvcHNEYXRhID0geyBjbGFzczogJ3YtZGF0ZS1waWNrZXIteWVhcnNfX3llYXJzJyB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICAoIWlzTGlzdENoYW5nZWQudmFsdWUgJiYgaCgnZGl2JywgcHJvcHNEYXRhLCBnZW5ZZWFyc1Jvd3MoKSkpIHx8IG51bGxcbiAgICAgIClcbiAgICB9XG5cbiAgICBnZW5UYWJsZVllYXJzKClcbiAgICBzZXRUYWJsZUluZGV4KClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZW50ID0gdXNlVHJhbnNpdGlvbihnZW5ZZWFycygpIGFzIFZOb2RlLCB0cmFuc2l0aW9uLnZhbHVlKVxuICAgICAgY29uc3QgcHJvcHNEYXRhID0geyBjbGFzczogeyAndi1kYXRlLXBpY2tlci15ZWFycyc6IHRydWUgfSB9XG5cbiAgICAgIHJldHVybiBoKCdkaXYnLCBwcm9wc0RhdGEsIGNvbnRlbnQpXG4gICAgfVxuICB9LFxufSlcbiJdfQ==