{"version":3,"sources":["../../../src/effects/use-overlay.ts"],"names":[],"mappings":";;;;;;;;AAAA;;AAGA;;AAOA;;AAEM,SAAU,YAAV,GAAsB;AAC1B,SAAO;AACL,IAAA,OAAO,EAAE,OADJ;AAEL,IAAA,cAAc,EAAE,CAAC,MAAD,EAAS,MAAT,CAFX;AAGL,IAAA,YAAY,EAAE;AACZ,MAAA,IAAI,EAAE,MADM;AAEZ,iBAAS,oBAAK;AACZ,eAAO,OAAP;AACD;AAJW;AAHT,GAAP;AAUD;;AAOK,SAAU,UAAV,CAAqB,KAArB,EAAmC,SAAnC,EAAqD;AACzD,MAAM,GAAG,GAAG,QAAZ;AAEA,MAAI,WAAJ;AAEA,EAAA,qBAAqB,CAAC,YAAK;AACzB,IAAA,WAAW,GAAG,CAAC,CAAC,SAAF,IAAe,GAAG,CAAC,aAAJ,YAAsB,SAAtB,EAA7B;AACD,GAFoB,CAArB;AAIA,MAAM,kBAAkB,GAAU;AAChC,IAAA,MAAM,EAAE,KADwB;AAEhC,IAAA,IAAI,EAAE,IAF0B;AAGhC,IAAA,KAAK,EAAE,KAAK,CAAC;AAHmB,GAAlC;AAMA,MAAM,SAAS,GAAG,GAAG,CAAC,aAAJ,CAAkB,KAAlB,CAAlB;;AAEA,MAAM,YAAY,GAAG,SAAf,YAAe;AAAA,WACnB,qBAAS,KAAT,CACE,kBADF,EAEE,EAFF,CADmB;AAAA,GAArB;;AAMA,MAAM,aAAa,GAAG,SAAhB,aAAgB,CAAA,KAAK;AAAA,WAAI,iBAAO,KAAP,EAAc,SAAd,CAAJ;AAAA,GAA3B;;AAEA,EAAA,aAAa,CAAC,YAAY,EAAb,CAAb;AAEA,MAAM,cAAc,GAAG,SAAS,CAAC,UAAjC;;AAEA,WAAS,aAAT,GAAsB;AACpB,IAAA,WAAW,CAAC,UAAZ,CAAuB,YAAvB,CAAoC,cAApC,EAAoD,WAApD;AAEA,IAAA,UAAU,CAAC,YAAK;AACd,MAAA,kBAAkB,CAAC,MAAnB,GAA4B,IAA5B;AACA,MAAA,kBAAkB,CAAC,IAAnB,GAA0B,CAAC,KAAK,CAAC,OAAjC;AACA,MAAA,aAAa,CAAC,YAAY,EAAb,CAAb;AACD,KAJS,EAIP,EAJO,CAAV;AAKD;;AAED,WAAS,aAAT,GAAsB;AACpB,IAAA,kBAAkB,CAAC,MAAnB,GAA4B,KAA5B;AAEA,IAAA,aAAa,CAAC,YAAY,EAAb,CAAb;;AAEA,aAAS,MAAT,GAAe;AACb,MAAA,WAAW,CAAC,UAAZ,CAAuB,WAAvB,CAAmC,cAAnC;AACD;;AAED,kCAAgB,cAAhB,EAAiC,eAAjC,EAAkD,MAAlD;AACD;;AAED,SAAO;AACL,IAAA,aAAa,EAAb,aADK;AAEL,IAAA,aAAa,EAAb;AAFK,GAAP;AAID","sourcesContent":["import { render } from 'vue'\n\n// Components\nimport { VOverlay } from '../components'\n\n// Types\nimport { Props } from '../types'\nimport { SetupContext } from 'vue'\n\n// Helpers\nimport { addOnceListener } from '@/helpers'\n\nexport function overlayProps(): Props {\n  return {\n    overlay: Boolean,\n    overlayOpacity: [Number, String],\n    overlayColor: {\n      type: String,\n      default: () => {\n        return 'white'\n      },\n    },\n  }\n}\n\ninterface Overlayable {\n  createOverlay: () => void\n  removeOverlay: () => void\n}\n\nexport function useOverlay(props: Props, overlayOn?: string): Overlayable {\n  const doc = document\n\n  let overlayable\n\n  requestAnimationFrame(() => {\n    overlayable = !!overlayOn && doc.querySelector(`.${overlayOn}`)\n  })\n\n  const overlayPropsObject: Props = {\n    active: false,\n    hide: true,\n    color: props.overlayColor,\n  }\n\n  const container = doc.createElement('div')\n\n  const overlayVNode = () =>\n    VOverlay.setup!(\n      overlayPropsObject as typeof VOverlay.props,\n      {} as SetupContext,\n    )\n\n  const renderOverlay = vNode => render(vNode, container!)\n\n  renderOverlay(overlayVNode())\n\n  const overlayElement = container.firstChild\n\n  function createOverlay() {\n    overlayable.parentNode.insertBefore(overlayElement, overlayable)\n\n    setTimeout(() => {\n      overlayPropsObject.active = true\n      overlayPropsObject.hide = !props.overlay\n      renderOverlay(overlayVNode())\n    }, 40)\n  }\n\n  function removeOverlay(): void {\n    overlayPropsObject.active = false\n\n    renderOverlay(overlayVNode())\n\n    function remove() {\n      overlayable.parentNode.removeChild(overlayElement)\n    }\n\n    addOnceListener(overlayElement!, 'transitionend', remove)\n  }\n\n  return {\n    createOverlay,\n    removeOverlay,\n  }\n}\n"],"sourceRoot":"","file":"use-overlay.js"}