import { defineComponent, h, withDirectives, ref, watch, computed, vShow } from 'vue';
import { ExpandTransition } from '../transitions';
import { VIcon } from '../VIcon';
import { useColors, colorProps } from '../../composable/use-colors';
import { useIcons } from '../../composable/use-icons';
export default defineComponent({
    name: 'v-group',
    props: {
        expand: Boolean,
        subgroup: Boolean,
        title: {
            type: String,
            default: '',
        },
        activeClass: {
            type: String,
            default: 'main--text text--evo',
        },
        prependIcon: {
            type: String,
            default: '',
        },
        appendIcon: {
            type: String,
            default: '',
        },
        ...colorProps(),
    },
    setup(props, { slots }) {
        const { icons } = useIcons();
        const { setBackgroundCssColor, setBackgroundClassNameColor } = useColors();
        const isActive = ref(false);
        const classes = computed(() => ({
            'v-group': true,
            'v-group--subgroup': props.subgroup,
            'v-group--active': isActive.value,
            'v-group--default': !isActive.value,
            [props.activeClass]: !!props.activeClass && isActive.value,
            ...setBackgroundClassNameColor(props.color),
        }));
        const styles = computed(() => ({
            ...setBackgroundCssColor(props.color),
        }));
        const genHeaderContent = () => {
            const content = props.title || slots.header?.();
            return h('div', {
                class: 'v-group__header-content',
            }, content);
        };
        const genExpandIcon = (icon) => {
            return h('div', {
                class: 'v-group__expand-icon',
            }, icon);
        };
        const genSubExpandIcon = (icon) => {
            return h('div', {
                class: 'v-group__sub-expand-icon',
            }, icon);
        };
        const genPrependIcon = (icon) => {
            return h('div', {
                class: 'v-group__prepend-icon',
            }, icon);
        };
        const genAppendIcon = (icon) => {
            return h('div', {
                class: 'v-group__append-icon',
            }, icon);
        };
        const genIcon = (iconName) => {
            return h(VIcon, {
                icon: iconName,
                size: 16,
            });
        };
        const genGroupHeader = () => {
            return h('div', {
                class: 'v-group__header',
                onClick: () => isActive.value = !isActive.value,
            }, [
                props.subgroup && genSubExpandIcon(genIcon(icons.$caretDown)),
                props.prependIcon && genPrependIcon(genIcon(props.prependIcon)),
                genHeaderContent(),
                props.appendIcon && genAppendIcon(genIcon(props.appendIcon)),
                !props.subgroup && genExpandIcon(genIcon(icons.$chevronDown)),
            ]);
        };
        const genGroupChildContent = () => {
            return withDirectives(h('div', {
                class: 'v-group__content',
            }, {
                default: () => slots.default?.(),
            }), [[vShow, isActive.value]]);
        };
        watch(() => props.expand, to => isActive.value = to, { immediate: true });
        return () => h('div', {
            class: classes.value,
            style: styles.value,
        }, [
            genGroupHeader(),
            ExpandTransition(genGroupChildContent()),
        ]);
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkdyb3VwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVkdyb3VwL1ZHcm91cC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFFLENBQUMsRUFBRSxjQUFjLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFTLE1BQU0sS0FBSyxDQUFBO0FBQzVGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGdCQUFnQixDQUFBO0FBRWpELE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFFaEMsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQTtBQUNuRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sNEJBQTRCLENBQUE7QUFFckQsZUFBZSxlQUFlLENBQUM7SUFDN0IsSUFBSSxFQUFFLFNBQVM7SUFDZixLQUFLLEVBQUU7UUFDTCxNQUFNLEVBQUUsT0FBTztRQUNmLFFBQVEsRUFBRSxPQUFPO1FBQ2pCLEtBQUssRUFBRTtZQUNMLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLEVBQUU7U0FDWjtRQUNELFdBQVcsRUFBRTtZQUNYLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLHNCQUFzQjtTQUNoQztRQUNELFdBQVcsRUFBRTtZQUNYLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLEVBQUU7U0FDWjtRQUNELFVBQVUsRUFBRTtZQUNWLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLEVBQUU7U0FDWjtRQUNELEdBQUcsVUFBVSxFQUFFO0tBQ2hCO0lBQ0QsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRTtRQUNwQixNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsUUFBUSxFQUFFLENBQUE7UUFDNUIsTUFBTSxFQUFFLHFCQUFxQixFQUFFLDJCQUEyQixF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QUFDLEtBQUssQ0FBQyxRQUFRLElBQUksYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7YUFDOUQsQ0FDRixDQUFBO1FBQ0gsQ0FBQyxDQUFBO1FBRUQsTUFBTSxvQkFBb0IsR0FBRyxHQUFVLEVBQUU7WUFDdkMsT0FBTyxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRTtnQkFDN0IsS0FBSyxFQUFFLGtCQUFrQjthQUMxQixFQUFFO2dCQUNELE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEVBQUU7YUFDakMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUNoQyxDQUFDLENBQUE7UUFFRCxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUE7UUFFekUsT0FBTyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFO1lBQ3BCLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSztZQUNwQixLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUs7U0FDcEIsRUFBRTtZQUNELGNBQWMsRUFBRTtZQUNoQixnQkFBZ0IsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1NBQ3pDLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIGgsIHdpdGhEaXJlY3RpdmVzLCByZWYsIHdhdGNoLCBjb21wdXRlZCwgdlNob3csIFZOb2RlIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHsgRXhwYW5kVHJhbnNpdGlvbiB9IGZyb20gJy4uL3RyYW5zaXRpb25zJ1xuXG5pbXBvcnQgeyBWSWNvbiB9IGZyb20gJy4uL1ZJY29uJ1xuXG5pbXBvcnQgeyB1c2VDb2xvcnMsIGNvbG9yUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlL3VzZS1jb2xvcnMnXG5pbXBvcnQgeyB1c2VJY29ucyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGUvdXNlLWljb25zJ1xuXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICBuYW1lOiAndi1ncm91cCcsXG4gIHByb3BzOiB7XG4gICAgZXhwYW5kOiBCb29sZWFuLFxuICAgIHN1Ymdyb3VwOiBCb29sZWFuLFxuICAgIHRpdGxlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICB9LFxuICAgIGFjdGl2ZUNsYXNzOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnbWFpbi0tdGV4dCB0ZXh0LS1ldm8nLFxuICAgIH0sXG4gICAgcHJlcGVuZEljb246IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgIH0sXG4gICAgYXBwZW5kSWNvbjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJycsXG4gICAgfSxcbiAgICAuLi5jb2xvclByb3BzKCksXG4gIH0sXG4gIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pOiAoKSA9PiBWTm9kZSB7XG4gICAgY29uc3QgeyBpY29ucyB9ID0gdXNlSWNvbnMoKVxuICAgIGNvbnN0IHsgc2V0QmFja2dyb3VuZENzc0NvbG9yLCBzZXRCYWNrZ3JvdW5kQ2xhc3NOYW1lQ29sb3IgfSA9IHVzZUNvbG9ycygpXG5cbiAgICBjb25zdCBpc0FjdGl2ZSA9IHJlZjxib29sZWFuPihmYWxzZSlcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZDxSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj4oKCkgPT4gKHtcbiAgICAgICd2LWdyb3VwJzogdHJ1ZSxcbiAgICAgICd2LWdyb3VwLS1zdWJncm91cCc6IHByb3BzLnN1Ymdyb3VwLFxuICAgICAgJ3YtZ3JvdXAtLWFjdGl2ZSc6IGlzQWN0aXZlLnZhbHVlLFxuICAgICAgJ3YtZ3JvdXAtLWRlZmF1bHQnOiAhaXNBY3RpdmUudmFsdWUsXG4gICAgICBbcHJvcHMuYWN0aXZlQ2xhc3NdOiAhIXByb3BzLmFjdGl2ZUNsYXNzICYmIGlzQWN0aXZlLnZhbHVlLFxuICAgICAgLi4uc2V0QmFja2dyb3VuZENsYXNzTmFtZUNvbG9yKHByb3BzLmNvbG9yKSxcbiAgICB9KSlcblxuICAgIGNvbnN0IHN0eWxlcyA9IGNvbXB1dGVkKCgpID0+ICh7XG4gICAgICAuLi5zZXRCYWNrZ3JvdW5kQ3NzQ29sb3IocHJvcHMuY29sb3IpLFxuICAgIH0pKVxuXG4gICAgY29uc3QgZ2VuSGVhZGVyQ29udGVudCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQ6IGFueSA9IHByb3BzLnRpdGxlIHx8IHNsb3RzLmhlYWRlcj8uKClcblxuICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6ICd2LWdyb3VwX19oZWFkZXItY29udGVudCcsXG4gICAgICB9LCBjb250ZW50KVxuICAgIH1cblxuICAgIGNvbnN0IGdlbkV4cGFuZEljb24gPSAoaWNvbjogVk5vZGUpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3YtZ3JvdXBfX2V4cGFuZC1pY29uJyxcbiAgICAgIH0sIGljb24pXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuU3ViRXhwYW5kSWNvbiA9IChpY29uOiBWTm9kZSk6IFZOb2RlID0+IHtcbiAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAndi1ncm91cF9fc3ViLWV4cGFuZC1pY29uJyxcbiAgICAgIH0sIGljb24pXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuUHJlcGVuZEljb24gPSAoaWNvbjogVk5vZGUpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3YtZ3JvdXBfX3ByZXBlbmQtaWNvbicsXG4gICAgICB9LCBpY29uKVxuICAgIH1cblxuICAgIGNvbnN0IGdlbkFwcGVuZEljb24gPSAoaWNvbjogVk5vZGUpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3YtZ3JvdXBfX2FwcGVuZC1pY29uJyxcbiAgICAgIH0sIGljb24pXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuSWNvbiA9IChpY29uTmFtZTogc3RyaW5nKTogVk5vZGUgPT4ge1xuICAgICAgcmV0dXJuIGgoVkljb24sIHtcbiAgICAgICAgaWNvbjogaWNvbk5hbWUsXG4gICAgICAgIHNpemU6IDE2LFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBnZW5Hcm91cEhlYWRlciA9ICgpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAndi1ncm91cF9faGVhZGVyJyxcbiAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBpc0FjdGl2ZS52YWx1ZSA9ICFpc0FjdGl2ZS52YWx1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgW1xuICAgICAgICAgIHByb3BzLnN1Ymdyb3VwICYmIGdlblN1YkV4cGFuZEljb24oZ2VuSWNvbihpY29ucy4kY2FyZXREb3duKSksXG4gICAgICAgICAgcHJvcHMucHJlcGVuZEljb24gJiYgZ2VuUHJlcGVuZEljb24oZ2VuSWNvbihwcm9wcy5wcmVwZW5kSWNvbikpLFxuICAgICAgICAgIGdlbkhlYWRlckNvbnRlbnQoKSxcbiAgICAgICAgICBwcm9wcy5hcHBlbmRJY29uICYmIGdlbkFwcGVuZEljb24oZ2VuSWNvbihwcm9wcy5hcHBlbmRJY29uKSksXG4gICAgICAgICAgIXByb3BzLnN1Ymdyb3VwICYmIGdlbkV4cGFuZEljb24oZ2VuSWNvbihpY29ucy4kY2hldnJvbkRvd24pKSxcbiAgICAgICAgXSxcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBnZW5Hcm91cENoaWxkQ29udGVudCA9ICgpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gd2l0aERpcmVjdGl2ZXMoaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3YtZ3JvdXBfX2NvbnRlbnQnLFxuICAgICAgfSwge1xuICAgICAgICBkZWZhdWx0OiAoKSA9PiBzbG90cy5kZWZhdWx0Py4oKSxcbiAgICAgIH0pLCBbW3ZTaG93LCBpc0FjdGl2ZS52YWx1ZV1dKVxuICAgIH1cblxuICAgIHdhdGNoKCgpID0+IHByb3BzLmV4cGFuZCwgdG8gPT4gaXNBY3RpdmUudmFsdWUgPSB0bywgeyBpbW1lZGlhdGU6IHRydWUgfSlcblxuICAgIHJldHVybiAoKSA9PiBoKCdkaXYnLCB7XG4gICAgICBjbGFzczogY2xhc3Nlcy52YWx1ZSxcbiAgICAgIHN0eWxlOiBzdHlsZXMudmFsdWUsXG4gICAgfSwgW1xuICAgICAgZ2VuR3JvdXBIZWFkZXIoKSxcbiAgICAgIEV4cGFuZFRyYW5zaXRpb24oZ2VuR3JvdXBDaGlsZENvbnRlbnQoKSksXG4gICAgXSlcbiAgfSxcbn0pXG4iXX0=