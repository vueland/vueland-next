const clickHandler = (e, el) => {
    if (el.contains(e.target) &&
        el._binds?.value &&
        !el._binds?.value.closeConditional)
        return;
    if (typeof el._binds?.value === 'function')
        el._binds.value(e);
    if (typeof el._binds?.value === 'object')
        el._binds.value.handler(e);
};
const removeListener = (el) => {
    document.body.removeEventListener('click', el._onClick, true);
    delete el._onClick;
    delete el._binds;
};
export const clickOutside = {
    beforeMount(el, binding) {
        el._binds = binding;
    },
    mounted(el) {
        el._onClick = (e) => clickHandler(e, el);
        document.body.addEventListener('click', el._onClick, true);
    },
    beforeUpdate(el, binding) {
        el._binds = binding;
    },
    beforeUnmount(el) {
        removeListener(el);
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy92dWVsYW5kL3NyYy9kaXJlY3RpdmVzL3YtY2xpY2stb3V0c2lkZS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLFlBQVksR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM3QixJQUNFLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUNyQixFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUs7UUFDaEIsQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxnQkFBZ0I7UUFFbEMsT0FBTTtJQUVSLElBQUksT0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssS0FBSyxVQUFVO1FBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFFOUQsSUFBSSxPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxLQUFLLFFBQVE7UUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDdEUsQ0FBQyxDQUFBO0FBRUQsTUFBTSxjQUFjLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRTtJQUM1QixRQUFRLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQzdELE9BQU8sRUFBRSxDQUFDLFFBQVEsQ0FBQTtJQUNsQixPQUFPLEVBQUUsQ0FBQyxNQUFNLENBQUE7QUFDbEIsQ0FBQyxDQUFBO0FBRUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHO0lBQzFCLFdBQVcsQ0FBQyxFQUFFLEVBQUUsT0FBTztRQUNyQixFQUFFLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQTtJQUNyQixDQUFDO0lBRUQsT0FBTyxDQUFDLEVBQUU7UUFDUixFQUFFLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFBO1FBQ3hDLFFBQVEsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUE7SUFDNUQsQ0FBQztJQUVELFlBQVksQ0FBQyxFQUFFLEVBQUUsT0FBTztRQUN0QixFQUFFLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQTtJQUNyQixDQUFDO0lBRUQsYUFBYSxDQUFDLEVBQUU7UUFDZCxjQUFjLENBQUMsRUFBRSxDQUFDLENBQUE7SUFDcEIsQ0FBQztDQUNGLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjbGlja0hhbmRsZXIgPSAoZSwgZWwpID0+IHtcbiAgaWYgKFxuICAgIGVsLmNvbnRhaW5zKGUudGFyZ2V0KSAmJlxuICAgIGVsLl9iaW5kcz8udmFsdWUgJiZcbiAgICAhZWwuX2JpbmRzPy52YWx1ZS5jbG9zZUNvbmRpdGlvbmFsXG4gIClcbiAgICByZXR1cm5cblxuICBpZiAodHlwZW9mIGVsLl9iaW5kcz8udmFsdWUgPT09ICdmdW5jdGlvbicpIGVsLl9iaW5kcy52YWx1ZShlKVxuXG4gIGlmICh0eXBlb2YgZWwuX2JpbmRzPy52YWx1ZSA9PT0gJ29iamVjdCcpIGVsLl9iaW5kcy52YWx1ZS5oYW5kbGVyKGUpXG59XG5cbmNvbnN0IHJlbW92ZUxpc3RlbmVyID0gKGVsKSA9PiB7XG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlbC5fb25DbGljaywgdHJ1ZSlcbiAgZGVsZXRlIGVsLl9vbkNsaWNrXG4gIGRlbGV0ZSBlbC5fYmluZHNcbn1cblxuZXhwb3J0IGNvbnN0IGNsaWNrT3V0c2lkZSA9IHtcbiAgYmVmb3JlTW91bnQoZWwsIGJpbmRpbmcpIHtcbiAgICBlbC5fYmluZHMgPSBiaW5kaW5nXG4gIH0sXG5cbiAgbW91bnRlZChlbCkge1xuICAgIGVsLl9vbkNsaWNrID0gKGUpID0+IGNsaWNrSGFuZGxlcihlLCBlbClcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWwuX29uQ2xpY2ssIHRydWUpXG4gIH0sXG5cbiAgYmVmb3JlVXBkYXRlKGVsLCBiaW5kaW5nKSB7XG4gICAgZWwuX2JpbmRzID0gYmluZGluZ1xuICB9LFxuXG4gIGJlZm9yZVVubW91bnQoZWwpIHtcbiAgICByZW1vdmVMaXN0ZW5lcihlbClcbiAgfSxcbn1cbiJdfQ==