import { defineComponent, h, computed } from 'vue';
import { useColors } from '../../composable/use-colors';
import { elevationProps, useElevation } from '../../composable/use-elevation';
import { usePosition } from '../../composable/use-position';
import { VProgressCircular } from '../VProgressCircular';
import { convertToUnit } from '../../helpers';
export const VButton = defineComponent({
    name: 'v-button',
    props: {
        disabled: Boolean,
        outlined: Boolean,
        rounded: Boolean,
        round: Boolean,
        absolute: Boolean,
        loading: Boolean,
        left: Boolean,
        right: Boolean,
        text: Boolean,
        dark: Boolean,
        label: String,
        width: [String, Number],
        color: {
            type: String,
            default: 'grey lighten-1',
        },
        ...elevationProps(),
    },
    emits: ['click'],
    setup(props, { slots, emit }) {
        const { setTextClassNameColor, setBackgroundClassNameColor, setBackgroundCssColor, setTextCssColor, } = useColors();
        const { elevationClasses } = useElevation(props);
        const { positionClasses } = usePosition(props);
        const isFlat = computed(() => {
            return props.text || props.outlined;
        });
        const isLoadable = computed(() => {
            return !props.text && !props.outlined && props.loading;
        });
        const isElevetable = computed(() => {
            return !isLoadable.value && !props.disabled;
        });
        const classes = computed(() => {
            const elevations = isElevetable.value ? elevationClasses.value : {};
            return {
                'v-button': true,
                'v-button--text': props.text || props.outlined,
                'v-button--outlined': props.outlined,
                'v-button--rounded': !props.round && props.rounded,
                'v-button--round': props.round,
                'v-button--disabled': props.disabled || isLoadable.value,
                'v-button--loading': props.loading,
                ...elevations,
                ...positionClasses.value,
                ...(props.color && isFlat.value
                    ? setTextClassNameColor(props.color)
                    : {}),
                ...(props.color && !isFlat.value
                    ? setBackgroundClassNameColor(props.color)
                    : {}),
            };
        });
        const styles = computed(() => {
            const width = props.width || 40;
            return {
                width: (props.width || props.round) && convertToUnit(width),
                height: props.round && convertToUnit(width),
                ...(props.color && isFlat.value ? setTextCssColor(props.color) : {}),
                ...(props.color && !isFlat.value
                    ? setBackgroundCssColor(props.color)
                    : {}),
            };
        });
        const genLoader = () => {
            return h('span', {
                class: 'v-button__loader',
            }, (slots.loading && slots.loading()) ||
                h(VProgressCircular, {
                    indeterminate: true,
                    size: 23,
                    width: 2,
                }));
        };
        const genLabel = () => {
            return h('span', {
                class: 'v-button__label',
            }, props.label);
        };
        const genContent = () => {
            return h('div', { class: 'v-button__content' }, [(slots.default && slots.default()) || (props.label && genLabel())]);
        };
        return () => h('button', {
            class: classes.value,
            style: styles.value,
            onClick: () => !props.disabled && emit('click'),
        }, [genContent(), props.loading && genLoader()]);
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkJ1dHRvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1ZCdXR0b24vVkJ1dHRvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsZUFBZSxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxLQUFLLENBQUE7QUFHbEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDZCQUE2QixDQUFBO0FBQ3ZELE9BQU8sRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0NBQWdDLENBQUE7QUFDN0UsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLCtCQUErQixDQUFBO0FBRzNELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHNCQUFzQixDQUFBO0FBTXhELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFFN0MsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLGVBQWUsQ0FBQztJQUNyQyxJQUFJLEVBQUUsVUFBVTtJQUNoQixLQUFLLEVBQUU7UUFDTCxRQUFRLEVBQUUsT0FBTztRQUNqQixRQUFRLEVBQUUsT0FBTztRQUNqQixPQUFPLEVBQUUsT0FBTztRQUNoQixLQUFLLEVBQUUsT0FBTztRQUNkLFFBQVEsRUFBRSxPQUFPO1FBQ2pCLE9BQU8sRUFBRSxPQUFPO1FBQ2hCLElBQUksRUFBRSxPQUFPO1FBQ2IsS0FBSyxFQUFFLE9BQU87UUFDZCxJQUFJLEVBQUUsT0FBTztRQUNiLElBQUksRUFBRSxPQUFPO1FBQ2IsS0FBSyxFQUFFLE1BQU07UUFDYixLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO1FBQ3ZCLEtBQUssRUFBRTtZQUNMLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLGdCQUFnQjtTQUMxQjtRQUNELEdBQUcsY0FBYyxFQUFFO0tBQ2I7SUFDUixLQUFLLEVBQUUsQ0FBQyxPQUFPLENBQUM7SUFFaEIsS0FBSyxDQUFDLEtBQUss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SSxJQUFJLENBQUMsT0FBTyxDQUFDO1NBQ2hELEVBQ0QsQ0FBQyxVQUFVLEVBQUUsRUFBRSxLQUFLLENBQUMsT0FBTyxJQUFJLFNBQVMsRUFBRSxDQUFDLENBQzdDLENBQUE7SUFDTCxDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVnVlIEFQSVxuaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBoLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuLy8gQ29tcG9zYWJsZVxuaW1wb3J0IHsgdXNlQ29sb3JzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZS91c2UtY29sb3JzJ1xuaW1wb3J0IHsgZWxldmF0aW9uUHJvcHMsIHVzZUVsZXZhdGlvbiB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGUvdXNlLWVsZXZhdGlvbidcbmltcG9ydCB7IHVzZVBvc2l0aW9uIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZS91c2UtcG9zaXRpb24nXG5cbi8vIENvbXBvbmVudHNcbmltcG9ydCB7IFZQcm9ncmVzc0NpcmN1bGFyIH0gZnJvbSAnLi4vVlByb2dyZXNzQ2lyY3VsYXInXG5cbi8vIFR5cGVzXG5pbXBvcnQgeyBWTm9kZSB9IGZyb20gJ3Z1ZSdcblxuLy8gSGVscGVyc1xuaW1wb3J0IHsgY29udmVydFRvVW5pdCB9IGZyb20gJy4uLy4uL2hlbHBlcnMnXG5cbmV4cG9ydCBjb25zdCBWQnV0dG9uID0gZGVmaW5lQ29tcG9uZW50KHtcbiAgbmFtZTogJ3YtYnV0dG9uJyxcbiAgcHJvcHM6IHtcbiAgICBkaXNhYmxlZDogQm9vbGVhbixcbiAgICBvdXRsaW5lZDogQm9vbGVhbixcbiAgICByb3VuZGVkOiBCb29sZWFuLFxuICAgIHJvdW5kOiBCb29sZWFuLFxuICAgIGFic29sdXRlOiBCb29sZWFuLFxuICAgIGxvYWRpbmc6IEJvb2xlYW4sXG4gICAgbGVmdDogQm9vbGVhbixcbiAgICByaWdodDogQm9vbGVhbixcbiAgICB0ZXh0OiBCb29sZWFuLFxuICAgIGRhcms6IEJvb2xlYW4sXG4gICAgbGFiZWw6IFN0cmluZyxcbiAgICB3aWR0aDogW1N0cmluZywgTnVtYmVyXSxcbiAgICBjb2xvcjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ2dyZXkgbGlnaHRlbi0xJyxcbiAgICB9LFxuICAgIC4uLmVsZXZhdGlvblByb3BzKCksXG4gIH0gYXMgYW55LFxuICBlbWl0czogWydjbGljayddLFxuXG4gIHNldHVwKHByb3BzLCB7IHNsb3RzLCBlbWl0IH0pOiAoKSA9PiBWTm9kZSB7XG4gICAgY29uc3Qge1xuICAgICAgc2V0VGV4dENsYXNzTmFtZUNvbG9yLFxuICAgICAgc2V0QmFja2dyb3VuZENsYXNzTmFtZUNvbG9yLFxuICAgICAgc2V0QmFja2dyb3VuZENzc0NvbG9yLFxuICAgICAgc2V0VGV4dENzc0NvbG9yLFxuICAgIH0gPSB1c2VDb2xvcnMoKVxuXG4gICAgY29uc3QgeyBlbGV2YXRpb25DbGFzc2VzIH0gPSB1c2VFbGV2YXRpb24ocHJvcHMpXG5cbiAgICBjb25zdCB7IHBvc2l0aW9uQ2xhc3NlcyB9ID0gdXNlUG9zaXRpb24ocHJvcHMpXG5cbiAgICBjb25zdCBpc0ZsYXQgPSBjb21wdXRlZDxib29sZWFuPigoKSA9PiB7XG4gICAgICByZXR1cm4gcHJvcHMudGV4dCB8fCBwcm9wcy5vdXRsaW5lZFxuICAgIH0pXG5cbiAgICBjb25zdCBpc0xvYWRhYmxlID0gY29tcHV0ZWQ8Ym9vbGVhbj4oKCkgPT4ge1xuICAgICAgcmV0dXJuICFwcm9wcy50ZXh0ICYmICFwcm9wcy5vdXRsaW5lZCAmJiBwcm9wcy5sb2FkaW5nXG4gICAgfSlcblxuICAgIGNvbnN0IGlzRWxldmV0YWJsZSA9IGNvbXB1dGVkPGJvb2xlYW4+KCgpID0+IHtcbiAgICAgIHJldHVybiAhaXNMb2FkYWJsZS52YWx1ZSAmJiAhcHJvcHMuZGlzYWJsZWRcbiAgICB9KVxuXG4gICAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkPFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+PigoKSA9PiB7XG4gICAgICBjb25zdCBlbGV2YXRpb25zID0gaXNFbGV2ZXRhYmxlLnZhbHVlID8gZWxldmF0aW9uQ2xhc3Nlcy52YWx1ZSA6IHt9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgICd2LWJ1dHRvbic6IHRydWUsXG4gICAgICAgICd2LWJ1dHRvbi0tdGV4dCc6IHByb3BzLnRleHQgfHwgcHJvcHMub3V0bGluZWQsXG4gICAgICAgICd2LWJ1dHRvbi0tb3V0bGluZWQnOiBwcm9wcy5vdXRsaW5lZCxcbiAgICAgICAgJ3YtYnV0dG9uLS1yb3VuZGVkJzogIXByb3BzLnJvdW5kICYmIHByb3BzLnJvdW5kZWQsXG4gICAgICAgICd2LWJ1dHRvbi0tcm91bmQnOiBwcm9wcy5yb3VuZCxcbiAgICAgICAgJ3YtYnV0dG9uLS1kaXNhYmxlZCc6IHByb3BzLmRpc2FibGVkIHx8IGlzTG9hZGFibGUudmFsdWUsXG4gICAgICAgICd2LWJ1dHRvbi0tbG9hZGluZyc6IHByb3BzLmxvYWRpbmcsXG4gICAgICAgIC4uLmVsZXZhdGlvbnMsXG4gICAgICAgIC4uLnBvc2l0aW9uQ2xhc3Nlcy52YWx1ZSxcbiAgICAgICAgLi4uKHByb3BzLmNvbG9yICYmIGlzRmxhdC52YWx1ZVxuICAgICAgICAgID8gc2V0VGV4dENsYXNzTmFtZUNvbG9yKHByb3BzLmNvbG9yKVxuICAgICAgICAgIDoge30pLFxuICAgICAgICAuLi4ocHJvcHMuY29sb3IgJiYgIWlzRmxhdC52YWx1ZVxuICAgICAgICAgID8gc2V0QmFja2dyb3VuZENsYXNzTmFtZUNvbG9yKHByb3BzLmNvbG9yKVxuICAgICAgICAgIDoge30pLFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBzdHlsZXMgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICBjb25zdCB3aWR0aCA9IHByb3BzLndpZHRoIHx8IDQwXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoOiAocHJvcHMud2lkdGggfHwgcHJvcHMucm91bmQpICYmIGNvbnZlcnRUb1VuaXQod2lkdGgpLFxuICAgICAgICBoZWlnaHQ6IHByb3BzLnJvdW5kICYmIGNvbnZlcnRUb1VuaXQod2lkdGgpLFxuICAgICAgICAuLi4ocHJvcHMuY29sb3IgJiYgaXNGbGF0LnZhbHVlID8gc2V0VGV4dENzc0NvbG9yKHByb3BzLmNvbG9yKSA6IHt9KSxcbiAgICAgICAgLi4uKHByb3BzLmNvbG9yICYmICFpc0ZsYXQudmFsdWVcbiAgICAgICAgICA/IHNldEJhY2tncm91bmRDc3NDb2xvcihwcm9wcy5jb2xvcilcbiAgICAgICAgICA6IHt9KSxcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgZ2VuTG9hZGVyID0gKCk6IFZOb2RlID0+IHtcbiAgICAgIHJldHVybiBoKFxuICAgICAgICAnc3BhbicsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzczogJ3YtYnV0dG9uX19sb2FkZXInLFxuICAgICAgICB9LFxuICAgICAgICAoc2xvdHMubG9hZGluZyAmJiBzbG90cy5sb2FkaW5nKCkpIHx8XG4gICAgICAgIGgoVlByb2dyZXNzQ2lyY3VsYXIsIHtcbiAgICAgICAgICBpbmRldGVybWluYXRlOiB0cnVlLFxuICAgICAgICAgIHNpemU6IDIzLFxuICAgICAgICAgIHdpZHRoOiAyLFxuICAgICAgICB9KSxcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBnZW5MYWJlbCA9ICgpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnc3BhbicsIHtcbiAgICAgICAgY2xhc3M6ICd2LWJ1dHRvbl9fbGFiZWwnLFxuICAgICAgfSwgcHJvcHMubGFiZWwpXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuQ29udGVudCA9ICgpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2JywgeyBjbGFzczogJ3YtYnV0dG9uX19jb250ZW50JyB9LFxuICAgICAgICBbKHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpKSB8fCAocHJvcHMubGFiZWwgJiYgZ2VuTGFiZWwoKSldLFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiAoKSA9PlxuICAgICAgaCgnYnV0dG9uJywge1xuICAgICAgICAgIGNsYXNzOiBjbGFzc2VzLnZhbHVlLFxuICAgICAgICAgIHN0eWxlOiBzdHlsZXMudmFsdWUsXG4gICAgICAgICAgb25DbGljazogKCkgPT4gIXByb3BzLmRpc2FibGVkICYmIGVtaXQoJ2NsaWNrJyksXG4gICAgICAgIH0sXG4gICAgICAgIFtnZW5Db250ZW50KCksIHByb3BzLmxvYWRpbmcgJiYgZ2VuTG9hZGVyKCldLFxuICAgICAgKVxuICB9LFxufSlcbiJdfQ==