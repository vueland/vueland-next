const clickHandler = (e, el) => {
    if (el.contains(e.target) &&
        el._binds?.value &&
        !el._binds?.value.closeConditional)
        return;
    if (typeof el._binds?.value === 'function')
        el._binds.value(e);
    if (typeof el._binds?.value === 'object')
        el._binds.value.handler(e);
};
const removeListener = (el) => {
    document.body.removeEventListener('click', el._onClick, true);
    delete el._onClick;
    delete el._binds;
};
export const clickOutside = {
    beforeMount(el, binding) {
        el._binds = binding;
    },
    mounted(el) {
        el._onClick = (e) => clickHandler(e, el);
        document.body.addEventListener('click', el._onClick, true);
    },
    beforeUpdate(el, binding) {
        el._binds = binding;
    },
    beforeUnmount(el) {
        removeListener(el);
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvZGlyZWN0aXZlcy92LWNsaWNrLW91dHNpZGUvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUU7SUFDN0IsSUFDRSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7UUFDckIsRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLO1FBQ2hCLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsZ0JBQWdCO1FBRWxDLE9BQU07SUFFUixJQUFJLE9BQU8sRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLEtBQUssVUFBVTtRQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBRTlELElBQUksT0FBTyxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssS0FBSyxRQUFRO1FBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3RFLENBQUMsQ0FBQTtBQUVELE1BQU0sY0FBYyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUU7SUFDNUIsUUFBUSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUM3RCxPQUFPLEVBQUUsQ0FBQyxRQUFRLENBQUE7SUFDbEIsT0FBTyxFQUFFLENBQUMsTUFBTSxDQUFBO0FBQ2xCLENBQUMsQ0FBQTtBQUVELE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBRztJQUMxQixXQUFXLENBQUMsRUFBRSxFQUFFLE9BQU87UUFDckIsRUFBRSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUE7SUFDckIsQ0FBQztJQUVELE9BQU8sQ0FBQyxFQUFFO1FBQ1IsRUFBRSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUN4QyxRQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQzVELENBQUM7SUFFRCxZQUFZLENBQUMsRUFBRSxFQUFFLE9BQU87UUFDdEIsRUFBRSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUE7SUFDckIsQ0FBQztJQUVELGFBQWEsQ0FBQyxFQUFFO1FBQ2QsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBQ3BCLENBQUM7Q0FDRixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY2xpY2tIYW5kbGVyID0gKGUsIGVsKSA9PiB7XG4gIGlmIChcbiAgICBlbC5jb250YWlucyhlLnRhcmdldCkgJiZcbiAgICBlbC5fYmluZHM/LnZhbHVlICYmXG4gICAgIWVsLl9iaW5kcz8udmFsdWUuY2xvc2VDb25kaXRpb25hbFxuICApXG4gICAgcmV0dXJuXG5cbiAgaWYgKHR5cGVvZiBlbC5fYmluZHM/LnZhbHVlID09PSAnZnVuY3Rpb24nKSBlbC5fYmluZHMudmFsdWUoZSlcblxuICBpZiAodHlwZW9mIGVsLl9iaW5kcz8udmFsdWUgPT09ICdvYmplY3QnKSBlbC5fYmluZHMudmFsdWUuaGFuZGxlcihlKVxufVxuXG5jb25zdCByZW1vdmVMaXN0ZW5lciA9IChlbCkgPT4ge1xuICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWwuX29uQ2xpY2ssIHRydWUpXG4gIGRlbGV0ZSBlbC5fb25DbGlja1xuICBkZWxldGUgZWwuX2JpbmRzXG59XG5cbmV4cG9ydCBjb25zdCBjbGlja091dHNpZGUgPSB7XG4gIGJlZm9yZU1vdW50KGVsLCBiaW5kaW5nKSB7XG4gICAgZWwuX2JpbmRzID0gYmluZGluZ1xuICB9LFxuXG4gIG1vdW50ZWQoZWwpIHtcbiAgICBlbC5fb25DbGljayA9IChlKSA9PiBjbGlja0hhbmRsZXIoZSwgZWwpXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGVsLl9vbkNsaWNrLCB0cnVlKVxuICB9LFxuXG4gIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZykge1xuICAgIGVsLl9iaW5kcyA9IGJpbmRpbmdcbiAgfSxcblxuICBiZWZvcmVVbm1vdW50KGVsKSB7XG4gICAgcmVtb3ZlTGlzdGVuZXIoZWwpXG4gIH0sXG59XG4iXX0=