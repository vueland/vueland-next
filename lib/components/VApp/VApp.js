import { defineComponent, provide, reactive, h, withDirectives, onMounted, } from 'vue';
import { resize } from '../../directives';
import { breakpoints } from '../../services/breakpoints';
import { throttle } from '../../utils/throttle';
export default defineComponent({
    name: 'v-app',
    directives: {
        resize,
    },
    props: {
        global: {
            type: Object,
            default: null,
        },
    },
    setup(props, { slots }) {
        const THROTTLING_TIMEOUT = 60;
        const state = reactive({
            current: null,
            xlAndLess: false,
            lgAndLess: false,
            mdAndLess: false,
            smAndLess: false,
        });
        provide('breakpoints', state);
        const setCurrentBreakpointName = (screen) => {
            if (screen >= breakpoints.xl) {
                return (state.current = 'xl');
            }
            if (screen >= breakpoints.lg && screen < breakpoints.xl) {
                return (state.current = 'lg');
            }
            if (screen >= breakpoints.md && screen < breakpoints.lg) {
                return (state.current = 'md');
            }
            if (screen >= breakpoints.sm && screen < breakpoints.md) {
                return (state.current = 'sm');
            }
            return null;
        };
        const setIntervals = (screen) => {
            const { xl, lg, md, sm } = breakpoints;
            state.xlAndLess = screen <= xl && screen > lg;
            state.lgAndLess = screen <= lg && screen > md;
            state.mdAndLess = screen <= md && screen > sm;
            state.smAndLess = screen <= sm;
        };
        const setSizes = () => {
            const screen = props.global?.innerWidth || window.innerWidth;
            setCurrentBreakpointName(screen);
            setIntervals(screen);
        };
        const throttledResizeListener = throttle(setSizes, THROTTLING_TIMEOUT);
        const genAppWrapper = () => {
            return h('div', { class: 'v-app--wrapper' }, {
                default: () => slots.default && slots.default(),
            });
        };
        onMounted(() => {
            setSizes();
        });
        return () => withDirectives(h('div', { class: 'v-app' }, genAppWrapper()), [[resize, throttledResizeListener]]);
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkFwcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1ZBcHAvVkFwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsZUFBZSxFQUNmLE9BQU8sRUFDUCxRQUFRLEVBQ1IsQ0FBQyxFQUNELGNBQWMsRUFDZCxTQUFTLEdBQ1YsTUFBTSxLQUFLLENBQUE7QUFHWixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFHekMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDRCQUE0QixDQUFBO0FBR3hELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQTtBQVkvQyxlQUFlLGVBQWUsQ0FBQztJQUM3QixJQUFJLEVBQUUsT0FBTztJQUNiLFVBQVUsRUFBRTtRQUNWLE1BQU07S0FDUDtJQUNELEtBQUssRUFBRTtRQUNMLE1BQU0sRUFBRTtZQUNOLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLElBQUk7U0FDZDtLQUNGO0lBQ0QsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRTtRQUNwQixNQUFNLGtCQUFrQixHQUFHLEVBQUUsQ0FBQTtRQUU3QixNQUFNLEtBQUssR0FBRyxRQUFRLENBQVc7WUFDL0IsT0FBTyxFQUFFLElBQUk7WUFDYixTQUFTLEVBQUUsS0FBSztZQUNoQixTQUFTLEVBQUUsS0FBSztZQUNoQixTQUFTLEVBQUUsS0FBSztZQUNoQixTQUFTLEVBQUUsS0FBSztTQUNqQixDQUFDLENBQUE7UUFFRixPQUFPLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBRTdCLE1BQU0sd0JBQXdCLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUMxQyxJQUFJLE1BQU0sSUFBSSxXQUFXLENBQUMsRUFBRSxFQUFFO2dCQUM1QixPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsQ0FBQTthQUM5QjtZQUNELElBQUksTUFBTSxJQUFJLFdBQVcsQ0FBQyxFQUFFLElBQUksTUFBTSxHQUFHLFdBQVcsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3ZELE9BQU8sQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFBO2FBQzlCO1lBQ0QsSUFBSSxNQUFNLElBQUksV0FBVyxDQUFDLEVBQUUsSUFBSSxNQUFNLEdBQUcsV0FBVyxDQUFDLEVBQUUsRUFBRTtnQkFDdkQsT0FBTyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLENBQUE7YUFDOUI7WUFDRCxJQUFJLE1BQU0sSUFBSSxXQUFXLENBQUMsRUFBRSxJQUFJLE1BQU0sR0FBRyxXQUFXLENBQUMsRUFBRSxFQUFFO2dCQUN2RCxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsQ0FBQTthQUM5QjtZQUVELE9BQU8sSUFBSSxDQUFBO1FBQ2IsQ0FBQyxDQUFBO1FBRUQsTUFBTSxZQUFZLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBRTtZQUM5QixNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsV0FBVyxDQUFBO1lBRXRDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLEVBQUUsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFBO1lBQzdDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLEVBQUUsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFBO1lBQzdDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLEVBQUUsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFBO1lBQzdDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQTtRQUNoQyxDQUFDLENBQUE7UUFFRCxNQUFNLFFBQVEsR0FBRyxHQUFHLEVBQUU7WUFHcEIsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxVQUFVLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQTtZQUU1RCx3QkFBd0IsQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUNoQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDdEIsQ0FBQyxDQUFBO1FBRUQsTUFBTSx1QkFBdUIsR0FBRyxRQUFRLENBQ3RDLFFBQVEsRUFDUixrQkFBa0IsQ0FDTCxDQUFBO1FBRWYsTUFBTSxhQUFhLEdBQUcsR0FBRyxFQUFFO1lBQ3pCLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxFQUFFO2dCQUMzQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFO2FBQ2hELENBQUMsQ0FBQTtRQUNKLENBQUMsQ0FBQTtRQUVELFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDYixRQUFRLEVBQUUsQ0FBQTtRQUNaLENBQUMsQ0FBQyxDQUFBO1FBRUYsT0FBTyxHQUFHLEVBQUUsQ0FDVixjQUFjLENBQ1osQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsRUFBRSxhQUFhLEVBQUUsQ0FBQyxFQUM3QyxDQUFDLENBQUMsTUFBTSxFQUFFLHVCQUF1QixDQUFDLENBQUMsQ0FDcEMsQ0FBQTtJQUNMLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBkZWZpbmVDb21wb25lbnQsXG4gIHByb3ZpZGUsXG4gIHJlYWN0aXZlLFxuICBoLFxuICB3aXRoRGlyZWN0aXZlcyxcbiAgb25Nb3VudGVkLFxufSBmcm9tICd2dWUnXG5cbi8vIERpcmVjdGl2ZXNcbmltcG9ydCB7IHJlc2l6ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMnXG5cbi8vIFNlcnZpY2VzXG5pbXBvcnQgeyBicmVha3BvaW50cyB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2JyZWFrcG9pbnRzJ1xuXG4vLyBVdGlsc1xuaW1wb3J0IHsgdGhyb3R0bGUgfSBmcm9tICcuLi8uLi91dGlscy90aHJvdHRsZSdcblxuLy8gVHlwZXNcblxuaW50ZXJmYWNlIEFwcFN0YXRlIHtcbiAgY3VycmVudDogTWF5YmU8J3hsJyB8ICdsZycgfCAnbWQnIHwgJ3NtJz5cbiAgeGxBbmRMZXNzOiBib29sZWFuXG4gIGxnQW5kTGVzczogYm9vbGVhblxuICBtZEFuZExlc3M6IGJvb2xlYW5cbiAgc21BbmRMZXNzOiBib29sZWFuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7XG4gIG5hbWU6ICd2LWFwcCcsXG4gIGRpcmVjdGl2ZXM6IHtcbiAgICByZXNpemUsXG4gIH0sXG4gIHByb3BzOiB7XG4gICAgZ2xvYmFsOiB7XG4gICAgICB0eXBlOiBPYmplY3QsXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gIH0sXG4gIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCBUSFJPVFRMSU5HX1RJTUVPVVQgPSA2MFxuXG4gICAgY29uc3Qgc3RhdGUgPSByZWFjdGl2ZTxBcHBTdGF0ZT4oe1xuICAgICAgY3VycmVudDogbnVsbCxcbiAgICAgIHhsQW5kTGVzczogZmFsc2UsXG4gICAgICBsZ0FuZExlc3M6IGZhbHNlLFxuICAgICAgbWRBbmRMZXNzOiBmYWxzZSxcbiAgICAgIHNtQW5kTGVzczogZmFsc2UsXG4gICAgfSlcblxuICAgIHByb3ZpZGUoJ2JyZWFrcG9pbnRzJywgc3RhdGUpXG5cbiAgICBjb25zdCBzZXRDdXJyZW50QnJlYWtwb2ludE5hbWUgPSAoc2NyZWVuKSA9PiB7XG4gICAgICBpZiAoc2NyZWVuID49IGJyZWFrcG9pbnRzLnhsKSB7XG4gICAgICAgIHJldHVybiAoc3RhdGUuY3VycmVudCA9ICd4bCcpXG4gICAgICB9XG4gICAgICBpZiAoc2NyZWVuID49IGJyZWFrcG9pbnRzLmxnICYmIHNjcmVlbiA8IGJyZWFrcG9pbnRzLnhsKSB7XG4gICAgICAgIHJldHVybiAoc3RhdGUuY3VycmVudCA9ICdsZycpXG4gICAgICB9XG4gICAgICBpZiAoc2NyZWVuID49IGJyZWFrcG9pbnRzLm1kICYmIHNjcmVlbiA8IGJyZWFrcG9pbnRzLmxnKSB7XG4gICAgICAgIHJldHVybiAoc3RhdGUuY3VycmVudCA9ICdtZCcpXG4gICAgICB9XG4gICAgICBpZiAoc2NyZWVuID49IGJyZWFrcG9pbnRzLnNtICYmIHNjcmVlbiA8IGJyZWFrcG9pbnRzLm1kKSB7XG4gICAgICAgIHJldHVybiAoc3RhdGUuY3VycmVudCA9ICdzbScpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3Qgc2V0SW50ZXJ2YWxzID0gKHNjcmVlbikgPT4ge1xuICAgICAgY29uc3QgeyB4bCwgbGcsIG1kLCBzbSB9ID0gYnJlYWtwb2ludHNcblxuICAgICAgc3RhdGUueGxBbmRMZXNzID0gc2NyZWVuIDw9IHhsICYmIHNjcmVlbiA+IGxnXG4gICAgICBzdGF0ZS5sZ0FuZExlc3MgPSBzY3JlZW4gPD0gbGcgJiYgc2NyZWVuID4gbWRcbiAgICAgIHN0YXRlLm1kQW5kTGVzcyA9IHNjcmVlbiA8PSBtZCAmJiBzY3JlZW4gPiBzbVxuICAgICAgc3RhdGUuc21BbmRMZXNzID0gc2NyZWVuIDw9IHNtXG4gICAgfVxuXG4gICAgY29uc3Qgc2V0U2l6ZXMgPSAoKSA9PiB7XG4gICAgICAvLyB0aGUgXCJnbG9iYWxcIiBwcm9wIGFsbG93cyB0byB0ZXN0IHRoZVxuICAgICAgLy8gY29tcG9uZW50IHdpdGhvdXQgdXNpbmcgbW9ja3Vwc1xuICAgICAgY29uc3Qgc2NyZWVuID0gcHJvcHMuZ2xvYmFsPy5pbm5lcldpZHRoIHx8IHdpbmRvdy5pbm5lcldpZHRoXG5cbiAgICAgIHNldEN1cnJlbnRCcmVha3BvaW50TmFtZShzY3JlZW4pXG4gICAgICBzZXRJbnRlcnZhbHMoc2NyZWVuKVxuICAgIH1cblxuICAgIGNvbnN0IHRocm90dGxlZFJlc2l6ZUxpc3RlbmVyID0gdGhyb3R0bGUoXG4gICAgICBzZXRTaXplcyxcbiAgICAgIFRIUk9UVExJTkdfVElNRU9VVCxcbiAgICApIGFzICgpID0+IHZvaWRcblxuICAgIGNvbnN0IGdlbkFwcFdyYXBwZXIgPSAoKSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2JywgeyBjbGFzczogJ3YtYXBwLS13cmFwcGVyJyB9LCB7XG4gICAgICAgIGRlZmF1bHQ6ICgpID0+IHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCgpLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgICAgc2V0U2l6ZXMoKVxuICAgIH0pXG5cbiAgICByZXR1cm4gKCkgPT5cbiAgICAgIHdpdGhEaXJlY3RpdmVzKFxuICAgICAgICBoKCdkaXYnLCB7IGNsYXNzOiAndi1hcHAnIH0sIGdlbkFwcFdyYXBwZXIoKSksXG4gICAgICAgIFtbcmVzaXplLCB0aHJvdHRsZWRSZXNpemVMaXN0ZW5lcl1dLFxuICAgICAgKVxuICB9LFxufSlcbiJdfQ==