{"version":3,"sources":["../../../../src/components/VDataTable/VDataTableHeader.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VDataTableHeader.scss'\n\n// Vue API\nimport { h, computed, withDirectives, defineComponent } from 'vue'\n\n// Effects\nimport { useColors } from '../../effects/use-colors'\nimport { useIcons } from '../../effects/use-icons'\n\n// Components\nimport { VIcon } from '../VIcon'\nimport { VCheckbox } from '../VCheckbox'\nimport { VDataTableCell } from './VDataTableCell'\nimport { VTextField } from '../VTextField'\n\n// Directives\nimport { vShow } from 'vue'\nimport { clickOutside } from '../../directives/v-click-outside'\n\n// Types\nimport { VNode } from 'vue'\nimport { Column } from '../../types'\n\nexport const VDataTableHeader = defineComponent({\n  name: 'v-data-table-header',\n\n  props: {\n    showSequence: Boolean,\n    showCheckbox: Boolean,\n    cols: Array,\n    colWidth: {\n      type: [String, Number],\n      default: 125\n    },\n    align: String,\n    options: Object\n  } as any,\n\n  emits: [\n    'sort',\n    'filter',\n    'select-all',\n    'update:cols'\n  ],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const { setBackground } = useColors()\n    const {\n      icons,\n      iconSize\n    } = useIcons('s')\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-data-table__header': true\n    }))\n\n    const computedContentColor = computed<string>(() => {\n      return props.options.dark\n        ? props.options?.contentColor || 'white'\n        : props.options?.contentColor\n    })\n\n    const cols = computed<Column[]>(() => [...props.cols])\n\n    function onSort(item) {\n      emit('sort', item)\n    }\n\n    function onInput($value, item) {\n      item.filtered = !!$value\n      emit('filter', { value: $value, col: item })\n    }\n\n    function showFilter(item) {\n      if (item.showFilter) return\n      item.showFilter = true\n    }\n\n    function genSortButton(item) {\n      const classes = {\n        'v-data-table-col__actions-sort': true,\n        'v-data-table-col__actions-sort--active': item.sorted\n      }\n\n      const propsData = {\n        clickable: true,\n        class: classes,\n        size: iconSize,\n        icon: icons.$arrowUp,\n        color: !item.cellClass ? computedContentColor.value : '',\n        onClick: () => onSort(item)\n      }\n\n      return h(VIcon, propsData)\n    }\n\n    function genFilterButton(item) {\n      const classes = {\n        'v-data-table-col__actions-filter': true,\n        'v-data-table-col__actions-filter--active': item.filtered\n      }\n\n      const propsData = {\n        clickable: true,\n        class: classes,\n        size: iconSize,\n        icon: icons.$filter,\n        color: !item.cellClass ? computedContentColor.value : '',\n        onClick: () => showFilter(item)\n      }\n\n      return h(VIcon, propsData)\n    }\n\n    function genHeaderActions(item) {\n      return h('span', { class: 'v-data-table-col__actions' }, [\n        item.sortable && genSortButton(item),\n        item.filterable && genFilterButton(item)\n      ])\n    }\n\n    function genFilterInput(item) {\n      const propsData = {\n        label: 'search',\n        dark: props.options.dark,\n        color: !item.cellClass ? computedContentColor.value : '',\n        prependIcon: icons.$search,\n        clearable: true,\n        onInput: ($value) => onInput($value, item)\n      }\n\n      return h(VTextField, propsData)\n    }\n\n    function genFilterWrapper(col) {\n      const color = props.options.dark\n        ? props.options?.color || 'grey darken-3'\n        : props.options?.color || 'white'\n\n      const slotName = `${ col.key }-filter`\n\n      const filterSlot =\n        slots[slotName] &&\n        slots[slotName]!({\n          filter: (event) => onInput(event, col)\n        })\n\n      const directive = col.showFilter\n        ? {\n          handler: () => setTimeout(() => (col.showFilter = false)),\n          closeConditional: false\n        }\n        : undefined\n\n      const propsData = {\n        class: {\n          'v-data-table-col__filter': !filterSlot,\n          'v-data-table-col__custom-filter': !!filterSlot,\n          'elevation-5': true,\n          [col.cellClass]: !!col.cellClass\n        }\n      }\n\n      return (\n        col.filterable &&\n        withDirectives(\n          h(\n            'div',\n            !col.filterClass ? setBackground(color, propsData) : propsData,\n            filterSlot || genFilterInput(col)\n          ),\n          [\n            [clickOutside, directive],\n            [vShow, col.showFilter]\n          ]\n        )\n      )\n    }\n\n    function genHeaderTitle(col) {\n      return h('div', { class: 'v-data-table-col__title' }, col.title)\n    }\n\n    function genNumberCell() {\n      const propsData = {\n        align: 'center',\n        class: {\n          'v-data-table-col__number': true,\n          [props.cellClass]: !!props.cellClass\n        },\n        contentColor: computedContentColor.value,\n        color: props.options.color,\n        width: 50\n      }\n\n      return h(VDataTableCell, propsData, { default: () => '№' })\n    }\n\n    function genCheckboxCell() {\n      const propsData = {\n        align: 'center',\n        class: {\n          'v-data-table-col__checkbox': true,\n          [props.cellClass]: !!props.cellClass\n        },\n        dark: props.options.dark,\n        contentColor: computedContentColor.value,\n        color: props.options.color,\n        width: 50\n      }\n\n      const content = {\n        default: () =>\n          h(VCheckbox, {\n            color: computedContentColor.value,\n            onChecked: (e) => emit('select-all', e)\n          })\n      }\n\n      return h(VDataTableCell, propsData, content)\n    }\n\n    function genHeaderCell(col) {\n      const propsData = {\n        dark: props.options.dark,\n        class: {\n          'v-data-table-col': true,\n          'v-data-table-col--sorted': col.sorted,\n          [col.cellClass]: !!col.cellClass\n        },\n        contentColor: !col.cellClass ? computedContentColor.value : '',\n        color: !col.cellClass ? props.options.color : '',\n        width: col.width,\n        resizeable: col.resizeable,\n        align: col.align || props.align,\n        onResize: ($size) => (col.width = $size)\n      }\n\n      return h(VDataTableCell, propsData, {\n        default: () => [\n          genHeaderTitle(col),\n          genHeaderActions(col),\n          genFilterWrapper(col)\n        ]\n      })\n    }\n\n    function genHeaderChildren() {\n      const children: VNode[] = []\n      const headerSlot = slots.header && slots.header(props)\n\n      props.showSequence && children.push(genNumberCell())\n      props.showCheckbox && children.push(genCheckboxCell())\n\n      cols.value!.forEach((col: Column) => {\n        col.width = col.width || props.colWidth\n\n        if (!col.hasOwnProperty('show')) {\n          col.show = !col.show\n        }\n\n        !headerSlot![0].children && col.show && children.push(genHeaderCell(col))\n      })\n\n      headerSlot![0].children && children.push(headerSlot as any)\n\n      return children\n    }\n\n    return () => {\n      const propsData = {\n        class: classes.value\n      }\n\n      return h(\n        'div',\n        props.options.color\n          ? setBackground(props.options.color, propsData)\n          : propsData,\n        genHeaderChildren()\n      )\n    }\n  }\n})\n"],"sourceRoot":"","file":"VDataTableHeader.js"}