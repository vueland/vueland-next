{"version":3,"sources":["../../../src/effects/use-group.ts"],"names":[],"mappings":"AAAA,SAAS,OAAT,EAAkB,MAAlB,EAA0B,GAA1B,QAAqC,KAArC;AAIA,OAAM,SAAU,QAAV,GAAkB;AACtB,QAAM,YAAY,GAAG,CAAC,SAAD,EAAoB,OAAO,GAAG,EAA9B,KAAoC;AACvD,UAAM,MAAM,GAAG,GAAG,CAAU,EAAV,CAAlB;AAEA,IAAA,MAAM,CAAC,IAAP,CAAY,OAAZ,EAAqB,OAArB,CAA8B,GAAD,IAAQ;AACnC,UAAI,KAAJ;;AAEA,UAAI,OAAO,OAAO,CAAC,GAAD,CAAd,KAAwB,UAA5B,EAAwC;AACtC,QAAA,KAAK,GAAG,OAAO,CAAC,GAAD,CAAP,CAAa,IAAb,CAAkB,IAAlB,EAAwB,MAAxB,CAAR;AACD,OAFD,MAEO;AACL,QAAA,KAAK,GAAG,OAAO,CAAC,GAAD,CAAf;AACD;;AAED,MAAA,MAAM,CAAC,cAAP,CAAsB,OAAtB,EAA+B,GAA/B,EAAoC;AAAE,QAAA;AAAF,OAApC;AACD,KAVD;AAYA,IAAA,OAAO,CAAC,SAAD,EAAY;AACjB,MAAA,MADiB;AAEjB,SAAG;AAFc,KAAZ,CAAP;AAID,GAnBD;;AAqBA,QAAM,WAAW,GAAI,SAAD,IAAsB;AACxC,QAAI,QAAQ,GAAQ,EAApB;AAEA,IAAA,QAAQ,GAAG,MAAM,CAAC,SAAD,CAAN,IAAqB,IAAhC;;AAEA,UAAM,QAAQ,GAAI,KAAD,IAAiB;AAChC,MAAA,QAAQ,CAAC,MAAT,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,KAA3B;AACD,KAFD;;AAIA,UAAM,UAAU,GAAI,KAAD,IAAiB;AAClC,MAAA,QAAQ,CAAC,MAAT,CAAgB,KAAhB,CAAsB,MAAtB,CAA8B,EAAD,IAAO;AAClC,eAAO,EAAE,CAAC,GAAH,KAAW,KAAK,CAAC,GAAxB;AACD,OAFD;AAGD,KAJD;;AAMA,QAAI,QAAJ,EAAc;AACZ,aAAO,EACL,GAAG,QADE;AAEL,QAAA,QAFK;AAGL,QAAA;AAHK,OAAP;AAKD;;AAED,WAAO,IAAP;AACD,GAxBD;;AA0BA,SAAO;AACL,IAAA,YADK;AAEL,IAAA;AAFK,GAAP;AAID","sourcesContent":["import { provide, inject, ref } from 'vue'\n\nimport { Group } from '../../types'\n\nexport function useGroup() {\n  const provideGroup = (groupName: string, options = {}) => {\n    const groups = ref<Group[]>([])\n\n    Object.keys(options).forEach((key) => {\n      let value\n\n      if (typeof options[key] === 'function') {\n        value = options[key].bind(null, groups)\n      } else {\n        value = options[key]\n      }\n\n      Object.defineProperty(options, key, { value })\n    })\n\n    provide(groupName, {\n      groups,\n      ...options,\n    })\n  }\n\n  const injectGroup = (groupName: string) => {\n    let injected: any = {}\n\n    injected = inject(groupName) || null\n\n    const register = (group: Group) => {\n      injected.groups.value.push(group)\n    }\n\n    const unregister = (group: Group) => {\n      injected.groups.value.filter((it) => {\n        return it.ref !== group.ref\n      })\n    }\n\n    if (injected) {\n      return {\n        ...injected,\n        register,\n        unregister,\n      }\n    }\n\n    return null\n  }\n\n  return {\n    provideGroup,\n    injectGroup,\n  }\n}\n"],"sourceRoot":"","file":"use-group.js"}