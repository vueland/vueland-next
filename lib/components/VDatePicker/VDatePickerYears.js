import { h, ref, watchEffect, inject, computed, defineComponent } from 'vue';
import { genTableRows } from './helpers';
import { useTransition } from '../../composables/use-transition';
export const VDatePickerYears = defineComponent({
    name: 'v-date-picker-years',
    props: {
        year: [Number, String],
    },
    emits: ['update:year'],
    setup(props, { emit }) {
        const LIMIT = 100;
        const ON_TABLE = 20;
        const CELLS_IN_ROW = 4;
        const CURRENT_YEAR = new Date().getFullYear();
        const ANIMATION_TIMEOUT = 100;
        const years = ref([]);
        const onTableIndex = ref(0);
        const isListChanged = ref(false);
        const transition = ref('');
        const handlers = inject('handlers');
        watchEffect(() => isListChanged.value &&
            setTimeout(() => {
                isListChanged.value = false;
            }, ANIMATION_TIMEOUT));
        const computedYear = computed({
            get() {
                return +props.year || CURRENT_YEAR;
            },
            set(val) {
                emit('update:year', val);
            },
        });
        if (handlers?.value) {
            handlers.value = {
                onNext: () => changeYearsList(true),
                onPrev: () => changeYearsList(false),
            };
        }
        const setCurrentTransition = (isNext) => {
            transition.value = isNext ? 'fade-in-down' : 'fade-in-up';
        };
        const setTableIndex = () => {
            onTableIndex.value = years.value.findIndex((row) => {
                return row.find((year) => year === computedYear.value);
            });
        };
        const changeYearsList = (isNext) => {
            const max = years.value.length - 1;
            const val = isNext ? 1 : -1;
            if ((onTableIndex.value === max && val > 0) ||
                (onTableIndex.value === 0 && val < 0))
                return;
            setCurrentTransition(isNext);
            onTableIndex.value += val;
            isListChanged.value = true;
        };
        const genTableYears = () => {
            const fromYear = CURRENT_YEAR - LIMIT;
            const maxYears = LIMIT * 2;
            let yearsList = [];
            for (let i = 0; i <= maxYears; i += 1) {
                if (yearsList.length === ON_TABLE) {
                    years.value.push(yearsList);
                    yearsList = [];
                }
                yearsList.push(fromYear + i);
            }
        };
        const genYearCell = (year) => {
            const isSelected = year === computedYear.value;
            const propsData = {
                class: {
                    'v-date-picker-years__cell': true,
                    'v-date-picker-years__cell--selected': isSelected,
                    'v-date-picker-years__cell--current-year': year === CURRENT_YEAR,
                },
                onClick: () => (computedYear.value = year),
            };
            return h('div', propsData, year);
        };
        const genYearsRows = () => {
            const currentYears = years.value[onTableIndex.value];
            const yearsVNodes = currentYears.map(genYearCell);
            return genTableRows(yearsVNodes, 'v-date-picker-years__row', CELLS_IN_ROW);
        };
        const genYears = () => {
            const propsData = { class: 'v-date-picker-years__years' };
            return ((!isListChanged.value && h('div', propsData, genYearsRows())) || null);
        };
        genTableYears();
        setTableIndex();
        return () => {
            const content = useTransition(genYears(), transition.value);
            const propsData = { class: { 'v-date-picker-years': true } };
            return h('div', propsData, content);
        };
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkRhdGVQaWNrZXJZZWFycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL3Z1ZWxhbmQvc3JjL2NvbXBvbmVudHMvVkRhdGVQaWNrZXIvVkRhdGVQaWNrZXJZZWFycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsTUFBTSxLQUFLLENBQUE7QUFHNUUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFdBQVcsQ0FBQTtBQU94QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0NBQWtDLENBQUE7QUFFaEUsTUFBTSxDQUFDLE1BQU0sZ0JBQWdCLEdBQUcsZUFBZSxDQUFDO0lBQzlDLElBQUksRUFBRSxxQkFBcUI7SUFFM0IsS0FBSyxFQUFFO1FBQ0wsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztLQUNoQjtJQUVSLEtBQUssRUFBRSxDQUFDLGFBQWEsQ0FBQztJQUV0QixLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFO1FBQ25CLE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQTtRQUNqQixNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUE7UUFDbkIsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFBO1FBQ3RCLE1BQU0sWUFBWSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUE7UUFDN0MsTUFBTSxpQkFBaUIsR0FBRyxHQUFHLENBQUE7UUFFN0IsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFrQixFQUFFLENBQUMsQ0FBQTtRQUN0QyxNQUFNLFlBQVksR0FBRyxHQUFHLENBQVMsQ0FBQyxDQUFDLENBQUE7UUFDbkMsTUFBTSxhQUFhLEdBQUcsR0FBRyxDQUFVLEtBQUssQ0FBQyxDQUFBO1FBQ3pDLE1BQU0sVUFBVSxHQUFHLEdBQUcsQ0FB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LEVBQUUsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQ3BFLE1BQU0sU0FBUyxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUUscUJBQXFCLEVBQUUsSUFBSSxFQUFFLEVBQUUsQ0FBQTtZQUU1RCxPQUFPLENBQUMsQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFBO1FBQ3JDLENBQUMsQ0FBQTtJQUNILENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBWVWUgQVBJXG5pbXBvcnQgeyBoLCByZWYsIHdhdGNoRWZmZWN0LCBpbmplY3QsIGNvbXB1dGVkLCBkZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnXG5cbi8vIEhlbHBlcnNcbmltcG9ydCB7IGdlblRhYmxlUm93cyB9IGZyb20gJy4vaGVscGVycydcblxuLy8gVHlwZXNcbmltcG9ydCB7IFZOb2RlLCBSZWYgfSBmcm9tICd2dWUnXG5pbXBvcnQgeyBEYXRlUGlja2VyQnRuSGFuZGxlcnMgfSBmcm9tICcuLi8uLi8uLi90eXBlcydcblxuLy8gRWZmZWN0c1xuaW1wb3J0IHsgdXNlVHJhbnNpdGlvbiB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3VzZS10cmFuc2l0aW9uJ1xuXG5leHBvcnQgY29uc3QgVkRhdGVQaWNrZXJZZWFycyA9IGRlZmluZUNvbXBvbmVudCh7XG4gIG5hbWU6ICd2LWRhdGUtcGlja2VyLXllYXJzJyxcblxuICBwcm9wczoge1xuICAgIHllYXI6IFtOdW1iZXIsIFN0cmluZ10sXG4gIH0gYXMgYW55LFxuXG4gIGVtaXRzOiBbJ3VwZGF0ZTp5ZWFyJ10sXG5cbiAgc2V0dXAocHJvcHMsIHsgZW1pdCB9KSB7XG4gICAgY29uc3QgTElNSVQgPSAxMDBcbiAgICBjb25zdCBPTl9UQUJMRSA9IDIwXG4gICAgY29uc3QgQ0VMTFNfSU5fUk9XID0gNFxuICAgIGNvbnN0IENVUlJFTlRfWUVBUiA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKVxuICAgIGNvbnN0IEFOSU1BVElPTl9USU1FT1VUID0gMTAwXG5cbiAgICBjb25zdCB5ZWFycyA9IHJlZjxBcnJheTxudW1iZXJbXT4+KFtdKVxuICAgIGNvbnN0IG9uVGFibGVJbmRleCA9IHJlZjxudW1iZXI+KDApXG4gICAgY29uc3QgaXNMaXN0Q2hhbmdlZCA9IHJlZjxib29sZWFuPihmYWxzZSlcbiAgICBjb25zdCB0cmFuc2l0aW9uID0gcmVmPHN0cmluZz4oJycpXG5cbiAgICBjb25zdCBoYW5kbGVycyA9IGluamVjdCgnaGFuZGxlcnMnKSBhcyBSZWY8RGF0ZVBpY2tlckJ0bkhhbmRsZXJzPlxuXG4gICAgd2F0Y2hFZmZlY3QoXG4gICAgICAoKSA9PlxuICAgICAgICBpc0xpc3RDaGFuZ2VkLnZhbHVlICYmXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlzTGlzdENoYW5nZWQudmFsdWUgPSBmYWxzZVxuICAgICAgICB9LCBBTklNQVRJT05fVElNRU9VVClcbiAgICApXG5cbiAgICBjb25zdCBjb21wdXRlZFllYXIgPSBjb21wdXRlZDxudW1iZXI+KHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuICtwcm9wcy55ZWFyISB8fCBDVVJSRU5UX1lFQVJcbiAgICAgIH0sXG4gICAgICBzZXQodmFsOiBudW1iZXIpIHtcbiAgICAgICAgZW1pdCgndXBkYXRlOnllYXInLCB2YWwpXG4gICAgICB9LFxuICAgIH0pXG5cbiAgICBpZiAoaGFuZGxlcnM/LnZhbHVlKSB7XG4gICAgICBoYW5kbGVycy52YWx1ZSA9IHtcbiAgICAgICAgb25OZXh0OiAoKSA9PiBjaGFuZ2VZZWFyc0xpc3QodHJ1ZSksXG4gICAgICAgIG9uUHJldjogKCkgPT4gY2hhbmdlWWVhcnNMaXN0KGZhbHNlKSxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZXRDdXJyZW50VHJhbnNpdGlvbiA9IChpc05leHQpID0+IHtcbiAgICAgIHRyYW5zaXRpb24udmFsdWUgPSBpc05leHQgPyAnZmFkZS1pbi1kb3duJyA6ICdmYWRlLWluLXVwJ1xuICAgIH1cblxuICAgIGNvbnN0IHNldFRhYmxlSW5kZXggPSAoKSA9PiB7XG4gICAgICBvblRhYmxlSW5kZXgudmFsdWUgPSB5ZWFycy52YWx1ZS5maW5kSW5kZXgoKHJvdykgPT4ge1xuICAgICAgICByZXR1cm4gcm93LmZpbmQoKHllYXIpID0+IHllYXIgPT09IGNvbXB1dGVkWWVhci52YWx1ZSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlWWVhcnNMaXN0ID0gKGlzTmV4dCkgPT4ge1xuICAgICAgY29uc3QgbWF4ID0geWVhcnMudmFsdWUubGVuZ3RoIC0gMVxuICAgICAgY29uc3QgdmFsID0gaXNOZXh0ID8gMSA6IC0xXG5cbiAgICAgIGlmIChcbiAgICAgICAgKG9uVGFibGVJbmRleC52YWx1ZSA9PT0gbWF4ICYmIHZhbCA+IDApIHx8XG4gICAgICAgIChvblRhYmxlSW5kZXgudmFsdWUgPT09IDAgJiYgdmFsIDwgMClcbiAgICAgIClcbiAgICAgICAgcmV0dXJuXG5cbiAgICAgIHNldEN1cnJlbnRUcmFuc2l0aW9uKGlzTmV4dClcblxuICAgICAgb25UYWJsZUluZGV4LnZhbHVlICs9IHZhbFxuICAgICAgaXNMaXN0Q2hhbmdlZC52YWx1ZSA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBnZW5UYWJsZVllYXJzID0gKCkgPT4ge1xuICAgICAgY29uc3QgZnJvbVllYXIgPSBDVVJSRU5UX1lFQVIgLSBMSU1JVFxuICAgICAgY29uc3QgbWF4WWVhcnMgPSBMSU1JVCAqIDJcblxuICAgICAgbGV0IHllYXJzTGlzdDogbnVtYmVyW10gPSBbXVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBtYXhZZWFyczsgaSArPSAxKSB7XG4gICAgICAgIGlmICh5ZWFyc0xpc3QubGVuZ3RoID09PSBPTl9UQUJMRSkge1xuICAgICAgICAgIHllYXJzLnZhbHVlLnB1c2goeWVhcnNMaXN0KVxuICAgICAgICAgIHllYXJzTGlzdCA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgeWVhcnNMaXN0LnB1c2goZnJvbVllYXIgKyBpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGdlblllYXJDZWxsID0gKHllYXIpOiBWTm9kZSA9PiB7XG4gICAgICBjb25zdCBpc1NlbGVjdGVkID0geWVhciA9PT0gY29tcHV0ZWRZZWFyLnZhbHVlXG4gICAgICBjb25zdCBwcm9wc0RhdGEgPSB7XG4gICAgICAgIGNsYXNzOiB7XG4gICAgICAgICAgJ3YtZGF0ZS1waWNrZXIteWVhcnNfX2NlbGwnOiB0cnVlLFxuICAgICAgICAgICd2LWRhdGUtcGlja2VyLXllYXJzX19jZWxsLS1zZWxlY3RlZCc6IGlzU2VsZWN0ZWQsXG4gICAgICAgICAgJ3YtZGF0ZS1waWNrZXIteWVhcnNfX2NlbGwtLWN1cnJlbnQteWVhcic6IHllYXIgPT09IENVUlJFTlRfWUVBUixcbiAgICAgICAgfSxcbiAgICAgICAgb25DbGljazogKCkgPT4gKGNvbXB1dGVkWWVhci52YWx1ZSA9IHllYXIpLFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaCgnZGl2JywgcHJvcHNEYXRhLCB5ZWFyKVxuICAgIH1cblxuICAgIGNvbnN0IGdlblllYXJzUm93cyA9ICgpOiBWTm9kZVtdID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRZZWFycyA9IHllYXJzLnZhbHVlW29uVGFibGVJbmRleC52YWx1ZV1cbiAgICAgIGNvbnN0IHllYXJzVk5vZGVzID0gY3VycmVudFllYXJzLm1hcChnZW5ZZWFyQ2VsbClcblxuICAgICAgcmV0dXJuIGdlblRhYmxlUm93cyh5ZWFyc1ZOb2RlcywgJ3YtZGF0ZS1waWNrZXIteWVhcnNfX3JvdycsIENFTExTX0lOX1JPVylcbiAgICB9XG5cbiAgICBjb25zdCBnZW5ZZWFycyA9ICgpOiBWTm9kZSB8IG51bGwgPT4ge1xuICAgICAgY29uc3QgcHJvcHNEYXRhID0geyBjbGFzczogJ3YtZGF0ZS1waWNrZXIteWVhcnNfX3llYXJzJyB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICAoIWlzTGlzdENoYW5nZWQudmFsdWUgJiYgaCgnZGl2JywgcHJvcHNEYXRhLCBnZW5ZZWFyc1Jvd3MoKSkpIHx8IG51bGxcbiAgICAgIClcbiAgICB9XG5cbiAgICBnZW5UYWJsZVllYXJzKClcbiAgICBzZXRUYWJsZUluZGV4KClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZW50ID0gdXNlVHJhbnNpdGlvbihnZW5ZZWFycygpIGFzIFZOb2RlLCB0cmFuc2l0aW9uLnZhbHVlKVxuICAgICAgY29uc3QgcHJvcHNEYXRhID0geyBjbGFzczogeyAndi1kYXRlLXBpY2tlci15ZWFycyc6IHRydWUgfSB9XG5cbiAgICAgIHJldHVybiBoKCdkaXYnLCBwcm9wc0RhdGEsIGNvbnRlbnQpXG4gICAgfVxuICB9LFxufSlcbiJdfQ==