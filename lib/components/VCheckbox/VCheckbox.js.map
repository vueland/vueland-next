{"version":3,"sources":["../../../../src/components/VCheckbox/VCheckbox.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VCheckbox.scss'\n\n// Vue API\nimport { h, ref, watch, computed, defineComponent, inject } from 'vue'\n\n// Effects\nimport { useValidate } from '@/effects/use-validate'\n\n// Components\nimport { VIcon } from '../VIcon'\nimport { VLabel } from '../VLabel'\n\n// Services\nimport { FaIcons } from '../../services/icons'\n\n// Helpers\nimport { warning } from '../../helpers'\n\n// Types\nimport { VNode, Ref } from 'vue'\n\nexport const VCheckbox = defineComponent({\n  name: 'v-checkbox',\n\n  props: {\n    onIcon: {\n      type: String,\n      default: FaIcons.$checkOn,\n    },\n    offIcon: {\n      type: String,\n      default: FaIcons.$checkOff,\n    },\n    dark: Boolean,\n    label: String,\n    disabled: Boolean,\n    validate: Boolean,\n    modelValue: [Array, Boolean],\n    value: {\n      default: null,\n    },\n    color: {\n      type: String,\n      default: 'primary',\n    },\n  } as any,\n\n  setup(props, { emit }): () => VNode {\n    const isChecked = ref(false)\n    const fields: Ref<any[]> | undefined = props.validate && inject('fields')\n\n    const { validate, validationState } = useValidate(props)\n\n    const isArray = computed<boolean>(() => Array.isArray(props.modelValue))\n    const isValueSet = computed<boolean>(() => props.value !== null)\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-checkbox': true,\n      'v-checkbox--disabled': props.disabled,\n      'v-checkbox--checked': isChecked.value,\n      'v-validatable': props.validate,\n    }))\n\n    watch(\n      () => props.modelValue,\n      () => {\n        if (isArray.value) {\n          if (isValueSet.value) {\n            isChecked.value = props.modelValue.includes(props.value)\n          } else {\n            warning('v-checkbox: set the \"value\" property')\n          }\n        } else {\n          isChecked.value = !!props.modelValue\n        }\n      },\n      { immediate: true },\n    )\n\n    if (fields?.value) {\n      fields!.value.push(validateValue)\n    }\n\n    function validateValue(): boolean | void {\n      return validate(isChecked.value)\n    }\n\n    function genLabel(): VNode {\n      const propsData = {\n        absolute: false,\n        color: props.dark ? 'white' : '',\n        disabled: props.disabled,\n        class: 'v-checkbox__label',\n      }\n\n      return h(VLabel, propsData, {\n        default: () => props.label,\n      })\n    }\n\n    function genIcon(): VNode {\n      const icon = isChecked.value ? props.onIcon : props.offIcon\n\n      const propsData = {\n        icon,\n        size: 20,\n        color: validationState.value,\n        disabled: props.disabled,\n      }\n\n      return h(VIcon, propsData)\n    }\n\n    function genCheckbox(): VNode {\n      const propsData = {\n        class: {\n          'v-checkbox__square': true,\n        },\n      }\n\n      return h('div', propsData, genIcon())\n    }\n\n    function computeValue(): boolean | any[] {\n      let { modelValue } = props\n\n      if (isArray.value) {\n        isChecked.value = !modelValue.includes(props.value)\n\n        if (!isChecked.value) {\n          modelValue = modelValue.filter(it => it !== props.value)\n        } else {\n          modelValue.push(props.value)\n        }\n\n        return modelValue\n      }\n\n      return (isChecked.value = !isChecked.value)\n    }\n\n    function onClick() {\n      if (props.disabled) return\n      const value = computeValue()\n\n      props.validate && validateValue()\n      emit('update:modelValue', value)\n      emit('checked', value)\n    }\n\n    return (): VNode => {\n      const dataProps = {\n        class: classes.value,\n        onClick,\n      }\n\n      return h('div', dataProps, [genCheckbox(), props.label && genLabel()])\n    }\n  },\n})\n"],"sourceRoot":"","file":"VCheckbox.js"}