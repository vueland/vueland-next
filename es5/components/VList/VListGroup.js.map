{"version":3,"sources":["../../../../src/components/VList/VListGroup.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VListGroup.scss'\n\n// Vue API\nimport {\n  h,\n  ref,\n  computed,\n  withDirectives,\n  defineComponent,\n  onBeforeUnmount,\n  onMounted,\n  vShow,\n} from 'vue'\n\n// Effects\nimport { useIcons } from '../../effects/use-icons'\nimport { useColors } from '../../effects/use-colors'\nimport { useGroup } from '../../effects/use-group'\nimport { elevationProps, useElevation } from '../../effects/use-elevation'\n\n// Components\nimport { VIcon } from '../VIcon'\nimport { VListItem } from './VListItem'\nimport { VListItemIcon } from './index'\nimport { VExpandTransition } from '../transitions'\n\n// Types\nimport { VNode, ComponentPublicInstance, Ref } from 'vue'\nimport { Group } from '../../../types'\n\nexport const VListGroup = defineComponent({\n  name: 'v-list-group',\n  props: {\n    activeClass: {\n      type: String,\n      default: '',\n    },\n    appendIcon: {\n      type: String,\n      default: '',\n    },\n    prependIcon: {\n      type: String,\n      default: '',\n    },\n    color: {\n      type: String,\n      default: '',\n    },\n    dark: Boolean,\n    multiple: Boolean,\n    group: String,\n    disabled: Boolean,\n    active: Boolean,\n    noAction: Boolean,\n    expanded: Boolean,\n    subGroup: Boolean,\n    value: Boolean,\n    modelValue: Boolean,\n    ...elevationProps(),\n  } as any,\n\n  setup(props, { slots }) {\n    const { setTextColor } = useColors()\n    const { elevationClasses } = useElevation(props)\n    const { icons, iconSize } = useIcons('md')\n    const { injectGroup, provideGroup } = useGroup()\n\n    const refGroup: Ref<HTMLElement | ComponentPublicInstance | null> = ref(\n      null\n    )\n    const isActive = ref<boolean>(false)\n    const childrenGroups = ref<Group[]>([])\n\n    provideGroup('subgroups')\n    provideGroup('selected')\n    provideGroup('items')\n\n    const groups = injectGroup('list-groups')\n    const subgroups = props.subGroup && injectGroup('subgroups')\n    const listGroup = genListGroupParams()\n\n    const isNotActive = computed<boolean>(() => {\n      return !props.subGroup && !props.active\n    })\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-list-group': true,\n      'v-list-group__sub-group': props.subGroup,\n      'v-list-group--active': isActive.value,\n      'v-list-group--no-action': props.noAction,\n      [props.activeClass]: isActive.value,\n      ...elevationClasses.value,\n    }))\n\n    function onClick() {\n      if (isNotActive.value) return\n\n      if (groups) groups.listClick(listGroup)\n\n      if (childrenGroups.value.length) {\n        childrenGroups.value.forEach((it: any) => (it.active = false))\n      }\n    }\n\n    function genListGroupParams<T extends keyof Group>() {\n      return {\n        ref: refGroup as Ref<Group[T]>,\n        active: isActive as Ref<Group[T]>,\n      }\n    }\n\n    function genIcon(icon: string): VNode {\n      const propsData = {\n        size: iconSize,\n      }\n\n      return h(VIcon, propsData, { default: () => icon })\n    }\n\n    function genAppendIcon(): VNode | null {\n      const slotAppendIcon = slots.appendIcon && slots.appendIcon()\n\n      const propsAppendIcon = !props.subGroup ? icons.$expand : props.appendIcon\n\n      if (!propsAppendIcon && !slotAppendIcon) return null\n\n      const propsData = {\n        class: 'v-list-group__append-icon',\n      }\n\n      return h(VListItemIcon, propsData, {\n        default: () => slotAppendIcon || genIcon(propsAppendIcon as string),\n      })\n    }\n\n    function genPrependIcon(): VNode | null {\n      const icon = props.subGroup ? icons.$subgroup : props.prependIcon\n\n      const slotIcon = slots.prependIcon && slots.prependIcon()\n\n      if (!icon && !slotIcon) return null\n\n      const propsData = { class: 'v-list-group__prepend-icon' }\n\n      return h(VListItemIcon, propsData, {\n        default: () => slotIcon || genIcon(icon as string),\n      })\n    }\n\n    function genGroupHeader(): VNode {\n      const propsData = {\n        class: {\n          'v-list-group__header': true,\n        },\n        onClick,\n      }\n\n      return h(VListItem, propsData, {\n        default: () => [\n          genPrependIcon(),\n          slots.title && slots.title(),\n          genAppendIcon(),\n        ],\n      })\n    }\n\n    function genItems(): VNode {\n      const propsData = {\n        class: 'v-list-group__items',\n      }\n\n      return withDirectives(\n        h('div', propsData, slots.default && slots.default()),\n        [[vShow, isActive.value]]\n      )\n    }\n\n    onMounted(() => {\n      if (groups) groups.register(listGroup)\n      if (subgroups) subgroups.register(listGroup)\n      if (isNotActive.value) isActive.value = true\n    })\n\n    onBeforeUnmount(() => {\n      groups.unregister(listGroup)\n    })\n\n    return () => {\n      const items = slots.default && VExpandTransition(genItems())\n      const header = slots.title && genGroupHeader()\n\n      const propsData = {\n        class: classes.value,\n        ref: refGroup,\n      }\n\n      const children = [header, items]\n      const color = props.dark ? 'white' : props.color\n\n      return h(\n        'div',\n        color ? setTextColor(color, propsData) : propsData,\n        children\n      )\n    }\n  },\n})\n"],"sourceRoot":"","file":"VListGroup.js"}