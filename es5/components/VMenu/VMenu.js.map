{"version":3,"sources":["../../../../src/components/VMenu/VMenu.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VMenu.scss'\n\n// Vue API\nimport {\n  h,\n  defineComponent,\n  withDirectives,\n  computed,\n  watch,\n  onMounted,\n  onBeforeUnmount,\n} from 'vue'\n\n// Effects\nimport {\n  autoPositionProps,\n  useAutoPosition,\n} from '../../effects/use-auto-position'\nimport { activatorProps, useActivator } from '../../effects/use-activator'\nimport { useDetach } from '../../effects/use-detach'\nimport { useTransition } from '../../effects/use-transition'\nimport { useElevation } from '../../effects/use-elevation'\nimport { useToggle } from '../../effects/use-toggle'\nimport { positionProps } from '../../effects/use-position'\n\n// Helpers\nimport { convertToUnit } from '../../helpers'\n\n// Directives\nimport { clickOutside, resize } from '../../directives'\nimport { vShow } from 'vue'\n\n// Types\nimport { VNode } from 'vue'\n\nexport const VMenu = defineComponent({\n  name: 'v-menu',\n  props: {\n    maxHeight: {\n      type: [Number, String],\n      default: 200,\n    },\n    width: {\n      type: [Number, String],\n      default: 0,\n    },\n    zIndex: {\n      type: [String, Number],\n      default: 10,\n    },\n    parent: {\n      type: Object,\n      default: null,\n    },\n    inputActivator: {\n      type: String,\n      default: null,\n    },\n    openOnHover: Boolean,\n    openOnClick: Boolean,\n    openOnContextmenu: Boolean,\n    closeOnContentClick: {\n      type: Boolean,\n      default: true,\n    },\n    closeOnClick: {\n      type: Boolean,\n      default: true,\n    },\n    elevation: {\n      type: [Number, String],\n      default: 10,\n    },\n    modelValue: Boolean,\n    ...positionProps(),\n    ...autoPositionProps(),\n    ...activatorProps(),\n  },\n\n  emits: ['open', 'close'],\n\n  setup(props, { emit, slots }) {\n    const { elevationClasses } = useElevation(props)\n    const { isActive } = useToggle(props)\n    const { contentRef, setDimensions, dimensions } = useAutoPosition(props)\n    const { setDetached, removeDetached } = useDetach()\n    const {\n      activatorRef,\n      getActivator,\n      genActivatorListeners,\n      addActivatorEvents,\n      removeActivatorEvents,\n    } = useActivator(props)\n\n    const handlers = {\n      click: (e) => {\n        setDimensions(getActivator(e)).then(() => {\n          requestAnimationFrame(() => (isActive.value = true))\n        })\n      },\n      mouseenter: () => (isActive.value = true),\n      mouseleave: () => (isActive.value = false),\n      contextmenu: () => (isActive.value = true),\n    }\n\n    const listeners = genActivatorListeners(props, handlers)\n\n    const directive = computed(() => {\n      return isActive.value\n        ? {\n            handler: () => (isActive.value = false),\n            closeConditional: props.closeOnContentClick,\n          }\n        : undefined\n    })\n\n    const calcWidth = computed<number | string>(() => {\n      return props.width || +dimensions.content.width\n    })\n\n    watch(\n      () => isActive.value,\n      (to) => {\n        to && emit('open')\n        !to && emit('close')\n      }\n    )\n\n    watch(\n      () => [props.positionY, props.positionX],\n      () => setDimensions(activatorRef.value)\n    )\n\n    watch(\n      () => props.modelValue,\n      (to) => {\n        isActive.value = false\n        requestAnimationFrame(() => (isActive.value = to))\n      }\n    )\n\n    function genActivatorSlot(): VNode | null {\n      if (slots.activator) {\n        const slotContent = slots.activator({ on: listeners })\n\n        if (typeof slotContent![0].type === 'object') {\n          return h('div', { ref: activatorRef }, h(slotContent![0]))\n        }\n\n        return h(slotContent![0], { ref: activatorRef })\n      }\n\n      return null\n    }\n\n    function genContentSlot(): VNode {\n      const propsData = {\n        ref: contentRef,\n        class: {\n          'v-menu__content': true,\n          ...elevationClasses.value,\n        },\n        style: {\n          maxHeight: convertToUnit(props.maxHeight),\n          width: convertToUnit(calcWidth.value),\n          top: convertToUnit(dimensions.content.top),\n          left: convertToUnit(dimensions.content.left),\n          zIndex: props.zIndex,\n          position: props.absolute ? 'absolute' : '',\n        },\n        onClick: () => {\n          isActive.value = !props.closeOnContentClick\n        },\n      }\n\n      const content = h('div', propsData, [slots.default && slots.default()])\n\n      const directives: any = [\n        [vShow, isActive.value],\n        [resize, onResize],\n      ]\n\n      if (props.closeOnClick) directives.push([clickOutside, directive.value])\n\n      return withDirectives(content, directives)\n    }\n\n    onMounted(() => {\n      activatorRef.value = getActivator()\n      addActivatorEvents()\n      setDetached(contentRef.value)\n    })\n\n    onBeforeUnmount(() => {\n      removeActivatorEvents()\n      removeDetached(contentRef.value)\n    })\n\n    function onResize() {\n      if (!isActive.value) return\n      requestAnimationFrame(() => setDimensions(activatorRef))\n    }\n\n    return () => [\n      h('div', { class: { 'v-menu': true } }),\n      slots.activator && genActivatorSlot(),\n      useTransition(genContentSlot(), 'fade'),\n    ]\n  },\n})\n"],"sourceRoot":"","file":"VMenu.js"}