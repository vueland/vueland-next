import { defineComponent, h, withDirectives, ref, watch, computed, vShow } from 'vue';
import { ExpandTransition } from '../transitions';
import { VIcon } from '../VIcon';
import { useColors, colorProps } from '../../composable/use-colors';
import { useIcons } from '../../composable/use-icons';
export const VGroup = defineComponent({
    name: 'v-group',
    props: {
        expand: Boolean,
        subgroup: Boolean,
        title: {
            type: String,
            default: '',
        },
        activeClass: {
            type: String,
            default: 'main--text text--evo',
        },
        prependIcon: {
            type: String,
            default: '',
        },
        appendIcon: {
            type: String,
            default: '',
        },
        ...colorProps(),
    },
    setup(props, { slots }) {
        const { icons } = useIcons();
        const { setBackgroundCssColor, setBackgroundClassNameColor } = useColors();
        const isActive = ref(false);
        const classes = computed(() => ({
            'v-group': true,
            'v-group--subgroup': props.subgroup,
            'v-group--active': isActive.value,
            'v-group--default': !isActive.value,
            [props.activeClass]: !!props.activeClass && isActive.value,
            ...setBackgroundClassNameColor(props.color),
        }));
        const styles = computed(() => ({
            ...setBackgroundCssColor(props.color),
        }));
        const genHeaderContent = () => {
            const content = props.title || slots.header?.();
            return h('div', {
                class: 'v-group__header-content',
            }, content);
        };
        const genExpandIcon = (icon) => {
            return h('div', {
                class: 'v-group__expand-icon',
            }, icon);
        };
        const genSubExpandIcon = (icon) => {
            return h('div', {
                class: 'v-group__sub-expand-icon',
            }, icon);
        };
        const genPrependIcon = (icon) => {
            return h('div', {
                class: 'v-group__prepend-icon',
            }, icon);
        };
        const genAppendIcon = (icon) => {
            return h('div', {
                class: 'v-group__append-icon',
            }, icon);
        };
        const genIcon = (iconName) => {
            return h(VIcon, {
                icon: iconName,
                size: 16,
            });
        };
        const genGroupHeader = () => {
            return h('div', {
                class: 'v-group__header',
                onClick: () => isActive.value = !isActive.value,
            }, [
                props.subgroup && genSubExpandIcon(genIcon(icons.$caretDown)),
                props.prependIcon && genPrependIcon(genIcon(props.prependIcon)),
                genHeaderContent(),
                props.appendIcon && genAppendIcon(genIcon(props.appendIcon)),
                !props.subgroup && genExpandIcon(genIcon(icons.$chevronDown)),
            ]);
        };
        const genGroupChildContent = () => {
            return withDirectives(h('div', {
                class: 'v-group__content',
            }, {
                default: () => slots.default?.(),
            }), [[vShow, isActive.value]]);
        };
        watch(() => props.expand, to => isActive.value = to, { immediate: true });
        return () => h('div', {
            class: classes.value,
            style: styles.value,
        }, [
            genGroupHeader(),
            ExpandTransition(genGroupChildContent()),
        ]);
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkdyb3VwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVkdyb3VwL1ZHcm91cC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFFLENBQUMsRUFBRSxjQUFjLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFTLE1BQU0sS0FBSyxDQUFBO0FBQzVGLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGdCQUFnQixDQUFBO0FBRWpELE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFFaEMsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQTtBQUNuRSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sNEJBQTRCLENBQUE7QUFFckQsTUFBTSxDQUFDLE1BQU0sTUFBTSxHQUFHLGVBQWUsQ0FBQztJQUNwQyxJQUFJLEVBQUUsU0FBUztJQUNmLEtBQUssRUFBRTtRQUNMLE1BQU0sRUFBRSxPQUFPO1FBQ2YsUUFBUSxFQUFFLE9BQU87UUFDakIsS0FBSyxFQUFFO1lBQ0wsSUFBSSxFQUFFLE1BQU07WUFDWixPQUFPLEVBQUUsRUFBRTtTQUNaO1FBQ0QsV0FBVyxFQUFFO1lBQ1gsSUFBSSxFQUFFLE1BQU07WUFDWixPQUFPLEVBQUUsc0JBQXNCO1NBQ2hDO1FBQ0QsV0FBVyxFQUFFO1lBQ1gsSUFBSSxFQUFFLE1BQU07WUFDWixPQUFPLEVBQUUsRUFBRTtTQUNaO1FBQ0QsVUFBVSxFQUFFO1lBQ1YsSUFBSSxFQUFFLE1BQU07WUFDWixPQUFPLEVBQUUsRUFBRTtTQUNaO1FBQ0QsR0FBRyxVQUFVLEVBQUU7S0FDaEI7SUFDRCxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFO1FBQ3BCLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxRQUFRLEVBQUUsQ0FBQTtRQUM1QixNQUFNLEVBQUUs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VSxDQUFDLENBQUM7Z0JBQzVELENBQUMsS0FBSyxDQUFDLFFBQVEsSUFBSSxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQzthQUM5RCxDQUNGLENBQUE7UUFDSCxDQUFDLENBQUE7UUFFRCxNQUFNLG9CQUFvQixHQUFHLEdBQVUsRUFBRTtZQUN2QyxPQUFPLGNBQWMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFO2dCQUM3QixLQUFLLEVBQUUsa0JBQWtCO2FBQzFCLEVBQUU7Z0JBQ0QsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRTthQUNqQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ2hDLENBQUMsQ0FBQTtRQUVELEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQTtRQUV6RSxPQUFPLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUU7WUFDcEIsS0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFLO1lBQ3BCLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSztTQUNwQixFQUFFO1lBQ0QsY0FBYyxFQUFFO1lBQ2hCLGdCQUFnQixDQUFDLG9CQUFvQixFQUFFLENBQUM7U0FDekMsQ0FBQyxDQUFBO0lBQ0osQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgaCwgd2l0aERpcmVjdGl2ZXMsIHJlZiwgd2F0Y2gsIGNvbXB1dGVkLCB2U2hvdywgVk5vZGUgfSBmcm9tICd2dWUnXG5pbXBvcnQgeyBFeHBhbmRUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbnMnXG5cbmltcG9ydCB7IFZJY29uIH0gZnJvbSAnLi4vVkljb24nXG5cbmltcG9ydCB7IHVzZUNvbG9ycywgY29sb3JQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGUvdXNlLWNvbG9ycydcbmltcG9ydCB7IHVzZUljb25zIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZS91c2UtaWNvbnMnXG5cbmV4cG9ydCBjb25zdCBWR3JvdXAgPSBkZWZpbmVDb21wb25lbnQoe1xuICBuYW1lOiAndi1ncm91cCcsXG4gIHByb3BzOiB7XG4gICAgZXhwYW5kOiBCb29sZWFuLFxuICAgIHN1Ymdyb3VwOiBCb29sZWFuLFxuICAgIHRpdGxlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICB9LFxuICAgIGFjdGl2ZUNsYXNzOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnbWFpbi0tdGV4dCB0ZXh0LS1ldm8nLFxuICAgIH0sXG4gICAgcHJlcGVuZEljb246IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgIH0sXG4gICAgYXBwZW5kSWNvbjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJycsXG4gICAgfSxcbiAgICAuLi5jb2xvclByb3BzKCksXG4gIH0sXG4gIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pOiAoKSA9PiBWTm9kZSB7XG4gICAgY29uc3QgeyBpY29ucyB9ID0gdXNlSWNvbnMoKVxuICAgIGNvbnN0IHsgc2V0QmFja2dyb3VuZENzc0NvbG9yLCBzZXRCYWNrZ3JvdW5kQ2xhc3NOYW1lQ29sb3IgfSA9IHVzZUNvbG9ycygpXG5cbiAgICBjb25zdCBpc0FjdGl2ZSA9IHJlZjxib29sZWFuPihmYWxzZSlcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZDxSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj4oKCkgPT4gKHtcbiAgICAgICd2LWdyb3VwJzogdHJ1ZSxcbiAgICAgICd2LWdyb3VwLS1zdWJncm91cCc6IHByb3BzLnN1Ymdyb3VwLFxuICAgICAgJ3YtZ3JvdXAtLWFjdGl2ZSc6IGlzQWN0aXZlLnZhbHVlLFxuICAgICAgJ3YtZ3JvdXAtLWRlZmF1bHQnOiAhaXNBY3RpdmUudmFsdWUsXG4gICAgICBbcHJvcHMuYWN0aXZlQ2xhc3NdOiAhIXByb3BzLmFjdGl2ZUNsYXNzICYmIGlzQWN0aXZlLnZhbHVlLFxuICAgICAgLi4uc2V0QmFja2dyb3VuZENsYXNzTmFtZUNvbG9yKHByb3BzLmNvbG9yKSxcbiAgICB9KSlcblxuICAgIGNvbnN0IHN0eWxlcyA9IGNvbXB1dGVkKCgpID0+ICh7XG4gICAgICAuLi5zZXRCYWNrZ3JvdW5kQ3NzQ29sb3IocHJvcHMuY29sb3IpLFxuICAgIH0pKVxuXG4gICAgY29uc3QgZ2VuSGVhZGVyQ29udGVudCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQ6IGFueSA9IHByb3BzLnRpdGxlIHx8IHNsb3RzLmhlYWRlcj8uKClcblxuICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6ICd2LWdyb3VwX19oZWFkZXItY29udGVudCcsXG4gICAgICB9LCBjb250ZW50KVxuICAgIH1cblxuICAgIGNvbnN0IGdlbkV4cGFuZEljb24gPSAoaWNvbjogVk5vZGUpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3YtZ3JvdXBfX2V4cGFuZC1pY29uJyxcbiAgICAgIH0sIGljb24pXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuU3ViRXhwYW5kSWNvbiA9IChpY29uOiBWTm9kZSk6IFZOb2RlID0+IHtcbiAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAndi1ncm91cF9fc3ViLWV4cGFuZC1pY29uJyxcbiAgICAgIH0sIGljb24pXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuUHJlcGVuZEljb24gPSAoaWNvbjogVk5vZGUpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3YtZ3JvdXBfX3ByZXBlbmQtaWNvbicsXG4gICAgICB9LCBpY29uKVxuICAgIH1cblxuICAgIGNvbnN0IGdlbkFwcGVuZEljb24gPSAoaWNvbjogVk5vZGUpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3YtZ3JvdXBfX2FwcGVuZC1pY29uJyxcbiAgICAgIH0sIGljb24pXG4gICAgfVxuXG4gICAgY29uc3QgZ2VuSWNvbiA9IChpY29uTmFtZTogc3RyaW5nKTogVk5vZGUgPT4ge1xuICAgICAgcmV0dXJuIGgoVkljb24sIHtcbiAgICAgICAgaWNvbjogaWNvbk5hbWUsXG4gICAgICAgIHNpemU6IDE2LFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBnZW5Hcm91cEhlYWRlciA9ICgpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAndi1ncm91cF9faGVhZGVyJyxcbiAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBpc0FjdGl2ZS52YWx1ZSA9ICFpc0FjdGl2ZS52YWx1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgW1xuICAgICAgICAgIHByb3BzLnN1Ymdyb3VwICYmIGdlblN1YkV4cGFuZEljb24oZ2VuSWNvbihpY29ucy4kY2FyZXREb3duKSksXG4gICAgICAgICAgcHJvcHMucHJlcGVuZEljb24gJiYgZ2VuUHJlcGVuZEljb24oZ2VuSWNvbihwcm9wcy5wcmVwZW5kSWNvbikpLFxuICAgICAgICAgIGdlbkhlYWRlckNvbnRlbnQoKSxcbiAgICAgICAgICBwcm9wcy5hcHBlbmRJY29uICYmIGdlbkFwcGVuZEljb24oZ2VuSWNvbihwcm9wcy5hcHBlbmRJY29uKSksXG4gICAgICAgICAgIXByb3BzLnN1Ymdyb3VwICYmIGdlbkV4cGFuZEljb24oZ2VuSWNvbihpY29ucy4kY2hldnJvbkRvd24pKSxcbiAgICAgICAgXSxcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBnZW5Hcm91cENoaWxkQ29udGVudCA9ICgpOiBWTm9kZSA9PiB7XG4gICAgICByZXR1cm4gd2l0aERpcmVjdGl2ZXMoaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3YtZ3JvdXBfX2NvbnRlbnQnLFxuICAgICAgfSwge1xuICAgICAgICBkZWZhdWx0OiAoKSA9PiBzbG90cy5kZWZhdWx0Py4oKSxcbiAgICAgIH0pLCBbW3ZTaG93LCBpc0FjdGl2ZS52YWx1ZV1dKVxuICAgIH1cblxuICAgIHdhdGNoKCgpID0+IHByb3BzLmV4cGFuZCwgdG8gPT4gaXNBY3RpdmUudmFsdWUgPSB0bywgeyBpbW1lZGlhdGU6IHRydWUgfSlcblxuICAgIHJldHVybiAoKSA9PiBoKCdkaXYnLCB7XG4gICAgICBjbGFzczogY2xhc3Nlcy52YWx1ZSxcbiAgICAgIHN0eWxlOiBzdHlsZXMudmFsdWUsXG4gICAgfSwgW1xuICAgICAgZ2VuR3JvdXBIZWFkZXIoKSxcbiAgICAgIEV4cGFuZFRyYW5zaXRpb24oZ2VuR3JvdXBDaGlsZENvbnRlbnQoKSksXG4gICAgXSlcbiAgfSxcbn0pXG4iXX0=