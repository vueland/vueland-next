{"version":3,"sources":["../../../../src/components/VTooltip/VTooltip.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VTooltip.scss'\n\n// Vue API\nimport {\n  h,\n  ref,\n  reactive,\n  watch,\n  computed,\n  withDirectives,\n  defineComponent,\n  onMounted,\n  vShow,\n} from 'vue'\n\n// Effects\nimport { useToggle } from '../../effects/use-toggle'\nimport { useColors } from '../../effects/use-colors'\nimport { useActivator } from '../../effects/use-activator'\nimport { useTransition } from '../../effects/use-transition'\nimport { elevationProps, useElevation } from '../../effects/use-elevation'\nimport { positionProps } from '../../effects/use-position'\n\n// Types\nimport { OffsetSizes } from '../../types'\nimport { VNode } from 'vue'\n\n// Helpers\nimport { convertToUnit } from '../../helpers'\n\n// TODO fix behavior on window resize if v-model used on component\n\nexport const VTooltip = defineComponent({\n  name: 'v-tooltip',\n\n  props: {\n    openOnHover: {\n      type: Boolean,\n      default: true,\n    },\n    color: {\n      type: String,\n      default: 'grey lighten-1',\n    },\n    zIndex: [Number, String],\n    maxWidth: [Number, String],\n    minWidth: [Number, String],\n    modelValue: Boolean,\n    ...elevationProps(),\n    ...positionProps(),\n  } as any,\n\n  setup(props, { slots }) {\n    const tooltip = reactive<Partial<OffsetSizes>>({})\n    const activator = reactive<Partial<OffsetSizes>>({})\n\n    const innerActive = ref<boolean>(false)\n    const tooltipRef = ref<HTMLElement | null>(null)\n\n    const { isActive } = useToggle(props)\n    const { elevationClasses } = useElevation(props)\n    const { setBackground } = useColors()\n    const {\n      activatorRef,\n      getActivatorSizes,\n      genActivatorListeners,\n    } = useActivator()\n\n    const listeners = genActivatorListeners(props, innerActive)\n\n    const classes = computed(() => ({\n      'v-tooltip': true,\n      'v-tooltip--top': props.top,\n      'v-tooltip--right': props.right,\n      'v-tooltip--left': props.left,\n      'v-tooltip--bottom': props.bottom,\n    }))\n\n    const contentClasses = computed<Record<string, boolean>>(() => ({\n      'v-tooltip__content': true,\n      ...elevationClasses.value,\n    }))\n\n    const computeTopPosition = computed<number>(() => {\n      return (\n        (props.top ? activator!.top! - tooltip.height!\n          : props.bottom ? activator.top! + activator.height!\n            : activator.top! + (activator.height! - tooltip.height!) / 2) +\n        +props.offsetY\n      )\n    })\n\n    const computeLeftPosition = computed<number>(() => {\n      return (\n        (props.left ? activator.left! - tooltip.width! : props.right\n          ? activator.left! + activator.width!\n          : activator.left! + (activator.width! - tooltip.width!) / 2) +\n        +props.offsetX\n      )\n    })\n\n    const styles = computed<Record<string, string>>(() => ({\n      top: tooltip.top ? convertToUnit(tooltip.top) as string : '',\n      left: tooltip.top ? convertToUnit(tooltip.left) as string : '',\n      maxWidth: !!props.maxWidth ? `${ props.maxWidth }px` : '',\n      minWidth: !!props.minWidth ? `${ props.minWidth }px` : '',\n      zIndex: props.zIndex,\n    }))\n\n    function genActivator(): VNode | null {\n      const slotContent = slots.activator && slots.activator({\n        on: listeners,\n      })\n\n      return h(slotContent![0], { ref: activatorRef })\n    }\n\n    function genContent(): VNode {\n      const propsData = {\n        class: contentClasses.value,\n        style: styles.value,\n        ref: tooltipRef,\n      }\n\n      return withDirectives(\n        h('span', setBackground(props.color, propsData),\n          slots.default && slots.default(),\n        ),\n        [[vShow, innerActive.value]],\n      )\n    }\n\n    function setTooltipPosition() {\n      if (tooltipRef.value) {\n        tooltip.width = tooltipRef.value!.offsetWidth\n        tooltip.height = tooltipRef.value!.offsetHeight\n        tooltip.top = computeTopPosition.value\n        tooltip.left = computeLeftPosition.value\n      }\n    }\n\n    watch(\n      () => isActive.value,\n      to => (innerActive.value = to),\n      { immediate: true },\n    )\n\n    onMounted(() => {\n      watch(\n        () => innerActive.value,\n        to => {\n          if (to) {\n            const { left, top, height, width } = getActivatorSizes()\n\n            activator.left = left as number\n            activator.top = top as number\n            activator.height = height as number\n            activator.width = width as number\n\n            tooltip.top = 0\n            tooltip.left = 0\n\n            requestAnimationFrame(setTooltipPosition)\n          }\n        },\n        { immediate: true },\n      )\n    })\n\n    return () => {\n      const content = useTransition(\n        genContent() as VNode,\n        innerActive.value ? 'scale-in' : 'fade',\n      )\n\n      return [h('div', {\n          class: classes.value,\n        },\n      ), content, genActivator()]\n    }\n  },\n})\n"],"sourceRoot":"","file":"VTooltip.js"}