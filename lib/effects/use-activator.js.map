{"version":3,"sources":["../../../src/effects/use-activator.ts"],"names":[],"mappings":"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","sourcesContent":["// Vue API\nimport { ref } from 'vue'\n\n// Types\nimport { OffsetSizes } from '../../types'\n\ntype ActivatorListeners = {\n  mouseenter: (e: Event) => void\n  mouseleave: (e: Event) => void\n  mouseover: (e: Event) => void\n  mouseout: (e: Event) => void\n  contextmenu: (e: Event) => void\n  focus: (e: Event) => void\n  blur: (e: Event) => void\n  click: (e: Event) => void\n  input: (e: Event) => void\n  change: (e: Event) => void\n}\n\nexport function activatorProps() {\n  return {\n    activator: {\n      type: [Object, String],\n    },\n    internalActivator: Boolean,\n  }\n}\n\nexport function useActivator(props: any = null) {\n  const activatorRef = ref<HTMLElement | null>(null)\n  const activatorSizes: Partial<OffsetSizes> = {}\n  const listeners: Partial<ActivatorListeners> = {}\n\n  const getActivator = (e?: Event): HTMLElement | null => {\n    if (activatorRef.value) return activatorRef.value\n\n    const target = props.internalActivator\n      ? props.activator.value.$el\n      : (document as any)\n\n    if (props.inputActivator) {\n      return (activatorRef.value = target.querySelector(props.inputActivator))\n    }\n\n    if (props?.activator) {\n      if (typeof props.activator === 'string') {\n        return (activatorRef.value = target.querySelector(props.activator))\n      }\n\n      if (props.activator.value.$el) {\n        return (activatorRef.value = props.activator.value.$el)\n      }\n\n      if (props.activator.value) {\n        return (activatorRef.value = props.activator.value)\n      }\n    }\n\n    if (e) {\n      return (activatorRef.value = (e.target || e.currentTarget) as HTMLElement)\n    }\n\n    return null\n  }\n\n  const getActivatorSizes = () => {\n    const el = (activatorRef.value! as any).$el || (activatorRef.value! as any)\n    activatorSizes.left = el.offsetLeft\n    activatorSizes.top = el.offsetTop\n    activatorSizes.height = el.offsetHeight\n    activatorSizes.width = el.offsetWidth\n\n    return activatorSizes\n  }\n\n  const genActivatorListeners = (props, handlers) => {\n    if (props.openOnHover) {\n      listeners.mouseenter = (e) => handlers.mouseenter(e)\n      listeners.mouseleave = (e) => handlers.mouseleave(e)\n    }\n\n    if (props.openOnClick) {\n      listeners.click = (e) => handlers.click(e)\n    }\n\n    if (props.openOnContextmenu) {\n      listeners.contextmenu = (e) => handlers.contextmenu(e)\n    }\n\n    return listeners\n  }\n\n  const addActivatorEvents = () => {\n    const events = Object.keys(listeners)\n\n    if (activatorRef.value) {\n      events.forEach((key) => {\n        activatorRef.value!.addEventListener(key, listeners[key])\n      })\n    }\n  }\n\n  const removeActivatorEvents = () => {\n    const events = Object.keys(listeners)\n\n    if (activatorRef.value) {\n      events.forEach((key) => {\n        activatorRef.value!.removeEventListener(key, listeners[key])\n      })\n    }\n  }\n\n  return {\n    activatorRef,\n    getActivator,\n    getActivatorSizes,\n    addActivatorEvents,\n    removeActivatorEvents,\n    genActivatorListeners,\n  }\n}\n"],"sourceRoot":"","file":"use-activator.js"}