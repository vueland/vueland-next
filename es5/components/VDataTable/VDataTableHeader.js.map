{"version":3,"sources":["../../../../src/components/VDataTable/VDataTableHeader.ts"],"names":[],"mappings":";;;;;;;AACA;;AAGA;;AAGA;;AAGA;;AACA;;AACA;;AACA;;AAIA;;AAOA;;;;;;;;AAEO,IAAM,gBAAgB,GAAG,0BAAgB;AAC9C,EAAA,IAAI,EAAE,qBADwC;AAG9C,EAAA,KAAK;AACH,IAAA,IAAI,EAAE,OADH;AAEH,IAAA,QAAQ,EAAE,OAFP;AAGH,IAAA,QAAQ,EAAE,OAHP;AAIH,IAAA,IAAI,EAAE,KAJH;AAKH,IAAA,QAAQ,EAAE;AACR,MAAA,IAAI,EAAE,CAAC,MAAD,EAAS,MAAT,CADE;AAER,iBAAS;AAFD,KALP;AASH,IAAA,KAAK,EAAE;AATJ,KAUA,6BAVA,CAHyC;AAgB9C,EAAA,KAAK,EAAE,CACL,MADK,EAEL,QAFK,EAGL,WAHK,CAhBuC;AAsB9C,EAAA,KAtB8C,iBAsBxC,KAtBwC,QAsBzB;AAAA,QAAN,IAAM,QAAN,IAAM;AACnB,QAAM,IAAI,GAAG,cAAkB,EAAlB,CAAb;;AADmB,qBAGO,4BAHP;AAAA,QAGX,aAHW,cAGX,aAHW;;AAKnB,IAAA,IAAI,CAAC,KAAL,GAAa,KAAK,CAAC,IAAnB;AAEA,QAAM,OAAO,GAAG,mBAAkC;AAAA,aAAO;AACvD,gCAAwB;AAD+B,OAAP;AAAA,KAAlC,CAAhB;;AAIA,aAAS,MAAT,CAAgB,IAAhB,EAAoB;AAClB,MAAA,IAAI,CAAC,MAAD,EAAS,IAAT,CAAJ;AACD;;AAED,aAAS,QAAT,CAAiB,MAAjB,EAAyB,IAAzB,EAA6B;AAC3B,MAAA,IAAI,CAAC,QAAL,GAAgB,CAAC,CAAC,MAAlB;AAEA,MAAA,IAAI,CAAC,QAAD,EAAW;AAAE,QAAA,KAAK,EAAE,MAAT;AAAiB,QAAA,GAAG,EAAE;AAAtB,OAAX,CAAJ;AACD;;AAED,aAAS,SAAT,CAAmB,IAAnB,EAAuB;AACrB,UAAI,IAAI,CAAC,SAAT,EAAoB;AACpB,MAAA,IAAI,CAAC,SAAL,GAAiB,IAAjB;AACD;;AAED,aAAS,aAAT,CAAuB,IAAvB,EAA2B;AACzB,aAAO,YAAE,YAAF,EAAS;AACd,QAAA,SAAS,EAAE,IADG;AAEd,iBAAO;AACL,4CAAkC,IAD7B;AAEL,oDAA0C,IAAI,CAAC;AAF1C,SAFO;AAMd,QAAA,IAAI,EAAE,EANQ;AAOd,QAAA,IAAI,EAAE,eAAQ,QAPA;AAQd,QAAA,KAAK,EAAE,KAAK,CAAC,IAAN,GAAa,OAAb,GAAuB,EARhB;AASd,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAM,CAAC,IAAD,CAAZ;AAAA;AATK,OAAT,CAAP;AAWD;;AAED,aAAS,eAAT,CAAyB,IAAzB,EAA6B;AAC3B,aAAO,YAAE,YAAF,EAAS;AACd,QAAA,SAAS,EAAE,IADG;AAEd,iBAAO;AACL,8CAAoC,IAD/B;AAEL,sDAA4C,IAAI,CAAC;AAF5C,SAFO;AAMd,QAAA,IAAI,EAAE,EANQ;AAOd,QAAA,IAAI,EAAE,eAAQ,OAPA;AAQd,QAAA,KAAK,EAAE,KAAK,CAAC,IAAN,GAAa,OAAb,GAAuB,EARhB;AASd,QAAA,OAAO,EAAE;AAAA,iBAAM,SAAS,CAAC,IAAD,CAAf;AAAA;AATK,OAAT,CAAP;AAWD;;AAED,aAAS,gBAAT,CAA0B,IAA1B,EAA8B;AAC5B,aAAO,YAAE,MAAF,EAAU;AACf,iBAAO;AACL,uCAA6B;AADxB;AADQ,OAAV,EAIJ,CACD,IAAI,CAAC,QAAL,IAAiB,aAAa,CAAC,IAAD,CAD7B,EAED,IAAI,CAAC,UAAL,IAAmB,eAAe,CAAC,IAAD,CAFjC,CAJI,CAAP;AAQD;;AAED,aAAS,cAAT,CAAwB,IAAxB,EAA4B;AAC1B,aAAO,YAAE,sBAAF,EAAc;AACnB,QAAA,KAAK,EAAE,QADY;AAEnB,QAAA,IAAI,EAAE,KAAK,CAAC,IAFO;AAGnB,QAAA,KAAK,EAAE,KAAK,CAAC,IAAN,GAAa,OAAb,GAAuB,EAHX;AAInB,QAAA,WAAW,EAAE,eAAQ,OAJF;AAKnB,QAAA,SAAS,EAAE,IALQ;AAMnB,QAAA,OAAO,EAAE,iBAAA,MAAM;AAAA,iBAAI,QAAO,CAAC,MAAD,EAAS,IAAT,CAAX;AAAA;AANI,OAAd,CAAP;AAQD;;AAED,aAAS,eAAT,CAAyB,IAAzB,EAA6B;AAC3B,aAAO,YAAE,MAAF,EAAU;AACf,iBAAO;AACL,6CAAmC;AAD9B;AADQ,OAAV,EAIJ,IAAI,CAAC,KAJD,CAAP;AAKD;;AAED,aAAS,gBAAT,CAA0B,IAA1B,EAA8B;AAC5B,UAAM,SAAS,GAAG,IAAI,CAAC,SAAL,GAAiB;AACjC,QAAA,OAAO,EAAE;AAAA,iBAAM,UAAU,CAAC;AAAA,mBAAM,IAAI,CAAC,SAAL,GAAiB,KAAvB;AAAA,WAAD,CAAhB;AAAA,SADwB;AAEjC,QAAA,gBAAgB,EAAE;AAFe,OAAjB,GAGd,SAHJ;AAKA,UAAM,SAAS,GAAG;AAChB,iBAAO;AACL,sCAA4B;AADvB;AADS,OAAlB;AAMA,aAAO,IAAI,CAAC,UAAL,IAAmB,yBAAe,YAAE,KAAF,EACvC,aAAa,CAAC,KAAK,CAAC,KAAP,EAAc,SAAd,CAD0B,EAEvC,CACE,eAAe,CAAC,IAAD,CADjB,EAEE,cAAc,CAAC,IAAD,CAFhB,CAFuC,CAAf,EAMvB,CACD,CAAC,2BAAD,EAAe,SAAf,CADC,EAED,CAAC,UAAD,EAAQ,IAAI,CAAC,SAAb,CAFC,CANuB,CAA1B;AAUD;;AAED,aAAS,cAAT,CAAwB,IAAxB,EAA4B;AAC1B,aAAO,YAAE,KAAF,EAAS;AACZ,iBAAO;AADK,OAAT,EAEF,CACD,IAAI,CAAC,KADJ,CAFE,CAAP;AAMD;;AAED,aAAS,aAAT,CAAuB,IAAvB,EAA2B;AACzB,aAAO,YAAE,8BAAF,EAAkB;AACvB,QAAA,IAAI,EAAE,KAAK,CAAC,IADW;AAEvB,iBAAO;AACL,8BAAoB,IADf;AAEL,sCAA4B,IAAI,CAAC;AAF5B,SAFgB;AAMvB,QAAA,KAAK,EAAE,IAAI,CAAC,KANW;AAOvB,QAAA,UAAU,EAAE,IAAI,CAAC,UAPM;AAQvB,QAAA,KAAK,EAAE,KAAK,CAAC,KAAN,IAAe,IAAI,CAAC,KARJ;AASvB,QAAA,QAAQ,EAAE,kBAAA,KAAK;AAAA,iBAAI,IAAI,CAAC,KAAL,GAAa,KAAjB;AAAA;AATQ,OAAlB,EAUJ;AACD,mBAAS;AAAA,iBAAM,CACb,cAAc,CAAC,IAAD,CADD,EAEb,gBAAgB,CAAC,IAAD,CAFH,EAGb,gBAAgB,CAAC,IAAD,CAHH,CAAN;AAAA;AADR,OAVI,CAAP;AAiBD;;AAED,aAAS,cAAT,GAAuB;AACrB,UAAM,KAAK,GAAY,EAAvB;AAEA,MAAA,KAAK,CAAC,QAAN,IAAkB,KAAK,CAAC,IAAN,CAChB,YAAE,8BAAF,EAAkB;AACd,QAAA,KAAK,EAAE,QADO;AAEd,iBAAO,0BAFO;AAGd,QAAA,IAAI,EAAE,KAAK,CAAC,IAHE;AAId,QAAA,KAAK,EAAE,KAAK,CAAC,KAJC;AAKd,QAAA,KAAK,EAAE;AALO,OAAlB,EAMK;AACD,mBAAS;AAAA,iBAAM,GAAN;AAAA;AADR,OANL,CADgB,CAAlB;AAaA,MAAA,KAAK,CAAC,QAAN,IAAkB,KAAK,CAAC,IAAN,CAChB,YAAE,8BAAF,EAAkB;AACd,QAAA,KAAK,EAAE,QADO;AAEd,iBAAO,4BAFO;AAGd,QAAA,IAAI,EAAE,KAAK,CAAC,IAHE;AAId,QAAA,KAAK,EAAE,KAAK,CAAC,KAJC;AAKd,QAAA,KAAK,EAAE;AALO,OAAlB,EAMK;AACD,mBAAS;AAAA,iBAAM,YAAE,oBAAF,EAAa;AAC1B,YAAA,KAAK,EAAE,KAAK,CAAC,IAAN,GAAa,OAAb,GAAuB,EADJ;AAE1B,YAAA,SAAS,EAAE,mBAAC,CAAD;AAAA,qBAAO,IAAI,CAAC,WAAD,EAAc,CAAd,CAAX;AAAA;AAFe,WAAb,CAAN;AAAA;AADR,OANL,CADgB,CAAlB;AAgBA,MAAA,IAAI,CAAC,KAAL,CAAY,OAAZ,CAAoB,UAAC,IAAD,EAAiB;AACnC,QAAA,IAAI,CAAC,KAAL,GAAa,IAAI,CAAC,KAAL,IAAc,KAAK,CAAC,QAAjC;;AACA,YAAI,CAAC,IAAI,CAAC,cAAL,CAAoB,MAApB,CAAL,EAAkC;AAChC,UAAA,IAAI,CAAC,IAAL,GAAY,CAAC,IAAI,CAAC,IAAlB;AACD;;AACD,QAAA,IAAI,CAAC,IAAL,IAAa,KAAK,CAAC,IAAN,CAAW,aAAa,CAAC,IAAD,CAAxB,CAAb;AACD,OAND;AAQA,aAAO,KAAP;AACD;;AAED,WAAO,YAAK;AACV,UAAM,SAAS,GAAG;AAChB,iBAAO,OAAO,CAAC;AADC,OAAlB;AAIA,aAAO,YAAE,KAAF,EACL,KAAK,CAAC,KAAN,GAAc,aAAa,CAAC,KAAK,CAAC,KAAP,EAAc,SAAd,CAA3B,GAAsD,SADjD,EAEL,cAAc,EAFT,CAAP;AAID,KATD;AAUD;AApN6C,CAAhB,CAAzB","sourcesContent":["// Styles\nimport './VDataTableHeader.scss'\n\n// Vue API\nimport { h, ref, computed, withDirectives, defineComponent } from 'vue'\n\n// Effects\nimport { colorProps, useColors } from '../../effects/use-colors'\n\n// Components\nimport { VIcon } from '../VIcon'\nimport { VCheckbox } from '../VCheckbox'\nimport { VDataTableCell } from './VDataTableCell'\nimport { VTextField } from '../VTextField'\n\n// Directives\nimport { vShow } from 'vue'\nimport { clickOutside } from '../../directives/v-click-outside'\n\n// Types\nimport { VNode } from 'vue'\nimport { Column } from '../../types'\n\n// Services\nimport { FaIcons } from '../../services/icons'\n\nexport const VDataTableHeader = defineComponent({\n  name: 'v-data-table-header',\n\n  props: {\n    dark: Boolean,\n    numbered: Boolean,\n    checkbox: Boolean,\n    cols: Array,\n    colWidth: {\n      type: [String, Number],\n      default: 125,\n    },\n    align: String,\n    ...colorProps(),\n  } as any,\n\n  emits: [\n    'sort',\n    'filter',\n    'check-all',\n  ],\n\n  setup(props, { emit }) {\n    const cols = ref<any[] | null>([])\n\n    const { setBackground } = useColors()\n\n    cols.value = props.cols\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-data-table__header': true,\n    }))\n\n    function onSort(item) {\n      emit('sort', item)\n    }\n\n    function onInput($value, item) {\n      item.filtered = !!$value\n\n      emit('filter', { value: $value, col: item })\n    }\n\n    function addFilter(item) {\n      if (item.addFilter) return\n      item.addFilter = true\n    }\n\n    function genSortButton(item) {\n      return h(VIcon, {\n        clickable: true,\n        class: {\n          'v-data-table-col__actions-sort': true,\n          'v-data-table-col__actions-sort--active': item.sorted,\n        },\n        size: 14,\n        icon: FaIcons.$arrowUp,\n        color: props.dark ? 'white' : '',\n        onClick: () => onSort(item),\n      })\n    }\n\n    function genFilterButton(item) {\n      return h(VIcon, {\n        clickable: true,\n        class: {\n          'v-data-table-col__actions-filter': true,\n          'v-data-table-col__actions-filter--active': item.filtered,\n        },\n        size: 14,\n        icon: FaIcons.$filter,\n        color: props.dark ? 'white' : '',\n        onClick: () => addFilter(item),\n      })\n    }\n\n    function genHeaderActions(item) {\n      return h('span', {\n        class: {\n          'v-data-table-col__actions': true,\n        },\n      }, [\n        item.sortable && genSortButton(item),\n        item.filterable && genFilterButton(item),\n      ])\n    }\n\n    function genFilterInput(item) {\n      return h(VTextField, {\n        label: 'insert',\n        dark: props.dark,\n        color: props.dark ? 'white' : '',\n        prependIcon: FaIcons.$search,\n        clearable: true,\n        onInput: $value => onInput($value, item),\n      })\n    }\n\n    function genFilterHeader(item) {\n      return h('span', {\n        class: {\n          'v-data-table-col__filter-header': true,\n        },\n      }, item.title)\n    }\n\n    function genFilterWrapper(item) {\n      const directive = item.addFilter ? {\n        handler: () => setTimeout(() => item.addFilter = false),\n        closeConditional: false,\n      } : undefined\n\n      const propsData = {\n        class: {\n          'v-data-table-col__filter': true,\n        },\n      }\n\n      return item.filterable && withDirectives(h('div',\n        setBackground(props.color, propsData),\n        [\n          genFilterHeader(item),\n          genFilterInput(item),\n        ],\n      ), [\n        [clickOutside, directive],\n        [vShow, item.addFilter],\n      ])\n    }\n\n    function genHeaderTitle(item) {\n      return h('div', {\n          class: 'v-data-table-col__title',\n        }, [\n          item.title,\n        ],\n      )\n    }\n\n    function genHeaderCell(item) {\n      return h(VDataTableCell, {\n        dark: props.dark,\n        class: {\n          'v-data-table-col': true,\n          'v-data-table-col--sorted': item.sorted,\n        },\n        width: item.width,\n        resizeable: item.resizeable,\n        align: props.align || item.align,\n        onResize: $size => item.width = $size,\n      }, {\n        default: () => [\n          genHeaderTitle(item),\n          genHeaderActions(item),\n          genFilterWrapper(item),\n        ],\n      })\n    }\n\n    function genHeaderCells() {\n      const cells: VNode[] = []\n\n      props.numbered && cells.push(\n        h(VDataTableCell, {\n            align: 'center',\n            class: 'v-data-table-col__number',\n            dark: props.dark,\n            color: props.color,\n            width: 50,\n          }, {\n            default: () => 'â„–',\n          },\n        ),\n      )\n\n      props.checkbox && cells.push(\n        h(VDataTableCell, {\n            align: 'center',\n            class: 'v-data-table-col__checkbox',\n            dark: props.dark,\n            color: props.color,\n            width: 50,\n          }, {\n            default: () => h(VCheckbox, {\n              color: props.dark ? 'white' : '',\n              onChecked: (e) => emit('check-all', e),\n            }),\n          },\n        ),\n      )\n\n      cols.value!.forEach((item: Column) => {\n        item.width = item.width || props.colWidth\n        if (!item.hasOwnProperty('show')) {\n          item.show = !item.show\n        }\n        item.show && cells.push(genHeaderCell(item))\n      })\n\n      return cells\n    }\n\n    return () => {\n      const propsData = {\n        class: classes.value,\n      }\n\n      return h('div',\n        props.color ? setBackground(props.color, propsData) : propsData,\n        genHeaderCells(),\n      )\n    }\n  },\n})\n"],"sourceRoot":"","file":"VDataTableHeader.js"}