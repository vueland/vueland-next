{"version":3,"sources":["../../../../src/components/VDataTable/VDataTableHeader.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VDataTableHeader.scss'\n\n// Vue API\nimport { h, computed, withDirectives, defineComponent } from 'vue'\n\n// Effects\nimport { colorProps, useColors } from '../../effects/use-colors'\nimport { useIcons } from '../../effects/use-icons'\n// Components\nimport { VIcon } from '../VIcon'\nimport { VCheckbox } from '../VCheckbox'\nimport { VDataTableCell } from './VDataTableCell'\nimport { VTextField } from '../VTextField'\n\n// Directives\nimport { vShow } from 'vue'\nimport { clickOutside } from '../../directives/v-click-outside'\n\n// Types\nimport { VNode } from 'vue'\nimport { Column } from '../../types'\n\nexport const VDataTableHeader = defineComponent({\n  name: 'v-data-table-header',\n\n  props: {\n    dark: Boolean,\n    numbered: Boolean,\n    checkbox: Boolean,\n    cols: Array,\n    colWidth: {\n      type: [String, Number],\n      default: 125,\n    },\n    align: String,\n    contentColor: String,\n    ...colorProps(),\n  } as any,\n\n  emits: ['sort', 'filter', 'check-all', 'update:cols'],\n\n  setup(props, { emit }) {\n    const { setBackground } = useColors()\n    const { icons, iconSize } = useIcons('s')\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-data-table__header': true,\n    }))\n\n    const computedColor = computed<string>(() => {\n      return props.contentColor || (props.dark ? 'white' : '')\n    })\n\n    const cols = computed<Column[]>(() => [...props.cols])\n\n    function onSort(item) {\n      emit('sort', item)\n    }\n\n    function onInput($value, item) {\n      item.filtered = !!$value\n\n      emit('filter', { value: $value, col: item })\n    }\n\n    function addFilter(item) {\n      if (item.addFilter) return\n      item.addFilter = true\n    }\n\n    function genSortButton(item) {\n      const classes = {\n        'v-data-table-col__actions-sort': true,\n        'v-data-table-col__actions-sort--active': item.sorted,\n      }\n\n      const propsData = {\n        clickable: true,\n        class: classes,\n        size: iconSize,\n        icon: icons.$arrowUp,\n        color: computedColor.value,\n        onClick: () => onSort(item),\n      }\n\n      return h(VIcon, propsData)\n    }\n\n    function genFilterButton(item) {\n      const classes = {\n        'v-data-table-col__actions-filter': true,\n        'v-data-table-col__actions-filter--active': item.filtered,\n      }\n\n      const propsData = {\n        clickable: true,\n        class: classes,\n        size: iconSize,\n        icon: icons.$filter,\n        color: computedColor.value,\n        onClick: () => addFilter(item),\n      }\n\n      return h(VIcon, propsData)\n    }\n\n    function genHeaderActions(item) {\n      return h('span', { class: 'v-data-table-col__actions' }, [\n        item.sortable && genSortButton(item),\n        item.filterable && genFilterButton(item),\n      ])\n    }\n\n    function genFilterInput(item) {\n      const propsData = {\n        label: 'input value',\n        dark: props.dark,\n        color: computedColor.value,\n        prependIcon: icons.$search,\n        clearable: true,\n        onInput: ($value) => onInput($value, item),\n      }\n\n      return h(VTextField, propsData)\n    }\n\n    function genFilterHeader(item) {\n      return h('span', { class: 'v-data-table-col__filter-header' }, item.title)\n    }\n\n    function genFilterWrapper(item) {\n      const colorClass = props.dark ? 'grey darken-3' : 'grey lighten-2'\n      const filterClass = item.filterClass || colorClass\n      const directive = item.addFilter\n        ? {\n          handler: () => setTimeout(() => (item.addFilter = false)),\n          closeConditional: false,\n        }\n        : undefined\n\n      const propsData = {\n        class: {\n          'v-data-table-col__filter': true,\n          [filterClass]: true,\n        },\n      }\n\n      return (\n        item.filterable &&\n        withDirectives(\n          h('div', propsData, [\n            genFilterHeader(item),\n            genFilterInput(item),\n          ]),\n          [\n            [clickOutside, directive],\n            [vShow, item.addFilter],\n          ],\n        )\n      )\n    }\n\n    function genHeaderTitle(item) {\n      return h('div', { class: 'v-data-table-col__title' }, item.title)\n    }\n\n    function genNumberCell() {\n      const propsData = {\n        align: 'center',\n        class: {\n          'v-data-table-col__number': true,\n          [props.cellClass]: !!props.cellClass,\n        },\n        color: computedColor.value,\n        width: 50,\n      }\n\n      return h(VDataTableCell, propsData, { default: () => '№' })\n    }\n\n    function genCheckboxCell() {\n      const propsData = {\n        align: 'center',\n        class: {\n          'v-data-table-col__checkbox': true,\n          [props.cellClass]: !!props.cellClass,\n        },\n        dark: props.dark,\n        color: props.color,\n        width: 50,\n      }\n\n      const content = {\n        default: () => h(VCheckbox, {\n          color: computedColor.value,\n          onChecked: (e) => emit('check-all', e),\n        }),\n      }\n\n      return h(VDataTableCell, propsData, content)\n    }\n\n    function genHeaderCell(item) {\n      const propsData = {\n        dark: props.dark,\n        class: {\n          'v-data-table-col': true,\n          'v-data-table-col--sorted': item.sorted,\n          [item.cellClass]: !!item.cellClass,\n        },\n        color: computedColor.value,\n        width: item.width,\n        resizeable: item.resizeable,\n        align: item.align || props.align,\n        onResize: ($size) => (item.width = $size),\n      }\n\n      return h(VDataTableCell, propsData, {\n        default: () => [\n          genHeaderTitle(item),\n          genHeaderActions(item),\n          genFilterWrapper(item),\n        ],\n      })\n    }\n\n    function genHeaderCells() {\n      const cells: VNode[] = []\n\n      props.numbered && cells.push(genNumberCell())\n      props.checkbox && cells.push(genCheckboxCell())\n\n      cols.value!.forEach((item: Column) => {\n        item.width = item.width || props.colWidth\n\n        if (!item.hasOwnProperty('show')) {\n          item.show = !item.show\n        }\n\n        item.show && cells.push(genHeaderCell(item))\n      })\n\n      return cells\n    }\n\n    return () => {\n      const propsData = {\n        class: classes.value,\n      }\n\n      return h(\n        'div',\n        props.color ? setBackground(props.color, propsData) : propsData,\n        genHeaderCells(),\n      )\n    }\n  },\n})\n"],"sourceRoot":"","file":"VDataTableHeader.js"}