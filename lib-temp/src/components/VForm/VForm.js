import { defineComponent, provide, h } from 'vue';
export const VForm = defineComponent({
    name: 'v-form',
    setup(_, { slots }) {
        let fields = [];
        const addFieldValidator = (item) => {
            fields.push(item);
        };
        const removeFieldValidator = (item) => {
            fields = fields.filter((v) => v !== item);
        };
        provide('form', {
            add: addFieldValidator,
            remove: removeFieldValidator,
        });
        const validate = () => {
            const promises = [];
            fields.forEach((v) => {
                promises.push(v());
            });
            return !promises.some((f) => !f) ? Promise.resolve() : Promise.reject();
        };
        return () => h('form', {
            class: 'v-form',
            onSubmit: (e) => e.preventDefault()
        }, {
            default: () => slots.default && slots.default({ validate }),
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkZvcm0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9WRm9ybS9WRm9ybS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsTUFBTSxLQUFLLENBQUE7QUFFakQsTUFBTSxDQUFDLE1BQU0sS0FBSyxHQUFHLGVBQWUsQ0FBQztJQUNuQyxJQUFJLEVBQUUsUUFBUTtJQUNkLEtBQUssQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUU7UUFDaEIsSUFBSSxNQUFNLEdBQThDLEVBQUUsQ0FBQTtRQUUxRCxNQUFNLGlCQUFpQixHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUU7WUFDakMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNuQixDQUFDLENBQUE7UUFFRCxNQUFNLG9CQUFvQixHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUU7WUFDcEMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQTtRQUMzQyxDQUFDLENBQUE7UUFFRCxPQUFPLENBQUMsTUFBTSxFQUFFO1lBQ2QsR0FBRyxFQUFFLGlCQUFpQjtZQUN0QixNQUFNLEVBQUUsb0JBQW9CO1NBQzdCLENBQUMsQ0FBQTtRQUVGLE1BQU0sUUFBUSxHQUFHLEdBQUcsRUFBRTtZQUNwQixNQUFNLFFBQVEsR0FBNEIsRUFBRSxDQUFBO1lBRTVDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFxQyxFQUFFLEVBQUU7Z0JBQ3ZELFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQTtZQUNwQixDQUFDLENBQUMsQ0FBQTtZQUVGLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQTtRQUN6RSxDQUFDLENBQUE7UUFFRCxPQUFPLEdBQUcsRUFBRSxDQUNWLENBQUMsQ0FBQyxNQUFNLEVBQUU7WUFDTixLQUFLLEVBQUUsUUFBUTtZQUNmLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLGNBQWMsRUFBRTtTQUNwQyxFQUNEO1lBQ0UsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDO1NBQzVELENBQ0YsQ0FBQTtJQUNMLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHByb3ZpZGUsIGggfSBmcm9tICd2dWUnXG5cbmV4cG9ydCBjb25zdCBWRm9ybSA9IGRlZmluZUNvbXBvbmVudCh7XG4gIG5hbWU6ICd2LWZvcm0nLFxuICBzZXR1cChfLCB7IHNsb3RzIH0pIHtcbiAgICBsZXQgZmllbGRzOiBBcnJheTwoLi4uYXJnczogYW55KSA9PiBQcm9taXNlPGJvb2xlYW4+PiA9IFtdXG5cbiAgICBjb25zdCBhZGRGaWVsZFZhbGlkYXRvciA9IChpdGVtKSA9PiB7XG4gICAgICBmaWVsZHMucHVzaChpdGVtKVxuICAgIH1cblxuICAgIGNvbnN0IHJlbW92ZUZpZWxkVmFsaWRhdG9yID0gKGl0ZW0pID0+IHtcbiAgICAgIGZpZWxkcyA9IGZpZWxkcy5maWx0ZXIoKHYpID0+IHYgIT09IGl0ZW0pXG4gICAgfVxuXG4gICAgcHJvdmlkZSgnZm9ybScsIHtcbiAgICAgIGFkZDogYWRkRmllbGRWYWxpZGF0b3IsXG4gICAgICByZW1vdmU6IHJlbW92ZUZpZWxkVmFsaWRhdG9yLFxuICAgIH0pXG5cbiAgICBjb25zdCB2YWxpZGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VzOiBBcnJheTxQcm9taXNlPGJvb2xlYW4+PiA9IFtdXG5cbiAgICAgIGZpZWxkcy5mb3JFYWNoKCh2OiAoLi4uYXJnczogYW55KSA9PiBQcm9taXNlPGJvb2xlYW4+KSA9PiB7XG4gICAgICAgIHByb21pc2VzLnB1c2godigpKVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuICFwcm9taXNlcy5zb21lKChmKSA9PiAhZikgPyBQcm9taXNlLnJlc29sdmUoKSA6IFByb21pc2UucmVqZWN0KClcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT5cbiAgICAgIGgoJ2Zvcm0nLCB7XG4gICAgICAgICAgY2xhc3M6ICd2LWZvcm0nLFxuICAgICAgICAgIG9uU3VibWl0OiAoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQoeyB2YWxpZGF0ZSB9KSxcbiAgICAgICAgfVxuICAgICAgKVxuICB9LFxufSlcbiJdfQ==