{"version":3,"sources":["../../../../src/components/VDataTable/VDataTableHeader.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VDataTableHeader.scss'\n\n// Vue API\nimport { h, computed, withDirectives, defineComponent } from 'vue'\n\n// Effects\nimport { colorProps, useColors } from '../../effects/use-colors'\n\n// Components\nimport { VIcon } from '../VIcon'\nimport { VCheckbox } from '../VCheckbox'\nimport { VDataTableCell } from './VDataTableCell'\nimport { VTextField } from '../VTextField'\n\n// Directives\nimport { vShow } from 'vue'\nimport { clickOutside } from '../../directives/v-click-outside'\n\n// Types\nimport { VNode } from 'vue'\nimport { Column } from '../../types'\n\n// Services\nimport { FaIcons } from '../../services/icons'\n\nexport const VDataTableHeader = defineComponent({\n  name: 'v-data-table-header',\n\n  props: {\n    dark: Boolean,\n    numbered: Boolean,\n    checkbox: Boolean,\n    cols: Array,\n    colWidth: {\n      type: [String, Number],\n      default: 125,\n    },\n    align: String,\n    contentColor: String,\n    ...colorProps(),\n  } as any,\n\n  emits: ['sort', 'filter', 'check-all', 'update:cols'],\n\n  setup(props, { emit }) {\n    const { setBackground } = useColors()\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-data-table__header': true,\n    }))\n\n    const computedColor = computed<string>(() => {\n      return props.contentColor || (props.dark ? 'white' : '')\n    })\n\n    const cols = computed<Column[]>(() => [...props.cols])\n\n    function onSort(item) {\n      emit('sort', item)\n    }\n\n    function onInput($value, item) {\n      item.filtered = !!$value\n\n      emit('filter', { value: $value, col: item })\n    }\n\n    function addFilter(item) {\n      if (item.addFilter) return\n      item.addFilter = true\n    }\n\n    function genSortButton(item) {\n      const classes = {\n        'v-data-table-col__actions-sort': true,\n        'v-data-table-col__actions-sort--active': item.sorted,\n      }\n\n      const propsData = {\n        clickable: true,\n        class: classes,\n        size: 14,\n        icon: FaIcons.$arrowUp,\n        color: computedColor.value,\n        onClick: () => onSort(item),\n      }\n\n      return h(VIcon, propsData)\n    }\n\n    function genFilterButton(item) {\n      const classes = {\n        'v-data-table-col__actions-filter': true,\n        'v-data-table-col__actions-filter--active': item.filtered,\n      }\n\n      const propsData = {\n        clickable: true,\n        class: classes,\n        size: 14,\n        icon: FaIcons.$filter,\n        color: computedColor.value,\n        onClick: () => addFilter(item),\n      }\n\n      return h(VIcon, propsData)\n    }\n\n    function genHeaderActions(item) {\n      return h('span', { class: 'v-data-table-col__actions' }, [\n        item.sortable && genSortButton(item),\n        item.filterable && genFilterButton(item),\n      ])\n    }\n\n    function genFilterInput(item) {\n      const propsData = {\n        label: 'insert',\n        dark: props.dark,\n        color: computedColor.value,\n        prependIcon: FaIcons.$search,\n        clearable: true,\n        onInput: ($value) => onInput($value, item),\n      }\n\n      return h(VTextField, propsData)\n    }\n\n    function genFilterHeader(item) {\n      return h('span', { class: 'v-data-table-col__filter-header' }, item.title)\n    }\n\n    function genFilterWrapper(item) {\n      const colorClass = props.dark ? 'grey darken-3' : 'grey lighten-2'\n      const filterClass = item.filterClass || colorClass\n      const directive = item.addFilter\n        ? {\n          handler: () => setTimeout(() => (item.addFilter = false)),\n          closeConditional: false,\n        }\n        : undefined\n\n      const propsData = {\n        class: {\n          'v-data-table-col__filter': true,\n          [filterClass]: true,\n        },\n      }\n\n      return (\n        item.filterable &&\n        withDirectives(\n          h('div', propsData, [\n            genFilterHeader(item),\n            genFilterInput(item),\n          ]),\n          [\n            [clickOutside, directive],\n            [vShow, item.addFilter],\n          ],\n        )\n      )\n    }\n\n    function genHeaderTitle(item) {\n      return h('div', { class: 'v-data-table-col__title' }, item.title)\n    }\n\n    function genNumberCell() {\n      const propsData = {\n        align: 'center',\n        class: {\n          'v-data-table-col__number': true,\n          [props.cellClass]: !!props.cellClass,\n        },\n        color: computedColor.value,\n        width: 50,\n      }\n\n      return h(VDataTableCell, propsData, { default: () => '№' })\n    }\n\n    function genCheckboxCell() {\n      const propsData = {\n        align: 'center',\n        class: {\n          'v-data-table-col__checkbox': true,\n          [props.cellClass]: !!props.cellClass,\n        },\n        dark: props.dark,\n        color: props.color,\n        width: 50,\n      }\n\n      const content = {\n        default: () => h(VCheckbox, {\n          color: computedColor.value,\n          onChecked: (e) => emit('check-all', e),\n        }),\n      }\n\n      return h(VDataTableCell, propsData, content)\n    }\n\n    function genHeaderCell(item) {\n      const propsData = {\n        dark: props.dark,\n        class: {\n          'v-data-table-col': true,\n          'v-data-table-col--sorted': item.sorted,\n          [item.cellClass]: !!item.cellClass,\n        },\n        color: computedColor.value,\n        width: item.width,\n        resizeable: item.resizeable,\n        align: item.align || props.align,\n        onResize: ($size) => (item.width = $size),\n      }\n\n      return h(VDataTableCell, propsData, {\n        default: () => [\n          genHeaderTitle(item),\n          genHeaderActions(item),\n          genFilterWrapper(item),\n        ],\n      })\n    }\n\n    function genHeaderCells() {\n      const cells: VNode[] = []\n\n      props.numbered && cells.push(genNumberCell())\n      props.checkbox && cells.push(genCheckboxCell())\n\n      cols.value!.forEach((item: Column) => {\n        item.width = item.width || props.colWidth\n\n        if (!item.hasOwnProperty('show')) {\n          item.show = !item.show\n        }\n\n        item.show && cells.push(genHeaderCell(item))\n      })\n\n      return cells\n    }\n\n    return () => {\n      const propsData = {\n        class: classes.value,\n      }\n\n      return h(\n        'div',\n        props.color ? setBackground(props.color, propsData) : propsData,\n        genHeaderCells(),\n      )\n    }\n  },\n})\n"],"sourceRoot":"","file":"VDataTableHeader.js"}