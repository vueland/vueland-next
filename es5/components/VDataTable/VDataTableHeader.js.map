{"version":3,"sources":["../../../../src/components/VDataTable/VDataTableHeader.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VDataTableHeader.scss'\n\n// Vue API\nimport { h, ref, computed, withDirectives, defineComponent } from 'vue'\n\n// Effects\nimport { colorProps, useColors } from '../../effects/use-colors'\n\n// Components\nimport { VIcon } from '../VIcon'\nimport { VCheckbox } from '../VCheckbox'\nimport { VDataTableCell } from './VDataTableCell'\nimport { VTextField } from '../VTextField'\n\n// Directives\nimport { vShow } from 'vue'\nimport { clickOutside } from '../../directives/v-click-outside'\n\n// Types\nimport { VNode } from 'vue'\nimport { Column } from '../../types'\n\n// Services\nimport { FaIcons } from '../../services/icons'\n\nexport const VDataTableHeader = defineComponent({\n  name: 'v-data-table-header',\n\n  props: {\n    dark: Boolean,\n    numbered: Boolean,\n    checkbox: Boolean,\n    cols: Array,\n    colWidth: {\n      type: [String, Number],\n      default: 125,\n    },\n    align: String,\n    ...colorProps(),\n  } as any,\n\n  emits: ['sort', 'filter', 'check-all'],\n\n  setup(props, { emit }) {\n    const cols = ref<any[] | null>([])\n\n    const { setBackground } = useColors()\n\n    cols.value = props.cols\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-data-table__header': true,\n    }))\n\n    function onSort(item) {\n      emit('sort', item)\n    }\n\n    function onInput($value, item) {\n      item.filtered = !!$value\n\n      emit('filter', { value: $value, col: item })\n    }\n\n    function addFilter(item) {\n      if (item.addFilter) return\n      item.addFilter = true\n    }\n\n    function genSortButton(item) {\n      return h(VIcon, {\n        clickable: true,\n        class: {\n          'v-data-table-col__actions-sort': true,\n          'v-data-table-col__actions-sort--active': item.sorted,\n        },\n        size: 14,\n        icon: FaIcons.$arrowUp,\n        color: props.dark ? 'white' : '',\n        onClick: () => onSort(item),\n      })\n    }\n\n    function genFilterButton(item) {\n      return h(VIcon, {\n        clickable: true,\n        class: {\n          'v-data-table-col__actions-filter': true,\n          'v-data-table-col__actions-filter--active': item.filtered,\n        },\n        size: 14,\n        icon: FaIcons.$filter,\n        color: props.dark ? 'white' : '',\n        onClick: () => addFilter(item),\n      })\n    }\n\n    function genHeaderActions(item) {\n      return h(\n        'span',\n        {\n          class: {\n            'v-data-table-col__actions': true,\n          },\n        },\n        [\n          item.sortable && genSortButton(item),\n          item.filterable && genFilterButton(item),\n        ],\n      )\n    }\n\n    function genFilterInput(item) {\n      return h(VTextField, {\n        label: 'insert',\n        dark: props.dark,\n        color: props.dark ? 'white' : '',\n        prependIcon: FaIcons.$search,\n        clearable: true,\n        onInput: $value => onInput($value, item),\n      })\n    }\n\n    function genFilterHeader(item) {\n      return h(\n        'span',\n        {\n          class: {\n            'v-data-table-col__filter-header': true,\n          },\n        },\n        item.title,\n      )\n    }\n\n    function genFilterWrapper(item) {\n      const directive = item.addFilter\n        ? {\n            handler: () => setTimeout(() => (item.addFilter = false)),\n            closeConditional: false,\n          }\n        : undefined\n\n      const propsData = {\n        class: {\n          'v-data-table-col__filter': true,\n        },\n      }\n\n      return (\n        item.filterable &&\n        withDirectives(\n          h('div', setBackground(props.color, propsData), [\n            genFilterHeader(item),\n            genFilterInput(item),\n          ]),\n          [\n            [clickOutside, directive],\n            [vShow, item.addFilter],\n          ],\n        )\n      )\n    }\n\n    function genHeaderTitle(item) {\n      return h(\n        'div',\n        {\n          class: 'v-data-table-col__title',\n        },\n        [item.title],\n      )\n    }\n\n    function genHeaderCell(item) {\n      return h(\n        VDataTableCell,\n        {\n          dark: props.dark,\n          class: {\n            'v-data-table-col': true,\n            'v-data-table-col--sorted': item.sorted,\n          },\n          color: props.color,\n          width: item.width,\n          resizeable: item.resizeable,\n          align: props.align || item.align,\n          onResize: $size => (item.width = $size),\n        },\n        {\n          default: () => [\n            genHeaderTitle(item),\n            genHeaderActions(item),\n            genFilterWrapper(item),\n          ],\n        },\n      )\n    }\n\n    function genHeaderCells() {\n      const cells: VNode[] = []\n\n      props.numbered &&\n        cells.push(\n          h(\n            VDataTableCell,\n            {\n              align: 'center',\n              class: 'v-data-table-col__number',\n              dark: props.dark,\n              color: props.color,\n              width: 50,\n            },\n            {\n              default: () => '№',\n            },\n          ),\n        )\n\n      props.checkbox &&\n        cells.push(\n          h(\n            VDataTableCell,\n            {\n              align: 'center',\n              class: 'v-data-table-col__checkbox',\n              dark: props.dark,\n              color: props.color,\n              width: 50,\n            },\n            {\n              default: () =>\n                h(VCheckbox, {\n                  color: props.dark ? 'white' : '',\n                  onChecked: e => emit('check-all', e),\n                }),\n            },\n          ),\n        )\n\n      cols.value!.forEach((item: Column) => {\n        item.width = item.width || props.colWidth\n        if (!item.hasOwnProperty('show')) {\n          item.show = !item.show\n        }\n        item.show && cells.push(genHeaderCell(item))\n      })\n\n      return cells\n    }\n\n    return () => {\n      const propsData = {\n        class: classes.value,\n      }\n\n      return h(\n        'div',\n        props.color ? setBackground(props.color, propsData) : propsData,\n        genHeaderCells(),\n      )\n    }\n  },\n})\n"],"sourceRoot":"","file":"VDataTableHeader.js"}