import { defineComponent, provide, h } from 'vue';
export default defineComponent({
    name: 'v-form',
    setup(_, { slots }) {
        let fields = [];
        const addFieldValidator = (item) => {
            fields.push(item);
        };
        const removeFieldValidator = (item) => {
            fields = fields.filter((v) => v !== item);
        };
        provide('$v_form', {
            add: addFieldValidator,
            remove: removeFieldValidator,
        });
        const validate = () => {
            const promises = [];
            fields.forEach((v) => {
                promises.push(v());
            });
            return !promises.some((f) => !f) ? Promise.resolve() : Promise.reject();
        };
        return () => h('form', {
            class: 'v-form',
            onSubmit: (e) => e.preventDefault(),
        }, {
            default: () => slots.default && slots.default({ validate }),
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVkZvcm0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9WRm9ybS9WRm9ybS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsTUFBTSxLQUFLLENBQUE7QUFFakQsZUFBZSxlQUFlLENBQUM7SUFDN0IsSUFBSSxFQUFFLFFBQVE7SUFDZCxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFO1FBQ2hCLElBQUksTUFBTSxHQUE4QyxFQUFFLENBQUE7UUFFMUQsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQ2pDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDbkIsQ0FBQyxDQUFBO1FBRUQsTUFBTSxvQkFBb0IsR0FBRyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQ3BDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUE7UUFDM0MsQ0FBQyxDQUFBO1FBRUQsT0FBTyxDQUFDLFNBQVMsRUFBRTtZQUNqQixHQUFHLEVBQUUsaUJBQWlCO1lBQ3RCLE1BQU0sRUFBRSxvQkFBb0I7U0FDN0IsQ0FBQyxDQUFBO1FBRUYsTUFBTSxRQUFRLEdBQUcsR0FBRyxFQUFFO1lBQ3BCLE1BQU0sUUFBUSxHQUE0QixFQUFFLENBQUE7WUFFNUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQXFDLEVBQUUsRUFBRTtnQkFDdkQsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQ3BCLENBQUMsQ0FBQyxDQUFBO1lBRUYsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFBO1FBQ3pFLENBQUMsQ0FBQTtRQUVELE9BQU8sR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRTtZQUNuQixLQUFLLEVBQUUsUUFBUTtZQUNmLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLGNBQWMsRUFBRTtTQUNwQyxFQUNEO1lBQ0UsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxDQUFDO1NBQzVELENBQ0YsQ0FBQTtJQUNILENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHByb3ZpZGUsIGggfSBmcm9tICd2dWUnXG5cbmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7XG4gIG5hbWU6ICd2LWZvcm0nLFxuICBzZXR1cChfLCB7IHNsb3RzIH0pIHtcbiAgICBsZXQgZmllbGRzOiBBcnJheTwoLi4uYXJnczogYW55KSA9PiBQcm9taXNlPGJvb2xlYW4+PiA9IFtdXG5cbiAgICBjb25zdCBhZGRGaWVsZFZhbGlkYXRvciA9IChpdGVtKSA9PiB7XG4gICAgICBmaWVsZHMucHVzaChpdGVtKVxuICAgIH1cblxuICAgIGNvbnN0IHJlbW92ZUZpZWxkVmFsaWRhdG9yID0gKGl0ZW0pID0+IHtcbiAgICAgIGZpZWxkcyA9IGZpZWxkcy5maWx0ZXIoKHYpID0+IHYgIT09IGl0ZW0pXG4gICAgfVxuXG4gICAgcHJvdmlkZSgnJHZfZm9ybScsIHtcbiAgICAgIGFkZDogYWRkRmllbGRWYWxpZGF0b3IsXG4gICAgICByZW1vdmU6IHJlbW92ZUZpZWxkVmFsaWRhdG9yLFxuICAgIH0pXG5cbiAgICBjb25zdCB2YWxpZGF0ZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VzOiBBcnJheTxQcm9taXNlPGJvb2xlYW4+PiA9IFtdXG5cbiAgICAgIGZpZWxkcy5mb3JFYWNoKCh2OiAoLi4uYXJnczogYW55KSA9PiBQcm9taXNlPGJvb2xlYW4+KSA9PiB7XG4gICAgICAgIHByb21pc2VzLnB1c2godigpKVxuICAgICAgfSlcblxuICAgICAgcmV0dXJuICFwcm9taXNlcy5zb21lKChmKSA9PiAhZikgPyBQcm9taXNlLnJlc29sdmUoKSA6IFByb21pc2UucmVqZWN0KClcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4gaCgnZm9ybScsIHtcbiAgICAgICAgY2xhc3M6ICd2LWZvcm0nLFxuICAgICAgICBvblN1Ym1pdDogKGUpID0+IGUucHJldmVudERlZmF1bHQoKSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGRlZmF1bHQ6ICgpID0+IHNsb3RzLmRlZmF1bHQgJiYgc2xvdHMuZGVmYXVsdCh7IHZhbGlkYXRlIH0pLFxuICAgICAgfSxcbiAgICApXG4gIH0sXG59KVxuIl19