{"version":3,"sources":["../../../../src/components/VDataTable/VDataTableHeader.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VDataTableHeader.scss'\n\n// Vue API\nimport { h, computed, withDirectives, defineComponent } from 'vue'\n\n// Effects\nimport { useColors } from '../../effects/use-colors'\nimport { useIcons } from '../../effects/use-icons'\n\n// Components\nimport { VIcon } from '../VIcon'\nimport { VCheckbox } from '../VCheckbox'\nimport { VDataTableCell } from './VDataTableCell'\nimport { VTextField } from '../VTextField'\n\n// Directives\nimport { vShow } from 'vue'\nimport { clickOutside } from '../../directives/v-click-outside'\n\n// Types\nimport { VNode } from 'vue'\nimport { Column } from '../../types'\n\nexport const VDataTableHeader = defineComponent({\n  name: 'v-data-table-header',\n\n  props: {\n    showSequence: Boolean,\n    showCheckbox: Boolean,\n    cols: Array,\n    colWidth: {\n      type: [String, Number],\n      default: 125\n    },\n    align: String,\n    options: Object\n  } as any,\n\n  emits: [\n    'sort',\n    'filter',\n    'select-all',\n    'update:cols'\n  ],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const { setBackground } = useColors()\n    const {\n      icons,\n      iconSize\n    } = useIcons('s')\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-data-table__header': true\n    }))\n\n    const computedContentColor = computed<string>(() => {\n      return props.options.dark\n        ? props.options?.contentColor || 'white'\n        : props.options?.contentColor\n    })\n\n    const cols = computed<Column[]>(() => [...props.cols])\n\n    function onSort(item) {\n      emit('sort', item)\n    }\n\n    function onInput($value, item) {\n      item.filtered = !!$value\n      emit('filter', { value: $value, col: item })\n    }\n\n    function showFilter(item) {\n      if (item.showFilter) return\n      item.showFilter = true\n    }\n\n    function genSortButton(item) {\n      const classes = {\n        'v-data-table-col__actions-sort': true,\n        'v-data-table-col__actions-sort--active': item.sorted\n      }\n\n      const propsData = {\n        clickable: true,\n        class: classes,\n        size: iconSize,\n        icon: icons.$arrowUp,\n        color: !item.cellClass ? computedContentColor.value : '',\n        onClick: () => onSort(item)\n      }\n\n      return h(VIcon, propsData)\n    }\n\n    function genFilterButton(item) {\n      const classes = {\n        'v-data-table-col__actions-filter': true,\n        'v-data-table-col__actions-filter--active': item.filtered\n      }\n\n      const propsData = {\n        clickable: true,\n        class: classes,\n        size: iconSize,\n        icon: icons.$filter,\n        color: !item.cellClass ? computedContentColor.value : '',\n        onClick: () => showFilter(item)\n      }\n\n      return h(VIcon, propsData)\n    }\n\n    function genHeaderActions(item) {\n      return h('span', { class: 'v-data-table-col__actions' }, [\n        item.sortable && genSortButton(item),\n        item.filterable && genFilterButton(item)\n      ])\n    }\n\n    function genFilterInput(item) {\n      const propsData = {\n        label: 'search',\n        dark: props.options.dark,\n        color: !item.cellClass ? computedContentColor.value : '',\n        prependIcon: icons.$search,\n        clearable: true,\n        onInput: ($value) => onInput($value, item)\n      }\n\n      return h(VTextField, propsData)\n    }\n\n    function genFilterWrapper(col) {\n      const color = props.options.dark\n        ? props.options?.color || 'grey darken-3'\n        : props.options?.color || 'white'\n\n      const slotName = `${ col.key }-filter`\n\n      const filterSlot =\n        slots[slotName] &&\n        slots[slotName]!({\n          filter: (event) => onInput(event, col)\n        })\n\n      const directive = col.showFilter\n        ? {\n          handler: () => setTimeout(() => (col.showFilter = false)),\n          closeConditional: false\n        }\n        : undefined\n\n      const propsData = {\n        class: {\n          'v-data-table-col__filter': !filterSlot,\n          'v-data-table-col__custom-filter': !!filterSlot,\n          'elevation-5': true,\n          [col.cellClass]: !!col.cellClass\n        }\n      }\n\n      return (\n        col.filterable &&\n        withDirectives(\n          h(\n            'div',\n            !col.filterClass ? setBackground(color, propsData) : propsData,\n            filterSlot || genFilterInput(col)\n          ),\n          [\n            [clickOutside, directive],\n            [vShow, col.showFilter]\n          ]\n        )\n      )\n    }\n\n    function genHeaderTitle(col) {\n      return h('div', { class: 'v-data-table-col__title' }, col.title)\n    }\n\n    function genNumberCell() {\n      const propsData = {\n        align: 'center',\n        class: {\n          'v-data-table-col__number': true,\n          [props.cellClass]: !!props.cellClass\n        },\n        contentColor: computedContentColor.value,\n        color: props.options.color,\n        width: 50\n      }\n\n      return h(VDataTableCell, propsData, { default: () => '№' })\n    }\n\n    function genCheckboxCell() {\n      const propsData = {\n        align: 'center',\n        class: {\n          'v-data-table-col__checkbox': true,\n          [props.cellClass]: !!props.cellClass\n        },\n        dark: props.options.dark,\n        contentColor: computedContentColor.value,\n        color: props.options.color,\n        width: 50\n      }\n\n      const content = {\n        default: () =>\n          h(VCheckbox, {\n            color: computedContentColor.value,\n            onChecked: (e) => emit('select-all', e)\n          })\n      }\n\n      return h(VDataTableCell, propsData, content)\n    }\n\n    function genHeaderCell(col) {\n      const propsData = {\n        dark: props.options.dark,\n        class: {\n          'v-data-table-col': true,\n          'v-data-table-col--sorted': col.sorted,\n          [col.cellClass]: !!col.cellClass\n        },\n        contentColor: !col.cellClass ? computedContentColor.value : '',\n        color: !col.cellClass ? props.options.color : '',\n        width: col.width,\n        resizeable: col.resizeable,\n        align: col.align || props.align,\n        onResize: ($size) => (col.width = $size)\n      }\n\n      return h(VDataTableCell, propsData, {\n        default: () => [\n          genHeaderTitle(col),\n          genHeaderActions(col),\n          genFilterWrapper(col)\n        ]\n      })\n    }\n\n    function genHeaderChildren() {\n      const children: VNode[] = []\n      const headerSlot = slots.header && slots.header(props)\n\n      props.showSequence && children.push(genNumberCell())\n      props.showCheckbox && children.push(genCheckboxCell())\n\n      cols.value!.forEach((col: Column) => {\n        col.width = col.width || props.colWidth\n\n        if (!col.hasOwnProperty('show')) {\n          col.show = !col.show\n        }\n\n        !headerSlot![0].children && col.show && children.push(genHeaderCell(col))\n      })\n\n      headerSlot![0].children && children.push(headerSlot as any)\n\n      return children\n    }\n\n    return () => {\n      const propsData = {\n        class: classes.value\n      }\n\n      return h(\n        'div',\n        props.options.color\n          ? setBackground(props.options.color, propsData)\n          : propsData,\n        genHeaderChildren()\n      )\n    }\n  }\n})\n"],"sourceRoot":"","file":"VDataTableHeader.js"}