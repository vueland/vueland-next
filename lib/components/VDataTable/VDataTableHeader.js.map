{"version":3,"sources":["../../../../src/components/VDataTable/VDataTableHeader.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VDataTableHeader.scss'\n\n// Vue API\nimport { h, ref, computed, withDirectives, defineComponent } from 'vue'\n\n// Effects\nimport { colorProps, useColors } from '../../effects/use-colors'\n\n// Components\nimport { VIcon } from '../VIcon'\nimport { VCheckbox } from '../VCheckbox'\nimport { VDataTableCell } from './VDataTableCell'\nimport { VTextField } from '../VTextField'\n\n// Directives\nimport { vShow } from 'vue'\nimport { clickOutside } from '../../directives/v-click-outside'\n\n// Types\nimport { VNode } from 'vue'\nimport { Column } from '../../types'\n\n// Services\nimport { FaIcons } from '../../services/icons'\n\nexport const VDataTableHeader = defineComponent({\n  name: 'v-data-table-header',\n\n  props: {\n    dark: Boolean,\n    numbered: Boolean,\n    checkbox: Boolean,\n    cols: Array,\n    colWidth: {\n      type: [String, Number],\n      default: 125,\n    },\n    align: String,\n    ...colorProps(),\n  } as any,\n\n  emits: ['sort', 'filter', 'check-all'],\n\n  setup(props, { emit }) {\n    const cols = ref<any[] | null>([])\n\n    const { setBackground } = useColors()\n\n    cols.value = props.cols\n\n    const classes = computed<Record<string, boolean>>(() => ({\n      'v-data-table__header': true,\n    }))\n\n    function onSort(item) {\n      emit('sort', item)\n    }\n\n    function onInput($value, item) {\n      item.filtered = !!$value\n\n      emit('filter', { value: $value, col: item })\n    }\n\n    function addFilter(item) {\n      if (item.addFilter) return\n      item.addFilter = true\n    }\n\n    function genSortButton(item) {\n      return h(VIcon, {\n        clickable: true,\n        class: {\n          'v-data-table-col__actions-sort': true,\n          'v-data-table-col__actions-sort--active': item.sorted,\n        },\n        size: 14,\n        icon: FaIcons.$arrowUp,\n        color: props.dark ? 'white' : '',\n        onClick: () => onSort(item),\n      })\n    }\n\n    function genFilterButton(item) {\n      return h(VIcon, {\n        clickable: true,\n        class: {\n          'v-data-table-col__actions-filter': true,\n          'v-data-table-col__actions-filter--active': item.filtered,\n        },\n        size: 14,\n        icon: FaIcons.$filter,\n        color: props.dark ? 'white' : '',\n        onClick: () => addFilter(item),\n      })\n    }\n\n    function genHeaderActions(item) {\n      return h(\n        'span',\n        {\n          class: {\n            'v-data-table-col__actions': true,\n          },\n        },\n        [\n          item.sortable && genSortButton(item),\n          item.filterable && genFilterButton(item),\n        ],\n      )\n    }\n\n    function genFilterInput(item) {\n      return h(VTextField, {\n        label: 'insert',\n        dark: props.dark,\n        color: props.dark ? 'white' : '',\n        prependIcon: FaIcons.$search,\n        clearable: true,\n        onInput: $value => onInput($value, item),\n      })\n    }\n\n    function genFilterHeader(item) {\n      return h(\n        'span',\n        {\n          class: {\n            'v-data-table-col__filter-header': true,\n          },\n        },\n        item.title,\n      )\n    }\n\n    function genFilterWrapper(item) {\n      const directive = item.addFilter\n        ? {\n          handler: () => setTimeout(() => (item.addFilter = false)),\n          closeConditional: false,\n        }\n        : undefined\n\n      const propsData = {\n        class: {\n          'v-data-table-col__filter': true,\n        },\n      }\n\n      return (\n        item.filterable &&\n        withDirectives(\n          h('div', setBackground(props.color, propsData), [\n            genFilterHeader(item),\n            genFilterInput(item),\n          ]),\n          [\n            [clickOutside, directive],\n            [vShow, item.addFilter],\n          ],\n        )\n      )\n    }\n\n    function genHeaderTitle(item) {\n      return h(\n        'div',\n        {\n          class: 'v-data-table-col__title',\n        },\n        [item.title],\n      )\n    }\n\n    function genNumberCell() {\n      return h(\n        VDataTableCell,\n        {\n          align: 'center',\n          class: 'v-data-table-col__number',\n          dark: props.dark,\n          color: props.color,\n          width: 50,\n        },\n        {\n          default: () => 'â„–',\n        },\n      )\n    }\n\n    function genCheckboxCell() {\n      return h(\n        VDataTableCell,\n        {\n          align: 'center',\n          class: 'v-data-table-col__checkbox',\n          dark: props.dark,\n          color: props.color,\n          width: 50,\n        },\n        {\n          default: () =>\n            h(VCheckbox, {\n              color: props.dark ? 'white' : '',\n              onChecked: e => emit('check-all', e),\n            }),\n        },\n      )\n    }\n\n    function genHeaderCell(item) {\n      return h(\n        VDataTableCell,\n        {\n          dark: props.dark,\n          class: {\n            'v-data-table-col': true,\n            'v-data-table-col--sorted': item.sorted,\n          },\n          color: props.color,\n          width: item.width,\n          resizeable: item.resizeable,\n          align: props.align || item.align,\n          onResize: $size => (item.width = $size),\n        },\n        {\n          default: () => [\n            genHeaderTitle(item),\n            genHeaderActions(item),\n            genFilterWrapper(item),\n          ],\n        },\n      )\n    }\n\n    function genHeaderCells() {\n      const cells: VNode[] = []\n\n      props.numbered && cells.push(genNumberCell())\n      props.checkbox && cells.push(genCheckboxCell())\n\n      cols.value!.forEach((item: Column) => {\n        item.width = item.width || props.colWidth\n        if (!item.hasOwnProperty('show')) {\n          item.show = !item.show\n        }\n        item.show && cells.push(genHeaderCell(item))\n      })\n\n      return cells\n    }\n\n    return () => {\n      const propsData = {\n        class: classes.value,\n      }\n\n      return h(\n        'div',\n        props.color ? setBackground(props.color, propsData) : propsData,\n        genHeaderCells(),\n      )\n    }\n  },\n})\n"],"sourceRoot":"","file":"VDataTableHeader.js"}