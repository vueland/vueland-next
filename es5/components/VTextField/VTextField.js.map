{"version":3,"sources":["../../../../src/components/VTextField/VTextField.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VTextField.scss'\n\n// Vue API\nimport {\n  h,\n  inject,\n  watch,\n  computed,\n  reactive,\n  defineComponent,\n  onBeforeUnmount,\n} from 'vue'\n\n// Effects\nimport { useValidate, validateProps } from '../../effects/use-validate'\nimport { useColors, colorProps } from '../../effects/use-colors'\n\n// Components\nimport { VInput } from '../VInput'\n\n// Types\nimport { VNode, Ref } from 'vue'\n\ntype TextFieldState = {\n  value: string | number\n  focused: boolean\n}\n\nexport const VTextField = defineComponent({\n  name: 'v-text-field',\n  emits: [\n    'input',\n    'focus',\n    'blur',\n    'change',\n    'update:value',\n    'update:modelValue',\n  ],\n  props: {\n    dark: Boolean,\n    disabled: Boolean,\n    readonly: Boolean,\n    label: String,\n    isDirty: Boolean,\n    type: {\n      type: String,\n      default: 'text',\n    },\n    modelValue: [String, Number, Date],\n    tag: {\n      type: String,\n      default: 'input',\n    },\n    ...validateProps(),\n    ...colorProps(),\n  } as any,\n\n  setup(props, { emit, attrs }): () => VNode {\n    const state: TextFieldState = reactive({\n      value: '',\n      focused: false,\n    })\n\n    state.value = props.modelValue || props.value\n\n    const fields: Ref<any[]> | undefined = props.rules && inject('fields')\n\n    const { setTextColor } = useColors()\n\n    const {\n      validate,\n      dirty,\n      update,\n      errorState,\n      validateClasses,\n      validationState,\n    } = useValidate(props)\n\n    watch(() => (props.modelValue || props.value), value => {\n        state.value = value\n        validateValue()\n      },\n    )\n\n    const classes = computed<Record<string, boolean>>(() => ({\n        'v-text-field': true,\n        'v-text-field--disabled': props.disabled,\n        'v-text-field--dirty': errorState.isDirty,\n        'v-text-field--valid': errorState.isDirty && !errorState.innerError,\n        'v-text-field--not-valid': errorState.isDirty && !!errorState.innerError,\n        ...validateClasses.value,\n      }),\n    )\n\n    function validateValue(): boolean | void {\n      return props.rules?.length && validate(state.value)\n    }\n\n    if (fields?.value && props.rules?.length) {\n      fields!.value.push(validateValue)\n    }\n\n    onBeforeUnmount(() => {\n      if (fields?.value) {\n        fields.value = fields.value.filter(v => v !== validateValue)\n      }\n    })\n\n    function focusHandler() {\n      dirty()\n      update(errorState.innerError)\n      state.focused = true\n      emit('focus')\n    }\n\n    function blurHandler() {\n      state.focused = false\n      emit('blur')\n      validateValue()\n    }\n\n    function changeHandler() {\n      emit('change', state.value)\n    }\n\n    function inputHandler(e) {\n      state.value = e.target.value\n      emit('update:modelValue', state.value)\n      emit('update:value', state.value)\n      emit('input', state.value)\n    }\n\n    function genInput(): VNode {\n      const propsData = {\n        disabled: props.disabled,\n        readonly: props.readonly,\n        value: state.value,\n        autocomplete: attrs.autocomplete,\n        class: {\n          'v-text-field__input': true,\n        },\n        onFocus: focusHandler,\n        onBlur: blurHandler,\n        onInput: inputHandler,\n        onChange: changeHandler,\n      }\n\n      if (props.tag === 'input') {\n        (propsData as any).type = props.type\n      }\n\n      return h(props.tag,\n        props.dark\n          ? setTextColor('white', propsData)\n          : propsData,\n      )\n    }\n\n    function genTextField(): VNode {\n      return h('div', {\n          class: classes.value,\n        }, genInput(),\n      )\n    }\n\n    return () => {\n      const propsData = {\n        label: props.label,\n        focused: state.focused,\n        hasState: !!state.value,\n        hasError: errorState.innerError,\n        dark: props.dark,\n        color: validationState.value,\n        isDirty: errorState.isDirty,\n        disabled: props.disabled,\n        message: errorState.innerErrorMessage,\n      }\n\n      return h(VInput, propsData, {\n          textField: () => genTextField(),\n        },\n      )\n    }\n  },\n})\n"],"sourceRoot":"","file":"VTextField.js"}