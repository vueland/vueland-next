{"version":3,"sources":["../../../../src/components/VMenu/VMenu.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VMenu.scss'\n\n// Vue API\nimport {\n  h,\n  defineComponent,\n  withDirectives,\n  computed,\n  watch,\n  onMounted,\n  onBeforeUnmount\n} from 'vue'\n\n// Effects\nimport {\n  autoPositionProps,\n  useAutoPosition\n} from '../../effects/use-auto-position'\nimport { activatorProps, useActivator } from '../../effects/use-activator'\nimport { useDetach } from '../../effects/use-detach'\nimport { useTransition } from '../../effects/use-transition'\nimport { useElevation } from '../../effects/use-elevation'\nimport { useToggle } from '../../effects/use-toggle'\nimport { positionProps } from '../../effects/use-position'\n\n// Helpers\nimport { convertToUnit } from '../../helpers'\n\n// Directives\nimport { clickOutside, resize } from '../../directives'\nimport { vShow } from 'vue'\n\n// Types\nimport { VNode } from 'vue'\n\nexport const VMenu = defineComponent({\n  name: 'v-menu',\n  props: {\n    maxHeight: {\n      type: [ Number, String ],\n      default: 200\n    },\n    width: {\n      type: [ Number, String ],\n      default: 0\n    },\n    zIndex: {\n      type: [ String, Number ],\n      default: 10\n    },\n    parent: {\n      type: Object,\n      default: null\n    },\n    inputActivator: {\n      type: String,\n      default: null\n    },\n    openOnHover: Boolean,\n    openOnClick: Boolean,\n    openOnContextmenu: Boolean,\n    closeOnContentClick: {\n      type: Boolean,\n      default: true\n    },\n    closeOnClick: {\n      type: Boolean,\n      default: true\n    },\n    elevation: {\n      type: [ Number, String ],\n      default: 10\n    },\n    modelValue: Boolean,\n    ...positionProps(),\n    ...autoPositionProps(),\n    ...activatorProps()\n  },\n\n  emits: [ 'open', 'close' ],\n\n  setup(props, { emit, slots }) {\n    const { elevationClasses } = useElevation(props)\n    const { isActive } = useToggle(props)\n    const { contentRef, setDimensions, dimensions } = useAutoPosition(props)\n    const { setDetached, removeDetached } = useDetach()\n    const {\n      activatorRef,\n      getActivator,\n      genActivatorListeners,\n      addActivatorEvents,\n      removeActivatorEvents\n    } = useActivator(props)\n\n    const handlers = {\n      click: (e) => {\n        setDimensions(getActivator(e)).then(() => {\n          requestAnimationFrame(() => (isActive.value = true))\n        })\n      },\n      mouseenter: () => (isActive.value = true),\n      mouseleave: () => (isActive.value = false),\n      contextmenu: () => (isActive.value = true)\n    }\n\n    const listeners = genActivatorListeners(props, handlers)\n\n    const directive = computed(() => {\n      return isActive.value\n        ? {\n          handler: () => (isActive.value = false),\n          closeConditional: props.closeOnContentClick\n        }\n        : undefined\n    })\n\n    const calcWidth = computed<number | string>(() => {\n      return props.width || +dimensions.content.width\n    })\n\n    watch(\n      () => isActive.value,\n      (to) => {\n        to && emit('open')\n        !to && emit('close')\n      }\n    )\n\n    watch(\n      () => [ props.positionY, props.positionX ],\n      () => setDimensions(activatorRef.value)\n    )\n\n    watch(\n      () => props.modelValue,\n      (to) => {\n        isActive.value = false\n        requestAnimationFrame(() => (isActive.value = to))\n      }\n    )\n\n    function genActivatorSlot(): VNode | null {\n      if (slots.activator) {\n        const slotContent = slots.activator({ on: listeners })\n\n        if (typeof slotContent![0].type === 'object') {\n          return h('div', { ref: activatorRef }, h(slotContent![0]))\n        }\n\n        return h(slotContent![0], { ref: activatorRef })\n      }\n\n      return null\n    }\n\n    function genContentSlot(): VNode {\n      const propsData = {\n        ref: contentRef,\n        class: {\n          'v-menu__content': true,\n          ...elevationClasses.value\n        },\n        style: {\n          maxHeight: convertToUnit(props.maxHeight),\n          width: convertToUnit(calcWidth.value),\n          top: convertToUnit(dimensions.content.top),\n          left: convertToUnit(dimensions.content.left),\n          zIndex: props.zIndex\n        },\n        onClick: () => {\n          isActive.value = !props.closeOnContentClick\n        }\n      }\n\n      const content = h('div', propsData, [ slots.default && slots.default() ])\n\n      const directives: any = [\n        [ vShow, isActive.value ],\n        [ resize, onResize ]\n      ]\n\n      if (props.closeOnClick) directives.push([ clickOutside, directive.value ])\n\n      return withDirectives(content, directives)\n    }\n\n    onMounted(() => {\n      activatorRef.value = getActivator()\n      addActivatorEvents()\n      setDetached(contentRef.value)\n    })\n\n    onBeforeUnmount(() => {\n      removeActivatorEvents()\n      removeDetached(contentRef.value)\n    })\n\n    function onResize() {\n      if (!isActive.value) return\n      requestAnimationFrame(() => setDimensions(activatorRef))\n    }\n\n    return () => [\n      h('div', { class: { 'v-menu': true } }),\n      slots.activator && genActivatorSlot(),\n      useTransition(genContentSlot(), 'fade')\n    ]\n  }\n})\n"],"sourceRoot":"","file":"VMenu.js"}