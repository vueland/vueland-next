{"version":3,"sources":["../../../../src/components/VTooltip/VTooltip.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './VTooltip.scss'\n\n// Vue API\nimport {\n  h,\n  ref,\n  reactive,\n  watch,\n  computed,\n  withDirectives,\n  defineComponent,\n  onMounted,\n  vShow,\n} from 'vue'\n\n// Effects\nimport { useToggle } from '../../effects/use-toggle'\nimport { useColors } from '../../effects/use-colors'\nimport { useActivator } from '../../effects/use-activator'\nimport { useTransition } from '../../effects/use-transition'\nimport { elevationProps, useElevation } from '../../effects/use-elevation'\nimport { positionProps } from '../../effects/use-position'\n\n// Types\nimport { OffsetSizes } from '../../types'\nimport { VNode } from 'vue'\n\n// Helpers\nimport { convertToUnit } from '../../helpers'\n\n// TODO fix behavior on window resize if v-model used on component\n\nexport const VTooltip = defineComponent({\n  name: 'v-tooltip',\n\n  props: {\n    openOnHover: {\n      type: Boolean,\n      default: true,\n    },\n    color: {\n      type: String,\n      default: 'grey lighten-1',\n    },\n    zIndex: [Number, String],\n    maxWidth: [Number, String],\n    minWidth: [Number, String],\n    modelValue: Boolean,\n    ...elevationProps(),\n    ...positionProps(),\n  } as any,\n\n  setup(props, { slots }) {\n    const tooltip = reactive<Partial<OffsetSizes>>({})\n    const activator = reactive<Partial<OffsetSizes>>({})\n\n    const tooltipRef = ref<HTMLElement | null>(null)\n\n    const { isActive } = useToggle(props)\n    const { elevationClasses } = useElevation(props)\n    const { setBackground } = useColors()\n    const {\n      activatorRef,\n      getActivatorSizes,\n      genActivatorListeners,\n    } = useActivator()\n\n    const listeners = genActivatorListeners(props, isActive)\n\n    const classes = computed(() => ({\n      'v-tooltip': true,\n      'v-tooltip--top': props.top,\n      'v-tooltip--right': props.right,\n      'v-tooltip--left': props.left,\n      'v-tooltip--bottom': props.bottom,\n    }))\n\n    const contentClasses = computed<Record<string, boolean>>(() => ({\n      'v-tooltip__content': true,\n      ...elevationClasses.value,\n    }))\n\n    const computeTopPosition = computed<number>(() => {\n      return (\n        (props.top ? activator!.top! - tooltip.height!\n          : props.bottom ? activator.top! + activator.height!\n            : activator.top! + (activator.height! - tooltip.height!) / 2) +\n        +props.offsetY\n      )\n    })\n\n    const computeLeftPosition = computed<number>(() => {\n      return (\n        (props.left ? activator.left! - tooltip.width! : props.right\n          ? activator.left! + activator.width!\n          : activator.left! + (activator.width! - tooltip.width!) / 2) +\n        +props.offsetX\n      )\n    })\n\n    const styles = computed<Record<string, string>>(() => ({\n      top: tooltip.top ? convertToUnit(tooltip.top) as string : '',\n      left: tooltip.top ? convertToUnit(tooltip.left) as string : '',\n      maxWidth: !!props.maxWidth ? `${ props.maxWidth }px` : '',\n      minWidth: !!props.minWidth ? `${ props.minWidth }px` : '',\n      zIndex: props.zIndex,\n    }))\n\n    function genActivator(): VNode | null {\n      const slotContent = slots.activator && slots.activator({\n        on: listeners,\n      })\n\n      return h(slotContent![0], { ref: activatorRef })\n    }\n\n    function genContent(): VNode {\n      const propsData = {\n        class: contentClasses.value,\n        style: styles.value,\n        ref: tooltipRef,\n      }\n\n      return withDirectives(\n        h('span', setBackground(props.color, propsData),\n          slots.default && slots.default(),\n        ),\n        [[vShow, isActive.value]],\n      )\n    }\n\n    function setTooltipPosition() {\n      if (tooltipRef.value) {\n        tooltip.width = tooltipRef.value!.offsetWidth\n        tooltip.height = tooltipRef.value!.offsetHeight\n        tooltip.top = computeTopPosition.value\n        tooltip.left = computeLeftPosition.value\n      }\n    }\n\n    onMounted(() => {\n      watch(\n        () => isActive.value,\n        to => {\n          if (to) {\n            const { left, top, height, width } = getActivatorSizes()\n\n            activator.left = left as number\n            activator.top = top as number\n            activator.height = height as number\n            activator.width = width as number\n\n            tooltip.top = 0\n            tooltip.left = 0\n\n            requestAnimationFrame(setTooltipPosition)\n          }\n        },\n        { immediate: true },\n      )\n    })\n\n    return () => {\n      const content = useTransition(\n        genContent() as VNode,\n        isActive.value ? 'scale-in' : 'fade',\n      )\n\n      return [h('div', {\n          class: classes.value,\n        },\n      ), content, genActivator()]\n    }\n  },\n})\n"],"sourceRoot":"","file":"VTooltip.js"}